(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var ud={exports:{}},rl={},cd={exports:{}},Pe={};var Yp;function BE(){if(Yp)return Pe;Yp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function I(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,U={};function q(b,J,ge){this.props=b,this.context=J,this.refs=U,this.updater=ge||A}q.prototype.isReactComponent={},q.prototype.setState=function(b,J){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,J,"setState")},q.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function K(){}K.prototype=q.prototype;function X(b,J,ge){this.props=b,this.context=J,this.refs=U,this.updater=ge||A}var Q=X.prototype=new K;Q.constructor=X,B(Q,q.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray,se=Object.prototype.hasOwnProperty,le={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function P(b,J,ge){var Ae,Re={},ke=null,be=null;if(J!=null)for(Ae in J.ref!==void 0&&(be=J.ref),J.key!==void 0&&(ke=""+J.key),J)se.call(J,Ae)&&!M.hasOwnProperty(Ae)&&(Re[Ae]=J[Ae]);var Ge=arguments.length-2;if(Ge===1)Re.children=ge;else if(1<Ge){for(var Je=Array(Ge),It=0;It<Ge;It++)Je[It]=arguments[It+2];Re.children=Je}if(b&&b.defaultProps)for(Ae in Ge=b.defaultProps,Ge)Re[Ae]===void 0&&(Re[Ae]=Ge[Ae]);return{$$typeof:n,type:b,key:ke,ref:be,props:Re,_owner:le.current}}function R(b,J){return{$$typeof:n,type:b.type,key:J,ref:b.ref,props:b.props,_owner:b._owner}}function k(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function L(b){var J={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ge){return J[ge]})}var O=/\/+/g;function x(b,J){return typeof b=="object"&&b!==null&&b.key!=null?L(""+b.key):J.toString(36)}function Fe(b,J,ge,Ae,Re){var ke=typeof b;(ke==="undefined"||ke==="boolean")&&(b=null);var be=!1;if(b===null)be=!0;else switch(ke){case"string":case"number":be=!0;break;case"object":switch(b.$$typeof){case n:case e:be=!0}}if(be)return be=b,Re=Re(be),b=Ae===""?"."+x(be,0):Ae,ie(Re)?(ge="",b!=null&&(ge=b.replace(O,"$&/")+"/"),Fe(Re,J,ge,"",function(It){return It})):Re!=null&&(k(Re)&&(Re=R(Re,ge+(!Re.key||be&&be.key===Re.key?"":(""+Re.key).replace(O,"$&/")+"/")+b)),J.push(Re)),1;if(be=0,Ae=Ae===""?".":Ae+":",ie(b))for(var Ge=0;Ge<b.length;Ge++){ke=b[Ge];var Je=Ae+x(ke,Ge);be+=Fe(ke,J,ge,Je,Re)}else if(Je=I(b),typeof Je=="function")for(b=Je.call(b),Ge=0;!(ke=b.next()).done;)ke=ke.value,Je=Ae+x(ke,Ge++),be+=Fe(ke,J,ge,Je,Re);else if(ke==="object")throw J=String(b),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return be}function pt(b,J,ge){if(b==null)return b;var Ae=[],Re=0;return Fe(b,Ae,"","",function(ke){return J.call(ge,ke,Re++)}),Ae}function Ke(b){if(b._status===-1){var J=b._result;J=J(),J.then(function(ge){(b._status===0||b._status===-1)&&(b._status=1,b._result=ge)},function(ge){(b._status===0||b._status===-1)&&(b._status=2,b._result=ge)}),b._status===-1&&(b._status=0,b._result=J)}if(b._status===1)return b._result.default;throw b._result}var Ue={current:null},oe={transition:null},_e={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:oe,ReactCurrentOwner:le};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:pt,forEach:function(b,J,ge){pt(b,function(){J.apply(this,arguments)},ge)},count:function(b){var J=0;return pt(b,function(){J++}),J},toArray:function(b){return pt(b,function(J){return J})||[]},only:function(b){if(!k(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Pe.Component=q,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=X,Pe.StrictMode=r,Pe.Suspense=m,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Pe.act=ce,Pe.cloneElement=function(b,J,ge){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Ae=B({},b.props),Re=b.key,ke=b.ref,be=b._owner;if(J!=null){if(J.ref!==void 0&&(ke=J.ref,be=le.current),J.key!==void 0&&(Re=""+J.key),b.type&&b.type.defaultProps)var Ge=b.type.defaultProps;for(Je in J)se.call(J,Je)&&!M.hasOwnProperty(Je)&&(Ae[Je]=J[Je]===void 0&&Ge!==void 0?Ge[Je]:J[Je])}var Je=arguments.length-2;if(Je===1)Ae.children=ge;else if(1<Je){Ge=Array(Je);for(var It=0;It<Je;It++)Ge[It]=arguments[It+2];Ae.children=Ge}return{$$typeof:n,type:b.type,key:Re,ref:ke,props:Ae,_owner:be}},Pe.createContext=function(b){return b={$$typeof:u,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Pe.createElement=P,Pe.createFactory=function(b){var J=P.bind(null,b);return J.type=b,J},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(b){return{$$typeof:h,render:b}},Pe.isValidElement=k,Pe.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:Ke}},Pe.memo=function(b,J){return{$$typeof:g,type:b,compare:J===void 0?null:J}},Pe.startTransition=function(b){var J=oe.transition;oe.transition={};try{b()}finally{oe.transition=J}},Pe.unstable_act=ce,Pe.useCallback=function(b,J){return Ue.current.useCallback(b,J)},Pe.useContext=function(b){return Ue.current.useContext(b)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(b){return Ue.current.useDeferredValue(b)},Pe.useEffect=function(b,J){return Ue.current.useEffect(b,J)},Pe.useId=function(){return Ue.current.useId()},Pe.useImperativeHandle=function(b,J,ge){return Ue.current.useImperativeHandle(b,J,ge)},Pe.useInsertionEffect=function(b,J){return Ue.current.useInsertionEffect(b,J)},Pe.useLayoutEffect=function(b,J){return Ue.current.useLayoutEffect(b,J)},Pe.useMemo=function(b,J){return Ue.current.useMemo(b,J)},Pe.useReducer=function(b,J,ge){return Ue.current.useReducer(b,J,ge)},Pe.useRef=function(b){return Ue.current.useRef(b)},Pe.useState=function(b){return Ue.current.useState(b)},Pe.useSyncExternalStore=function(b,J,ge){return Ue.current.useSyncExternalStore(b,J,ge)},Pe.useTransition=function(){return Ue.current.useTransition()},Pe.version="18.3.1",Pe}var Xp;function Zd(){return Xp||(Xp=1,cd.exports=BE()),cd.exports}var Zp;function qE(){if(Zp)return rl;Zp=1;var n=Zd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,m,g){var y,T={},I=null,A=null;g!==void 0&&(I=""+g),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(A=m.ref);for(y in m)r.call(m,y)&&!l.hasOwnProperty(y)&&(T[y]=m[y]);if(h&&h.defaultProps)for(y in m=h.defaultProps,m)T[y]===void 0&&(T[y]=m[y]);return{$$typeof:e,type:h,key:I,ref:A,props:T,_owner:o.current}}return rl.Fragment=t,rl.jsx=u,rl.jsxs=u,rl}var jp;function OE(){return jp||(jp=1,ud.exports=qE()),ud.exports}var D=OE(),ze=Zd(),$a={},dd={exports:{}},nn={},fd={exports:{}},hd={};var em;function bE(){return em||(em=1,(function(n){function e(oe,_e){var ce=oe.length;oe.push(_e);e:for(;0<ce;){var b=ce-1>>>1,J=oe[b];if(0<o(J,_e))oe[b]=_e,oe[ce]=J,ce=b;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var _e=oe[0],ce=oe.pop();if(ce!==_e){oe[0]=ce;e:for(var b=0,J=oe.length,ge=J>>>1;b<ge;){var Ae=2*(b+1)-1,Re=oe[Ae],ke=Ae+1,be=oe[ke];if(0>o(Re,ce))ke<J&&0>o(be,Re)?(oe[b]=be,oe[ke]=ce,b=ke):(oe[b]=Re,oe[Ae]=ce,b=Ae);else if(ke<J&&0>o(be,ce))oe[b]=be,oe[ke]=ce,b=ke;else break e}}return _e}function o(oe,_e){var ce=oe.sortIndex-_e.sortIndex;return ce!==0?ce:oe.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],g=[],y=1,T=null,I=3,A=!1,B=!1,U=!1,q=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(oe){for(var _e=t(g);_e!==null;){if(_e.callback===null)r(g);else if(_e.startTime<=oe)r(g),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=t(g)}}function ie(oe){if(U=!1,Q(oe),!B)if(t(m)!==null)B=!0,Ke(se);else{var _e=t(g);_e!==null&&Ue(ie,_e.startTime-oe)}}function se(oe,_e){B=!1,U&&(U=!1,K(P),P=-1),A=!0;var ce=I;try{for(Q(_e),T=t(m);T!==null&&(!(T.expirationTime>_e)||oe&&!L());){var b=T.callback;if(typeof b=="function"){T.callback=null,I=T.priorityLevel;var J=b(T.expirationTime<=_e);_e=n.unstable_now(),typeof J=="function"?T.callback=J:T===t(m)&&r(m),Q(_e)}else r(m);T=t(m)}if(T!==null)var ge=!0;else{var Ae=t(g);Ae!==null&&Ue(ie,Ae.startTime-_e),ge=!1}return ge}finally{T=null,I=ce,A=!1}}var le=!1,M=null,P=-1,R=5,k=-1;function L(){return!(n.unstable_now()-k<R)}function O(){if(M!==null){var oe=n.unstable_now();k=oe;var _e=!0;try{_e=M(!0,oe)}finally{_e?x():(le=!1,M=null)}}else le=!1}var x;if(typeof X=="function")x=function(){X(O)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,pt=Fe.port2;Fe.port1.onmessage=O,x=function(){pt.postMessage(null)}}else x=function(){q(O,0)};function Ke(oe){M=oe,le||(le=!0,x())}function Ue(oe,_e){P=q(function(){oe(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){B||A||(B=!0,Ke(se))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(oe){switch(I){case 1:case 2:case 3:var _e=3;break;default:_e=I}var ce=I;I=_e;try{return oe()}finally{I=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,_e){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ce=I;I=oe;try{return _e()}finally{I=ce}},n.unstable_scheduleCallback=function(oe,_e,ce){var b=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?b+ce:b):ce=b,oe){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ce+J,oe={id:y++,callback:_e,priorityLevel:oe,startTime:ce,expirationTime:J,sortIndex:-1},ce>b?(oe.sortIndex=ce,e(g,oe),t(m)===null&&oe===t(g)&&(U?(K(P),P=-1):U=!0,Ue(ie,ce-b))):(oe.sortIndex=J,e(m,oe),B||A||(B=!0,Ke(se))),oe},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(oe){var _e=I;return function(){var ce=I;I=_e;try{return oe.apply(this,arguments)}finally{I=ce}}}})(hd)),hd}var tm;function GE(){return tm||(tm=1,fd.exports=bE()),fd.exports}var nm;function HE(){if(nm)return nn;nm=1;var n=Zd(),e=GE();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(i,s){u(i,s),u(i+"Capture",s)}function u(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},T={};function I(i){return m.call(T,i)?!0:m.call(y,i)?!1:g.test(i)?T[i]=!0:(y[i]=!0,!1)}function A(i,s,a,p){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:a!==null?!a.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function B(i,s,a,p){if(s===null||typeof s>"u"||A(i,s,a,p))return!0;if(p)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(i,s,a,p,_,E,C){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=a,this.propertyName=i,this.type=s,this.sanitizeURL=E,this.removeEmptyString=C}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){q[i]=new U(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];q[s]=new U(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){q[i]=new U(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){q[i]=new U(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){q[i]=new U(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){q[i]=new U(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){q[i]=new U(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){q[i]=new U(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){q[i]=new U(i,5,!1,i.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function X(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(K,X);q[s]=new U(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(K,X);q[s]=new U(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(K,X);q[s]=new U(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){q[i]=new U(i,1,!1,i.toLowerCase(),null,!1,!1)}),q.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){q[i]=new U(i,1,!1,i.toLowerCase(),null,!0,!0)});function Q(i,s,a,p){var _=q.hasOwnProperty(s)?q[s]:null;(_!==null?_.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(B(s,a,_,p)&&(a=null),p||_===null?I(s)&&(a===null?i.removeAttribute(s):i.setAttribute(s,""+a)):_.mustUseProperty?i[_.propertyName]=a===null?_.type===3?!1:"":a:(s=_.attributeName,p=_.attributeNamespace,a===null?i.removeAttribute(s):(_=_.type,a=_===3||_===4&&a===!0?"":""+a,p?i.setAttributeNS(p,s,a):i.setAttribute(s,a))))}var ie=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),le=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),oe=Symbol.iterator;function _e(i){return i===null||typeof i!="object"?null:(i=oe&&i[oe]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Object.assign,b;function J(i){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+i}var ge=!1;function Ae(i,s){if(!i||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var p=$}Reflect.construct(i,[],s)}else{try{s.call()}catch($){p=$}i.call(s.prototype)}else{try{throw Error()}catch($){p=$}i()}}catch($){if($&&p&&typeof $.stack=="string"){for(var _=$.stack.split(`
`),E=p.stack.split(`
`),C=_.length-1,N=E.length-1;1<=C&&0<=N&&_[C]!==E[N];)N--;for(;1<=C&&0<=N;C--,N--)if(_[C]!==E[N]){if(C!==1||N!==1)do if(C--,N--,0>N||_[C]!==E[N]){var V=`
`+_[C].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=C&&0<=N);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(i=i?i.displayName||i.name:"")?J(i):""}function Re(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function ke(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case le:return"Portal";case R:return"Profiler";case P:return"StrictMode";case x:return"Suspense";case Fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case O:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case pt:return s=i.displayName||null,s!==null?s:ke(i.type)||"Memo";case Ke:s=i._payload,i=i._init;try{return ke(i(s))}catch{}}return null}function be(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ge(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Je(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function It(i){var s=Je(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),p=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var _=a.get,E=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return _.call(this)},set:function(C){p=""+C,E.call(this,C)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function ir(i){i._valueTracker||(i._valueTracker=It(i))}function Wi(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),p="";return i&&(p=Je(i)?i.checked?"true":"false":i.value),i=p,i!==a?(s.setValue(i),!0):!1}function Pr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ai(i,s){var a=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??i._wrapperState.initialChecked})}function Ki(i,s){var a=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;a=Ge(s.value!=null?s.value:a),i._wrapperState={initialChecked:p,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function us(i,s){s=s.checked,s!=null&&Q(i,"checked",s,!1)}function cs(i,s){us(i,s);var a=Ge(s.value),p=s.type;if(a!=null)p==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+a):i.value!==""+a&&(i.value=""+a);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?Ji(i,s.type,a):s.hasOwnProperty("defaultValue")&&Ji(i,s.type,Ge(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function Nl(i,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,a||s===i.value||(i.value=s),i.defaultValue=s}a=i.name,a!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,a!==""&&(i.name=a)}function Ji(i,s,a){(s!=="number"||Pr(i.ownerDocument)!==i)&&(a==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+a&&(i.defaultValue=""+a))}var or=Array.isArray;function sr(i,s,a,p){if(i=i.options,s){s={};for(var _=0;_<a.length;_++)s["$"+a[_]]=!0;for(a=0;a<i.length;a++)_=s.hasOwnProperty("$"+i[a].value),i[a].selected!==_&&(i[a].selected=_),_&&p&&(i[a].defaultSelected=!0)}else{for(a=""+Ge(a),s=null,_=0;_<i.length;_++){if(i[_].value===a){i[_].selected=!0,p&&(i[_].defaultSelected=!0);return}s!==null||i[_].disabled||(s=i[_])}s!==null&&(s.selected=!0)}}function ds(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Qi(i,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(or(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}i._wrapperState={initialValue:Ge(a)}}function Yi(i,s){var a=Ge(s.value),p=Ge(s.defaultValue);a!=null&&(a=""+a,a!==i.value&&(i.value=a),s.defaultValue==null&&i.defaultValue!==a&&(i.defaultValue=a)),p!=null&&(i.defaultValue=""+p)}function fs(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?mt(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var lr,hs=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,p,_){MSApp.execUnsafeLocalFunction(function(){return i(s,a,p,_)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=lr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function xr(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(i){ci.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),ui[s]=ui[i]})});function ps(i,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ui.hasOwnProperty(i)&&ui[i]?(""+s).trim():s+"px"}function ms(i,s){i=i.style;for(var a in s)if(s.hasOwnProperty(a)){var p=a.indexOf("--")===0,_=ps(a,s[a],p);a==="float"&&(a="cssFloat"),p?i.setProperty(a,_):i[a]=_}}var gs=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ys(i,s){if(s){if(gs[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function _s(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var di=null;function Xi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Zi=null,dn=null,Hn=null;function ji(i){if(i=Gs(i)){if(typeof Zi!="function")throw Error(t(280));var s=i.stateNode;s&&(s=sa(s),Zi(i.stateNode,i.type,s))}}function zn(i){dn?Hn?Hn.push(i):Hn=[i]:dn=i}function vs(){if(dn){var i=dn,s=Hn;if(Hn=dn=null,ji(i),s)for(i=0;i<s.length;i++)ji(s[i])}}function fi(i,s){return i(s)}function Es(){}var ar=!1;function Ts(i,s,a){if(ar)return i(s,a);ar=!0;try{return fi(i,s,a)}finally{ar=!1,(dn!==null||Hn!==null)&&(Es(),vs())}}function lt(i,s){var a=i.stateNode;if(a===null)return null;var p=sa(a);if(p===null)return null;a=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var eo=!1;if(h)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){eo=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{eo=!1}function hi(i,s,a,p,_,E,C,N,V){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Z){this.onError(Z)}}var pi=!1,to=null,wn=!1,Is=null,Uu={onError:function(i){pi=!0,to=i}};function no(i,s,a,p,_,E,C,N,V){pi=!1,to=null,hi.apply(Uu,arguments)}function kl(i,s,a,p,_,E,C,N,V){if(no.apply(this,arguments),pi){if(pi){var $=to;pi=!1,to=null}else throw Error(t(198));wn||(wn=!0,Is=$)}}function An(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function mi(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Rn(i){if(An(i)!==i)throw Error(t(188))}function Ml(i){var s=i.alternate;if(!s){if(s=An(i),s===null)throw Error(t(188));return s!==i?null:i}for(var a=i,p=s;;){var _=a.return;if(_===null)break;var E=_.alternate;if(E===null){if(p=_.return,p!==null){a=p;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===a)return Rn(_),i;if(E===p)return Rn(_),s;E=E.sibling}throw Error(t(188))}if(a.return!==p.return)a=_,p=E;else{for(var C=!1,N=_.child;N;){if(N===a){C=!0,a=_,p=E;break}if(N===p){C=!0,p=_,a=E;break}N=N.sibling}if(!C){for(N=E.child;N;){if(N===a){C=!0,a=E,p=_;break}if(N===p){C=!0,p=E,a=_;break}N=N.sibling}if(!C)throw Error(t(189))}}if(a.alternate!==p)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?i:s}function Ss(i){return i=Ml(i),i!==null?ro(i):null}function ro(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=ro(i);if(s!==null)return s;i=i.sibling}return null}var io=e.unstable_scheduleCallback,Cs=e.unstable_cancelCallback,Dl=e.unstable_shouldYield,Bu=e.unstable_requestPaint,Qe=e.unstable_now,Vl=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,Nr=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,ws=e.unstable_LowPriority,Ll=e.unstable_IdlePriority,yi=null,rn=null;function Fl(i){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(yi,i,void 0,(i.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:Bl,As=Math.log,Ul=Math.LN2;function Bl(i){return i>>>=0,i===0?32:31-(As(i)/Ul|0)|0}var oo=64,so=4194304;function kr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _i(i,s){var a=i.pendingLanes;if(a===0)return 0;var p=0,_=i.suspendedLanes,E=i.pingedLanes,C=a&268435455;if(C!==0){var N=C&~_;N!==0?p=kr(N):(E&=C,E!==0&&(p=kr(E)))}else C=a&~_,C!==0?p=kr(C):E!==0&&(p=kr(E));if(p===0)return 0;if(s!==0&&s!==p&&(s&_)===0&&(_=p&-p,E=s&-s,_>=E||_===16&&(E&4194240)!==0))return s;if((p&4)!==0&&(p|=a&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=p;0<s;)a=31-$t(s),_=1<<a,p|=i[a],s&=~_;return p}function qu(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(i,s){for(var a=i.suspendedLanes,p=i.pingedLanes,_=i.expirationTimes,E=i.pendingLanes;0<E;){var C=31-$t(E),N=1<<C,V=_[C];V===-1?((N&a)===0||(N&p)!==0)&&(_[C]=qu(N,s)):V<=s&&(i.expiredLanes|=N),E&=~N}}function on(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function vi(){var i=oo;return oo<<=1,(oo&4194240)===0&&(oo=64),i}function Mr(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function Dr(i,s,a){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-$t(s),i[s]=a}function We(i,s){var a=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<a;){var _=31-$t(a),E=1<<_;s[_]=0,p[_]=-1,i[_]=-1,a&=~E}}function Vr(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var p=31-$t(a),_=1<<p;_&s|i[p]&s&&(i[p]|=s),a&=~_}}var Ne=0;function Lr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ql,lo,Ol,bl,Gl,Rs=!1,$n=[],Pt=null,Pn=null,xn=null,Fr=new Map,hn=new Map,Wn=[],Ou="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hl(i,s){switch(i){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":Fr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(s.pointerId)}}function Qt(i,s,a,p,_,E){return i===null||i.nativeEvent!==E?(i={blockedOn:s,domEventName:a,eventSystemFlags:p,nativeEvent:E,targetContainers:[_]},s!==null&&(s=Gs(s),s!==null&&lo(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),i)}function bu(i,s,a,p,_){switch(s){case"focusin":return Pt=Qt(Pt,i,s,a,p,_),!0;case"dragenter":return Pn=Qt(Pn,i,s,a,p,_),!0;case"mouseover":return xn=Qt(xn,i,s,a,p,_),!0;case"pointerover":var E=_.pointerId;return Fr.set(E,Qt(Fr.get(E)||null,i,s,a,p,_)),!0;case"gotpointercapture":return E=_.pointerId,hn.set(E,Qt(hn.get(E)||null,i,s,a,p,_)),!0}return!1}function zl(i){var s=Ci(i.target);if(s!==null){var a=An(s);if(a!==null){if(s=a.tag,s===13){if(s=mi(a),s!==null){i.blockedOn=s,Gl(i.priority,function(){Ol(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cr(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=ao(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(a===null){a=i.nativeEvent;var p=new a.constructor(a.type,a);di=p,a.target.dispatchEvent(p),di=null}else return s=Gs(a),s!==null&&lo(s),i.blockedOn=a,!1;s.shift()}return!0}function Ei(i,s,a){cr(i)&&a.delete(s)}function $l(){Rs=!1,Pt!==null&&cr(Pt)&&(Pt=null),Pn!==null&&cr(Pn)&&(Pn=null),xn!==null&&cr(xn)&&(xn=null),Fr.forEach(Ei),hn.forEach(Ei)}function Nn(i,s){i.blockedOn===s&&(i.blockedOn=null,Rs||(Rs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function kn(i){function s(_){return Nn(_,i)}if(0<$n.length){Nn($n[0],i);for(var a=1;a<$n.length;a++){var p=$n[a];p.blockedOn===i&&(p.blockedOn=null)}}for(Pt!==null&&Nn(Pt,i),Pn!==null&&Nn(Pn,i),xn!==null&&Nn(xn,i),Fr.forEach(s),hn.forEach(s),a=0;a<Wn.length;a++)p=Wn[a],p.blockedOn===i&&(p.blockedOn=null);for(;0<Wn.length&&(a=Wn[0],a.blockedOn===null);)zl(a),a.blockedOn===null&&Wn.shift()}var dr=ie.ReactCurrentBatchConfig,Ur=!0;function et(i,s,a,p){var _=Ne,E=dr.transition;dr.transition=null;try{Ne=1,Ps(i,s,a,p)}finally{Ne=_,dr.transition=E}}function Gu(i,s,a,p){var _=Ne,E=dr.transition;dr.transition=null;try{Ne=4,Ps(i,s,a,p)}finally{Ne=_,dr.transition=E}}function Ps(i,s,a,p){if(Ur){var _=ao(i,s,a,p);if(_===null)ju(i,s,p,Ti,a),Hl(i,p);else if(bu(_,i,s,a,p))p.stopPropagation();else if(Hl(i,p),s&4&&-1<Ou.indexOf(i)){for(;_!==null;){var E=Gs(_);if(E!==null&&ql(E),E=ao(i,s,a,p),E===null&&ju(i,s,p,Ti,a),E===_)break;_=E}_!==null&&p.stopPropagation()}else ju(i,s,p,null,a)}}var Ti=null;function ao(i,s,a,p){if(Ti=null,i=Xi(p),i=Ci(i),i!==null)if(s=An(i),s===null)i=null;else if(a=s.tag,a===13){if(i=mi(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return Ti=i,null}function xs(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vl()){case gi:return 1;case Nr:return 4;case fn:case ws:return 16;case Ll:return 536870912;default:return 16}default:return 16}}var sn=null,uo=null,Yt=null;function Ns(){if(Yt)return Yt;var i,s=uo,a=s.length,p,_="value"in sn?sn.value:sn.textContent,E=_.length;for(i=0;i<a&&s[i]===_[i];i++);var C=a-i;for(p=1;p<=C&&s[a-p]===_[E-p];p++);return Yt=_.slice(i,1<p?1-p:void 0)}function co(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Kn(){return!0}function ks(){return!1}function xt(i){function s(a,p,_,E,C){this._reactName=a,this._targetInst=_,this.type=p,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(a=i[N],this[N]=a?a(E):E[N]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Kn:ks,this.isPropagationStopped=ks,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),s}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=xt(Mn),Jn=ce({},Mn,{view:0,detail:0}),Hu=xt(Jn),ho,fr,Br,Ii=ce({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qn,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Br&&(Br&&i.type==="mousemove"?(ho=i.screenX-Br.screenX,fr=i.screenY-Br.screenY):fr=ho=0,Br=i),ho)},movementY:function(i){return"movementY"in i?i.movementY:fr}}),po=xt(Ii),Ms=ce({},Ii,{dataTransfer:0}),Wl=xt(Ms),mo=ce({},Jn,{relatedTarget:0}),go=xt(mo),Kl=ce({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),hr=xt(Kl),Jl=ce({},Mn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ql=xt(Jl),Yl=ce({},Mn,{data:0}),Ds=xt(Yl),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Xl[i])?!!s[i]:!1}function Qn(){return Zl}var d=ce({},Jn,{key:function(i){if(i.key){var s=yo[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=co(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qn,charCode:function(i){return i.type==="keypress"?co(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?co(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=xt(d),S=ce({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=xt(S),G=ce({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qn}),W=xt(G),re=ce({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=xt(re),yt=ce({},Ii,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=xt(yt),St=[9,13,27,32],ct=h&&"CompositionEvent"in window,pn=null;h&&"documentMode"in document&&(pn=document.documentMode);var ln=h&&"TextEvent"in window&&!pn,Si=h&&(!ct||pn&&8<pn&&11>=pn),_o=" ",zf=!1;function $f(i,s){switch(i){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var vo=!1;function Lv(i,s){switch(i){case"compositionend":return Wf(s);case"keypress":return s.which!==32?null:(zf=!0,_o);case"textInput":return i=s.data,i===_o&&zf?null:i;default:return null}}function Fv(i,s){if(vo)return i==="compositionend"||!ct&&$f(i,s)?(i=Ns(),Yt=uo=sn=null,vo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Si&&s.locale!=="ko"?null:s.data;default:return null}}var Uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Uv[i.type]:s==="textarea"}function Jf(i,s,a,p){zn(p),s=ra(s,"onChange"),0<s.length&&(a=new fo("onChange","change",null,a,p),i.push({event:a,listeners:s}))}var Vs=null,Ls=null;function Bv(i){fh(i,0)}function jl(i){var s=Co(i);if(Wi(s))return i}function qv(i,s){if(i==="change")return s}var Qf=!1;if(h){var zu;if(h){var $u="oninput"in document;if(!$u){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),$u=typeof Yf.oninput=="function"}zu=$u}else zu=!1;Qf=zu&&(!document.documentMode||9<document.documentMode)}function Xf(){Vs&&(Vs.detachEvent("onpropertychange",Zf),Ls=Vs=null)}function Zf(i){if(i.propertyName==="value"&&jl(Ls)){var s=[];Jf(s,Ls,i,Xi(i)),Ts(Bv,s)}}function Ov(i,s,a){i==="focusin"?(Xf(),Vs=s,Ls=a,Vs.attachEvent("onpropertychange",Zf)):i==="focusout"&&Xf()}function bv(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jl(Ls)}function Gv(i,s){if(i==="click")return jl(s)}function Hv(i,s){if(i==="input"||i==="change")return jl(s)}function zv(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Dn=typeof Object.is=="function"?Object.is:zv;function Fs(i,s){if(Dn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),p=Object.keys(s);if(a.length!==p.length)return!1;for(p=0;p<a.length;p++){var _=a[p];if(!m.call(s,_)||!Dn(i[_],s[_]))return!1}return!0}function jf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function eh(i,s){var a=jf(i);i=0;for(var p;a;){if(a.nodeType===3){if(p=i+a.textContent.length,i<=s&&p>=s)return{node:a,offset:s-i};i=p}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jf(a)}}function th(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?th(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nh(){for(var i=window,s=Pr();s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Pr(i.document)}return s}function Wu(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function $v(i){var s=nh(),a=i.focusedElem,p=i.selectionRange;if(s!==a&&a&&a.ownerDocument&&th(a.ownerDocument.documentElement,a)){if(p!==null&&Wu(a)){if(s=p.start,i=p.end,i===void 0&&(i=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(i,a.value.length);else if(i=(s=a.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var _=a.textContent.length,E=Math.min(p.start,_);p=p.end===void 0?E:Math.min(p.end,_),!i.extend&&E>p&&(_=p,p=E,E=_),_=eh(a,E);var C=eh(a,p);_&&C&&(i.rangeCount!==1||i.anchorNode!==_.node||i.anchorOffset!==_.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(_.node,_.offset),i.removeAllRanges(),E>p?(i.addRange(s),i.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),i.addRange(s)))}}for(s=[],i=a;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)i=s[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Wv=h&&"documentMode"in document&&11>=document.documentMode,Eo=null,Ku=null,Us=null,Ju=!1;function rh(i,s,a){var p=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ju||Eo==null||Eo!==Pr(p)||(p=Eo,"selectionStart"in p&&Wu(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Us&&Fs(Us,p)||(Us=p,p=ra(Ku,"onSelect"),0<p.length&&(s=new fo("onSelect","select",null,s,a),i.push({event:s,listeners:p}),s.target=Eo)))}function ea(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var To={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Qu={},ih={};h&&(ih=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function ta(i){if(Qu[i])return Qu[i];if(!To[i])return i;var s=To[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in ih)return Qu[i]=s[a];return i}var oh=ta("animationend"),sh=ta("animationiteration"),lh=ta("animationstart"),ah=ta("transitionend"),uh=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(i,s){uh.set(i,s),l(s,[i])}for(var Yu=0;Yu<ch.length;Yu++){var Xu=ch[Yu],Kv=Xu.toLowerCase(),Jv=Xu[0].toUpperCase()+Xu.slice(1);qr(Kv,"on"+Jv)}qr(oh,"onAnimationEnd"),qr(sh,"onAnimationIteration"),qr(lh,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(ah,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function dh(i,s,a){var p=i.type||"unknown-event";i.currentTarget=a,kl(p,s,void 0,i),i.currentTarget=null}function fh(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var p=i[a],_=p.event;p=p.listeners;e:{var E=void 0;if(s)for(var C=p.length-1;0<=C;C--){var N=p[C],V=N.instance,$=N.currentTarget;if(N=N.listener,V!==E&&_.isPropagationStopped())break e;dh(_,N,$),E=V}else for(C=0;C<p.length;C++){if(N=p[C],V=N.instance,$=N.currentTarget,N=N.listener,V!==E&&_.isPropagationStopped())break e;dh(_,N,$),E=V}}}if(wn)throw i=Is,wn=!1,Is=null,i}function Xe(i,s){var a=s[oc];a===void 0&&(a=s[oc]=new Set);var p=i+"__bubble";a.has(p)||(hh(s,i,2,!1),a.add(p))}function Zu(i,s,a){var p=0;s&&(p|=4),hh(a,i,p,s)}var na="_reactListening"+Math.random().toString(36).slice(2);function qs(i){if(!i[na]){i[na]=!0,r.forEach(function(a){a!=="selectionchange"&&(Qv.has(a)||Zu(a,!1,i),Zu(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[na]||(s[na]=!0,Zu("selectionchange",!1,s))}}function hh(i,s,a,p){switch(xs(s)){case 1:var _=et;break;case 4:_=Gu;break;default:_=Ps}a=_.bind(null,s,a,i),_=void 0,!eo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),p?_!==void 0?i.addEventListener(s,a,{capture:!0,passive:_}):i.addEventListener(s,a,!0):_!==void 0?i.addEventListener(s,a,{passive:_}):i.addEventListener(s,a,!1)}function ju(i,s,a,p,_){var E=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var N=p.stateNode.containerInfo;if(N===_||N.nodeType===8&&N.parentNode===_)break;if(C===4)for(C=p.return;C!==null;){var V=C.tag;if((V===3||V===4)&&(V=C.stateNode.containerInfo,V===_||V.nodeType===8&&V.parentNode===_))return;C=C.return}for(;N!==null;){if(C=Ci(N),C===null)return;if(V=C.tag,V===5||V===6){p=E=C;continue e}N=N.parentNode}}p=p.return}Ts(function(){var $=E,Z=Xi(a),te=[];e:{var Y=uh.get(i);if(Y!==void 0){var ue=fo,fe=i;switch(i){case"keypress":if(co(a)===0)break e;case"keydown":case"keyup":ue=v;break;case"focusin":fe="focus",ue=go;break;case"focusout":fe="blur",ue=go;break;case"beforeblur":case"afterblur":ue=go;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=W;break;case oh:case sh:case lh:ue=hr;break;case ah:ue=He;break;case"scroll":ue=Hu;break;case"wheel":ue=Me;break;case"copy":case"cut":case"paste":ue=Ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=w}var he=(s&4)!==0,at=!he&&i==="scroll",H=he?Y!==null?Y+"Capture":null:Y;he=[];for(var F=$,z;F!==null;){z=F;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,H!==null&&(ne=lt(F,H),ne!=null&&he.push(Os(F,ne,z)))),at)break;F=F.return}0<he.length&&(Y=new ue(Y,fe,null,a,Z),te.push({event:Y,listeners:he}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",Y&&a!==di&&(fe=a.relatedTarget||a.fromElement)&&(Ci(fe)||fe[pr]))break e;if((ue||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,ue?(fe=a.relatedTarget||a.toElement,ue=$,fe=fe?Ci(fe):null,fe!==null&&(at=An(fe),fe!==at||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=$),ue!==fe)){if(he=po,ne="onMouseLeave",H="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(he=w,ne="onPointerLeave",H="onPointerEnter",F="pointer"),at=ue==null?Y:Co(ue),z=fe==null?Y:Co(fe),Y=new he(ne,F+"leave",ue,a,Z),Y.target=at,Y.relatedTarget=z,ne=null,Ci(Z)===$&&(he=new he(H,F+"enter",fe,a,Z),he.target=z,he.relatedTarget=at,ne=he),at=ne,ue&&fe)t:{for(he=ue,H=fe,F=0,z=he;z;z=Io(z))F++;for(z=0,ne=H;ne;ne=Io(ne))z++;for(;0<F-z;)he=Io(he),F--;for(;0<z-F;)H=Io(H),z--;for(;F--;){if(he===H||H!==null&&he===H.alternate)break t;he=Io(he),H=Io(H)}he=null}else he=null;ue!==null&&ph(te,Y,ue,he,!1),fe!==null&&at!==null&&ph(te,at,fe,he,!0)}}e:{if(Y=$?Co($):window,ue=Y.nodeName&&Y.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Y.type==="file")var me=qv;else if(Kf(Y))if(Qf)me=Hv;else{me=bv;var ve=Ov}else(ue=Y.nodeName)&&ue.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(me=Gv);if(me&&(me=me(i,$))){Jf(te,me,a,Z);break e}ve&&ve(i,Y,$),i==="focusout"&&(ve=Y._wrapperState)&&ve.controlled&&Y.type==="number"&&Ji(Y,"number",Y.value)}switch(ve=$?Co($):window,i){case"focusin":(Kf(ve)||ve.contentEditable==="true")&&(Eo=ve,Ku=$,Us=null);break;case"focusout":Us=Ku=Eo=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,rh(te,a,Z);break;case"selectionchange":if(Wv)break;case"keydown":case"keyup":rh(te,a,Z)}var Ee;if(ct)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else vo?$f(i,a)&&(Ie="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Si&&a.locale!=="ko"&&(vo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&vo&&(Ee=Ns()):(sn=Z,uo="value"in sn?sn.value:sn.textContent,vo=!0)),ve=ra($,Ie),0<ve.length&&(Ie=new Ds(Ie,i,null,a,Z),te.push({event:Ie,listeners:ve}),Ee?Ie.data=Ee:(Ee=Wf(a),Ee!==null&&(Ie.data=Ee)))),(Ee=ln?Lv(i,a):Fv(i,a))&&($=ra($,"onBeforeInput"),0<$.length&&(Z=new Ds("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:$}),Z.data=Ee))}fh(te,s)})}function Os(i,s,a){return{instance:i,listener:s,currentTarget:a}}function ra(i,s){for(var a=s+"Capture",p=[];i!==null;){var _=i,E=_.stateNode;_.tag===5&&E!==null&&(_=E,E=lt(i,a),E!=null&&p.unshift(Os(i,E,_)),E=lt(i,s),E!=null&&p.push(Os(i,E,_))),i=i.return}return p}function Io(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ph(i,s,a,p,_){for(var E=s._reactName,C=[];a!==null&&a!==p;){var N=a,V=N.alternate,$=N.stateNode;if(V!==null&&V===p)break;N.tag===5&&$!==null&&(N=$,_?(V=lt(a,E),V!=null&&C.unshift(Os(a,V,N))):_||(V=lt(a,E),V!=null&&C.push(Os(a,V,N)))),a=a.return}C.length!==0&&i.push({event:s,listeners:C})}var Yv=/\r\n?/g,Xv=/\u0000|\uFFFD/g;function mh(i){return(typeof i=="string"?i:""+i).replace(Yv,`
`).replace(Xv,"")}function ia(i,s,a){if(s=mh(s),mh(i)!==s&&a)throw Error(t(425))}function oa(){}var ec=null,tc=null;function nc(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,Zv=typeof clearTimeout=="function"?clearTimeout:void 0,gh=typeof Promise=="function"?Promise:void 0,jv=typeof queueMicrotask=="function"?queueMicrotask:typeof gh<"u"?function(i){return gh.resolve(null).then(i).catch(eE)}:rc;function eE(i){setTimeout(function(){throw i})}function ic(i,s){var a=s,p=0;do{var _=a.nextSibling;if(i.removeChild(a),_&&_.nodeType===8)if(a=_.data,a==="/$"){if(p===0){i.removeChild(_),kn(s);return}p--}else a!=="$"&&a!=="$?"&&a!=="$!"||p++;a=_}while(a);kn(s)}function Or(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function yh(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}var So=Math.random().toString(36).slice(2),Yn="__reactFiber$"+So,bs="__reactProps$"+So,pr="__reactContainer$"+So,oc="__reactEvents$"+So,tE="__reactListeners$"+So,nE="__reactHandles$"+So;function Ci(i){var s=i[Yn];if(s)return s;for(var a=i.parentNode;a;){if(s=a[pr]||a[Yn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=yh(i);i!==null;){if(a=i[Yn])return a;i=yh(i)}return s}i=a,a=i.parentNode}return null}function Gs(i){return i=i[Yn]||i[pr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Co(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function sa(i){return i[bs]||null}var sc=[],wo=-1;function br(i){return{current:i}}function Ze(i){0>wo||(i.current=sc[wo],sc[wo]=null,wo--)}function Ye(i,s){wo++,sc[wo]=i.current,i.current=s}var Gr={},Ut=br(Gr),Xt=br(!1),wi=Gr;function Ao(i,s){var a=i.type.contextTypes;if(!a)return Gr;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var _={},E;for(E in a)_[E]=s[E];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=_),_}function Zt(i){return i=i.childContextTypes,i!=null}function la(){Ze(Xt),Ze(Ut)}function _h(i,s,a){if(Ut.current!==Gr)throw Error(t(168));Ye(Ut,s),Ye(Xt,a)}function vh(i,s,a){var p=i.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return a;p=p.getChildContext();for(var _ in p)if(!(_ in s))throw Error(t(108,be(i)||"Unknown",_));return ce({},a,p)}function aa(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Gr,wi=Ut.current,Ye(Ut,i),Ye(Xt,Xt.current),!0}function Eh(i,s,a){var p=i.stateNode;if(!p)throw Error(t(169));a?(i=vh(i,s,wi),p.__reactInternalMemoizedMergedChildContext=i,Ze(Xt),Ze(Ut),Ye(Ut,i)):Ze(Xt),Ye(Xt,a)}var mr=null,ua=!1,lc=!1;function Th(i){mr===null?mr=[i]:mr.push(i)}function rE(i){ua=!0,Th(i)}function Hr(){if(!lc&&mr!==null){lc=!0;var i=0,s=Ne;try{var a=mr;for(Ne=1;i<a.length;i++){var p=a[i];do p=p(!0);while(p!==null)}mr=null,ua=!1}catch(_){throw mr!==null&&(mr=mr.slice(i+1)),io(gi,Hr),_}finally{Ne=s,lc=!1}}return null}var Ro=[],Po=0,ca=null,da=0,mn=[],gn=0,Ai=null,gr=1,yr="";function Ri(i,s){Ro[Po++]=da,Ro[Po++]=ca,ca=i,da=s}function Ih(i,s,a){mn[gn++]=gr,mn[gn++]=yr,mn[gn++]=Ai,Ai=i;var p=gr;i=yr;var _=32-$t(p)-1;p&=~(1<<_),a+=1;var E=32-$t(s)+_;if(30<E){var C=_-_%5;E=(p&(1<<C)-1).toString(32),p>>=C,_-=C,gr=1<<32-$t(s)+_|a<<_|p,yr=E+i}else gr=1<<E|a<<_|p,yr=i}function ac(i){i.return!==null&&(Ri(i,1),Ih(i,1,0))}function uc(i){for(;i===ca;)ca=Ro[--Po],Ro[Po]=null,da=Ro[--Po],Ro[Po]=null;for(;i===Ai;)Ai=mn[--gn],mn[gn]=null,yr=mn[--gn],mn[gn]=null,gr=mn[--gn],mn[gn]=null}var an=null,un=null,tt=!1,Vn=null;function Sh(i,s){var a=En(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=i,s=i.deletions,s===null?(i.deletions=[a],i.flags|=16):s.push(a)}function Ch(i,s){switch(i.tag){case 5:var a=i.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,an=i,un=Or(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,an=i,un=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ai!==null?{id:gr,overflow:yr}:null,i.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=En(18,null,null,0),a.stateNode=s,a.return=i,i.child=a,an=i,un=null,!0):!1;default:return!1}}function cc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function dc(i){if(tt){var s=un;if(s){var a=s;if(!Ch(i,s)){if(cc(i))throw Error(t(418));s=Or(a.nextSibling);var p=an;s&&Ch(i,s)?Sh(p,a):(i.flags=i.flags&-4097|2,tt=!1,an=i)}}else{if(cc(i))throw Error(t(418));i.flags=i.flags&-4097|2,tt=!1,an=i}}}function wh(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;an=i}function fa(i){if(i!==an)return!1;if(!tt)return wh(i),tt=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!nc(i.type,i.memoizedProps)),s&&(s=un)){if(cc(i))throw Ah(),Error(t(418));for(;s;)Sh(i,s),s=Or(s.nextSibling)}if(wh(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"){if(s===0){un=Or(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}i=i.nextSibling}un=null}}else un=an?Or(i.stateNode.nextSibling):null;return!0}function Ah(){for(var i=un;i;)i=Or(i.nextSibling)}function xo(){un=an=null,tt=!1}function fc(i){Vn===null?Vn=[i]:Vn.push(i)}var iE=ie.ReactCurrentBatchConfig;function Hs(i,s,a){if(i=a.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var p=a.stateNode}if(!p)throw Error(t(147,i));var _=p,E=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===E?s.ref:(s=function(C){var N=_.refs;C===null?delete N[E]:N[E]=C},s._stringRef=E,s)}if(typeof i!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,i))}return i}function ha(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Rh(i){var s=i._init;return s(i._payload)}function Ph(i){function s(H,F){if(i){var z=H.deletions;z===null?(H.deletions=[F],H.flags|=16):z.push(F)}}function a(H,F){if(!i)return null;for(;F!==null;)s(H,F),F=F.sibling;return null}function p(H,F){for(H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function _(H,F){return H=Xr(H,F),H.index=0,H.sibling=null,H}function E(H,F,z){return H.index=z,i?(z=H.alternate,z!==null?(z=z.index,z<F?(H.flags|=2,F):z):(H.flags|=2,F)):(H.flags|=1048576,F)}function C(H){return i&&H.alternate===null&&(H.flags|=2),H}function N(H,F,z,ne){return F===null||F.tag!==6?(F=rd(z,H.mode,ne),F.return=H,F):(F=_(F,z),F.return=H,F)}function V(H,F,z,ne){var me=z.type;return me===M?Z(H,F,z.props.children,ne,z.key):F!==null&&(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ke&&Rh(me)===F.type)?(ne=_(F,z.props),ne.ref=Hs(H,F,z),ne.return=H,ne):(ne=Ua(z.type,z.key,z.props,null,H.mode,ne),ne.ref=Hs(H,F,z),ne.return=H,ne)}function $(H,F,z,ne){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=id(z,H.mode,ne),F.return=H,F):(F=_(F,z.children||[]),F.return=H,F)}function Z(H,F,z,ne,me){return F===null||F.tag!==7?(F=Li(z,H.mode,ne,me),F.return=H,F):(F=_(F,z),F.return=H,F)}function te(H,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=rd(""+F,H.mode,z),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case se:return z=Ua(F.type,F.key,F.props,null,H.mode,z),z.ref=Hs(H,null,F),z.return=H,z;case le:return F=id(F,H.mode,z),F.return=H,F;case Ke:var ne=F._init;return te(H,ne(F._payload),z)}if(or(F)||_e(F))return F=Li(F,H.mode,z,null),F.return=H,F;ha(H,F)}return null}function Y(H,F,z,ne){var me=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:N(H,F,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case se:return z.key===me?V(H,F,z,ne):null;case le:return z.key===me?$(H,F,z,ne):null;case Ke:return me=z._init,Y(H,F,me(z._payload),ne)}if(or(z)||_e(z))return me!==null?null:Z(H,F,z,ne,null);ha(H,z)}return null}function ue(H,F,z,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return H=H.get(z)||null,N(F,H,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case se:return H=H.get(ne.key===null?z:ne.key)||null,V(F,H,ne,me);case le:return H=H.get(ne.key===null?z:ne.key)||null,$(F,H,ne,me);case Ke:var ve=ne._init;return ue(H,F,z,ve(ne._payload),me)}if(or(ne)||_e(ne))return H=H.get(z)||null,Z(F,H,ne,me,null);ha(F,ne)}return null}function fe(H,F,z,ne){for(var me=null,ve=null,Ee=F,Ie=F=0,At=null;Ee!==null&&Ie<z.length;Ie++){Ee.index>Ie?(At=Ee,Ee=null):At=Ee.sibling;var Be=Y(H,Ee,z[Ie],ne);if(Be===null){Ee===null&&(Ee=At);break}i&&Ee&&Be.alternate===null&&s(H,Ee),F=E(Be,F,Ie),ve===null?me=Be:ve.sibling=Be,ve=Be,Ee=At}if(Ie===z.length)return a(H,Ee),tt&&Ri(H,Ie),me;if(Ee===null){for(;Ie<z.length;Ie++)Ee=te(H,z[Ie],ne),Ee!==null&&(F=E(Ee,F,Ie),ve===null?me=Ee:ve.sibling=Ee,ve=Ee);return tt&&Ri(H,Ie),me}for(Ee=p(H,Ee);Ie<z.length;Ie++)At=ue(Ee,H,Ie,z[Ie],ne),At!==null&&(i&&At.alternate!==null&&Ee.delete(At.key===null?Ie:At.key),F=E(At,F,Ie),ve===null?me=At:ve.sibling=At,ve=At);return i&&Ee.forEach(function(Zr){return s(H,Zr)}),tt&&Ri(H,Ie),me}function he(H,F,z,ne){var me=_e(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var ve=me=null,Ee=F,Ie=F=0,At=null,Be=z.next();Ee!==null&&!Be.done;Ie++,Be=z.next()){Ee.index>Ie?(At=Ee,Ee=null):At=Ee.sibling;var Zr=Y(H,Ee,Be.value,ne);if(Zr===null){Ee===null&&(Ee=At);break}i&&Ee&&Zr.alternate===null&&s(H,Ee),F=E(Zr,F,Ie),ve===null?me=Zr:ve.sibling=Zr,ve=Zr,Ee=At}if(Be.done)return a(H,Ee),tt&&Ri(H,Ie),me;if(Ee===null){for(;!Be.done;Ie++,Be=z.next())Be=te(H,Be.value,ne),Be!==null&&(F=E(Be,F,Ie),ve===null?me=Be:ve.sibling=Be,ve=Be);return tt&&Ri(H,Ie),me}for(Ee=p(H,Ee);!Be.done;Ie++,Be=z.next())Be=ue(Ee,H,Ie,Be.value,ne),Be!==null&&(i&&Be.alternate!==null&&Ee.delete(Be.key===null?Ie:Be.key),F=E(Be,F,Ie),ve===null?me=Be:ve.sibling=Be,ve=Be);return i&&Ee.forEach(function(UE){return s(H,UE)}),tt&&Ri(H,Ie),me}function at(H,F,z,ne){if(typeof z=="object"&&z!==null&&z.type===M&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case se:e:{for(var me=z.key,ve=F;ve!==null;){if(ve.key===me){if(me=z.type,me===M){if(ve.tag===7){a(H,ve.sibling),F=_(ve,z.props.children),F.return=H,H=F;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ke&&Rh(me)===ve.type){a(H,ve.sibling),F=_(ve,z.props),F.ref=Hs(H,ve,z),F.return=H,H=F;break e}a(H,ve);break}else s(H,ve);ve=ve.sibling}z.type===M?(F=Li(z.props.children,H.mode,ne,z.key),F.return=H,H=F):(ne=Ua(z.type,z.key,z.props,null,H.mode,ne),ne.ref=Hs(H,F,z),ne.return=H,H=ne)}return C(H);case le:e:{for(ve=z.key;F!==null;){if(F.key===ve)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){a(H,F.sibling),F=_(F,z.children||[]),F.return=H,H=F;break e}else{a(H,F);break}else s(H,F);F=F.sibling}F=id(z,H.mode,ne),F.return=H,H=F}return C(H);case Ke:return ve=z._init,at(H,F,ve(z._payload),ne)}if(or(z))return fe(H,F,z,ne);if(_e(z))return he(H,F,z,ne);ha(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(a(H,F.sibling),F=_(F,z),F.return=H,H=F):(a(H,F),F=rd(z,H.mode,ne),F.return=H,H=F),C(H)):a(H,F)}return at}var No=Ph(!0),xh=Ph(!1),pa=br(null),ma=null,ko=null,hc=null;function pc(){hc=ko=ma=null}function mc(i){var s=pa.current;Ze(pa),i._currentValue=s}function gc(i,s,a){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===a)break;i=i.return}}function Mo(i,s){ma=i,hc=ko=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(jt=!0),i.firstContext=null)}function yn(i){var s=i._currentValue;if(hc!==i)if(i={context:i,memoizedValue:s,next:null},ko===null){if(ma===null)throw Error(t(308));ko=i,ma.dependencies={lanes:0,firstContext:i}}else ko=ko.next=i;return s}var Pi=null;function yc(i){Pi===null?Pi=[i]:Pi.push(i)}function Nh(i,s,a,p){var _=s.interleaved;return _===null?(a.next=a,yc(s)):(a.next=_.next,_.next=a),s.interleaved=a,_r(i,p)}function _r(i,s){i.lanes|=s;var a=i.alternate;for(a!==null&&(a.lanes|=s),a=i,i=i.return;i!==null;)i.childLanes|=s,a=i.alternate,a!==null&&(a.childLanes|=s),a=i,i=i.return;return a.tag===3?a.stateNode:null}var zr=!1;function _c(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function $r(i,s,a){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Ve&2)!==0){var _=p.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),p.pending=s,_r(i,a)}return _=p.interleaved,_===null?(s.next=s,yc(p)):(s.next=_.next,_.next=s),p.interleaved=s,_r(i,a)}function ga(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var p=s.lanes;p&=i.pendingLanes,a|=p,s.lanes=a,Vr(i,a)}}function Mh(i,s){var a=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,a===p)){var _=null,E=null;if(a=a.firstBaseUpdate,a!==null){do{var C={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};E===null?_=E=C:E=E.next=C,a=a.next}while(a!==null);E===null?_=E=s:E=E.next=s}else _=E=s;a={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:p.shared,effects:p.effects},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}function ya(i,s,a,p){var _=i.updateQueue;zr=!1;var E=_.firstBaseUpdate,C=_.lastBaseUpdate,N=_.shared.pending;if(N!==null){_.shared.pending=null;var V=N,$=V.next;V.next=null,C===null?E=$:C.next=$,C=V;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,N=Z.lastBaseUpdate,N!==C&&(N===null?Z.firstBaseUpdate=$:N.next=$,Z.lastBaseUpdate=V))}if(E!==null){var te=_.baseState;C=0,Z=$=V=null,N=E;do{var Y=N.lane,ue=N.eventTime;if((p&Y)===Y){Z!==null&&(Z=Z.next={eventTime:ue,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var fe=i,he=N;switch(Y=s,ue=a,he.tag){case 1:if(fe=he.payload,typeof fe=="function"){te=fe.call(ue,te,Y);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=he.payload,Y=typeof fe=="function"?fe.call(ue,te,Y):fe,Y==null)break e;te=ce({},te,Y);break e;case 2:zr=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,Y=_.effects,Y===null?_.effects=[N]:Y.push(N))}else ue={eventTime:ue,lane:Y,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Z===null?($=Z=ue,V=te):Z=Z.next=ue,C|=Y;if(N=N.next,N===null){if(N=_.shared.pending,N===null)break;Y=N,N=Y.next,Y.next=null,_.lastBaseUpdate=Y,_.shared.pending=null}}while(!0);if(Z===null&&(V=te),_.baseState=V,_.firstBaseUpdate=$,_.lastBaseUpdate=Z,s=_.shared.interleaved,s!==null){_=s;do C|=_.lane,_=_.next;while(_!==s)}else E===null&&(_.shared.lanes=0);ki|=C,i.lanes=C,i.memoizedState=te}}function Dh(i,s,a){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var p=i[s],_=p.callback;if(_!==null){if(p.callback=null,p=a,typeof _!="function")throw Error(t(191,_));_.call(p)}}}var zs={},Xn=br(zs),$s=br(zs),Ws=br(zs);function xi(i){if(i===zs)throw Error(t(174));return i}function vc(i,s){switch(Ye(Ws,s),Ye($s,i),Ye(Xn,zs),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:gt(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=gt(s,i)}Ze(Xn),Ye(Xn,s)}function Do(){Ze(Xn),Ze($s),Ze(Ws)}function Vh(i){xi(Ws.current);var s=xi(Xn.current),a=gt(s,i.type);s!==a&&(Ye($s,i),Ye(Xn,a))}function Ec(i){$s.current===i&&(Ze(Xn),Ze($s))}var rt=br(0);function _a(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tc=[];function Ic(){for(var i=0;i<Tc.length;i++)Tc[i]._workInProgressVersionPrimary=null;Tc.length=0}var va=ie.ReactCurrentDispatcher,Sc=ie.ReactCurrentBatchConfig,Ni=0,it=null,_t=null,Ct=null,Ea=!1,Ks=!1,Js=0,oE=0;function Bt(){throw Error(t(321))}function Cc(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Dn(i[a],s[a]))return!1;return!0}function wc(i,s,a,p,_,E){if(Ni=E,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,va.current=i===null||i.memoizedState===null?uE:cE,i=a(p,_),Ks){E=0;do{if(Ks=!1,Js=0,25<=E)throw Error(t(301));E+=1,Ct=_t=null,s.updateQueue=null,va.current=dE,i=a(p,_)}while(Ks)}if(va.current=Sa,s=_t!==null&&_t.next!==null,Ni=0,Ct=_t=it=null,Ea=!1,s)throw Error(t(300));return i}function Ac(){var i=Js!==0;return Js=0,i}function Zn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=i:Ct=Ct.next=i,Ct}function _n(){if(_t===null){var i=it.alternate;i=i!==null?i.memoizedState:null}else i=_t.next;var s=Ct===null?it.memoizedState:Ct.next;if(s!==null)Ct=s,_t=i;else{if(i===null)throw Error(t(310));_t=i,i={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Ct===null?it.memoizedState=Ct=i:Ct=Ct.next=i}return Ct}function Qs(i,s){return typeof s=="function"?s(i):s}function Rc(i){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=i;var p=_t,_=p.baseQueue,E=a.pending;if(E!==null){if(_!==null){var C=_.next;_.next=E.next,E.next=C}p.baseQueue=_=E,a.pending=null}if(_!==null){E=_.next,p=p.baseState;var N=C=null,V=null,$=E;do{var Z=$.lane;if((Ni&Z)===Z)V!==null&&(V=V.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),p=$.hasEagerState?$.eagerState:i(p,$.action);else{var te={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};V===null?(N=V=te,C=p):V=V.next=te,it.lanes|=Z,ki|=Z}$=$.next}while($!==null&&$!==E);V===null?C=p:V.next=N,Dn(p,s.memoizedState)||(jt=!0),s.memoizedState=p,s.baseState=C,s.baseQueue=V,a.lastRenderedState=p}if(i=a.interleaved,i!==null){_=i;do E=_.lane,it.lanes|=E,ki|=E,_=_.next;while(_!==i)}else _===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Pc(i){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=i;var p=a.dispatch,_=a.pending,E=s.memoizedState;if(_!==null){a.pending=null;var C=_=_.next;do E=i(E,C.action),C=C.next;while(C!==_);Dn(E,s.memoizedState)||(jt=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),a.lastRenderedState=E}return[E,p]}function Lh(){}function Fh(i,s){var a=it,p=_n(),_=s(),E=!Dn(p.memoizedState,_);if(E&&(p.memoizedState=_,jt=!0),p=p.queue,xc(qh.bind(null,a,p,i),[i]),p.getSnapshot!==s||E||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,Ys(9,Bh.bind(null,a,p,_,s),void 0,null),wt===null)throw Error(t(349));(Ni&30)!==0||Uh(a,s,_)}return _}function Uh(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function Bh(i,s,a,p){s.value=a,s.getSnapshot=p,Oh(s)&&bh(i)}function qh(i,s,a){return a(function(){Oh(s)&&bh(i)})}function Oh(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Dn(i,a)}catch{return!0}}function bh(i){var s=_r(i,1);s!==null&&Bn(s,i,1,-1)}function Gh(i){var s=Zn();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:i},s.queue=i,i=i.dispatch=aE.bind(null,it,i),[s.memoizedState,i]}function Ys(i,s,a,p){return i={tag:i,create:s,destroy:a,deps:p,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=i.next=i):(a=s.lastEffect,a===null?s.lastEffect=i.next=i:(p=a.next,a.next=i,i.next=p,s.lastEffect=i)),i}function Hh(){return _n().memoizedState}function Ta(i,s,a,p){var _=Zn();it.flags|=i,_.memoizedState=Ys(1|s,a,void 0,p===void 0?null:p)}function Ia(i,s,a,p){var _=_n();p=p===void 0?null:p;var E=void 0;if(_t!==null){var C=_t.memoizedState;if(E=C.destroy,p!==null&&Cc(p,C.deps)){_.memoizedState=Ys(s,a,E,p);return}}it.flags|=i,_.memoizedState=Ys(1|s,a,E,p)}function zh(i,s){return Ta(8390656,8,i,s)}function xc(i,s){return Ia(2048,8,i,s)}function $h(i,s){return Ia(4,2,i,s)}function Wh(i,s){return Ia(4,4,i,s)}function Kh(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Jh(i,s,a){return a=a!=null?a.concat([i]):null,Ia(4,4,Kh.bind(null,s,i),a)}function Nc(){}function Qh(i,s){var a=_n();s=s===void 0?null:s;var p=a.memoizedState;return p!==null&&s!==null&&Cc(s,p[1])?p[0]:(a.memoizedState=[i,s],i)}function Yh(i,s){var a=_n();s=s===void 0?null:s;var p=a.memoizedState;return p!==null&&s!==null&&Cc(s,p[1])?p[0]:(i=i(),a.memoizedState=[i,s],i)}function Xh(i,s,a){return(Ni&21)===0?(i.baseState&&(i.baseState=!1,jt=!0),i.memoizedState=a):(Dn(a,s)||(a=vi(),it.lanes|=a,ki|=a,i.baseState=!0),s)}function sE(i,s){var a=Ne;Ne=a!==0&&4>a?a:4,i(!0);var p=Sc.transition;Sc.transition={};try{i(!1),s()}finally{Ne=a,Sc.transition=p}}function Zh(){return _n().memoizedState}function lE(i,s,a){var p=Qr(i);if(a={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null},jh(i))ep(s,a);else if(a=Nh(i,s,a,p),a!==null){var _=Jt();Bn(a,i,p,_),tp(a,s,p)}}function aE(i,s,a){var p=Qr(i),_={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null};if(jh(i))ep(s,_);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var C=s.lastRenderedState,N=E(C,a);if(_.hasEagerState=!0,_.eagerState=N,Dn(N,C)){var V=s.interleaved;V===null?(_.next=_,yc(s)):(_.next=V.next,V.next=_),s.interleaved=_;return}}catch{}finally{}a=Nh(i,s,_,p),a!==null&&(_=Jt(),Bn(a,i,p,_),tp(a,s,p))}}function jh(i){var s=i.alternate;return i===it||s!==null&&s===it}function ep(i,s){Ks=Ea=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function tp(i,s,a){if((a&4194240)!==0){var p=s.lanes;p&=i.pendingLanes,a|=p,s.lanes=a,Vr(i,a)}}var Sa={readContext:yn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},uE={readContext:yn,useCallback:function(i,s){return Zn().memoizedState=[i,s===void 0?null:s],i},useContext:yn,useEffect:zh,useImperativeHandle:function(i,s,a){return a=a!=null?a.concat([i]):null,Ta(4194308,4,Kh.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Ta(4194308,4,i,s)},useInsertionEffect:function(i,s){return Ta(4,2,i,s)},useMemo:function(i,s){var a=Zn();return s=s===void 0?null:s,i=i(),a.memoizedState=[i,s],i},useReducer:function(i,s,a){var p=Zn();return s=a!==void 0?a(s):s,p.memoizedState=p.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},p.queue=i,i=i.dispatch=lE.bind(null,it,i),[p.memoizedState,i]},useRef:function(i){var s=Zn();return i={current:i},s.memoizedState=i},useState:Gh,useDebugValue:Nc,useDeferredValue:function(i){return Zn().memoizedState=i},useTransition:function(){var i=Gh(!1),s=i[0];return i=sE.bind(null,i[1]),Zn().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,a){var p=it,_=Zn();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),wt===null)throw Error(t(349));(Ni&30)!==0||Uh(p,s,a)}_.memoizedState=a;var E={value:a,getSnapshot:s};return _.queue=E,zh(qh.bind(null,p,E,i),[i]),p.flags|=2048,Ys(9,Bh.bind(null,p,E,a,s),void 0,null),a},useId:function(){var i=Zn(),s=wt.identifierPrefix;if(tt){var a=yr,p=gr;a=(p&~(1<<32-$t(p)-1)).toString(32)+a,s=":"+s+"R"+a,a=Js++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=oE++,s=":"+s+"r"+a.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},cE={readContext:yn,useCallback:Qh,useContext:yn,useEffect:xc,useImperativeHandle:Jh,useInsertionEffect:$h,useLayoutEffect:Wh,useMemo:Yh,useReducer:Rc,useRef:Hh,useState:function(){return Rc(Qs)},useDebugValue:Nc,useDeferredValue:function(i){var s=_n();return Xh(s,_t.memoizedState,i)},useTransition:function(){var i=Rc(Qs)[0],s=_n().memoizedState;return[i,s]},useMutableSource:Lh,useSyncExternalStore:Fh,useId:Zh,unstable_isNewReconciler:!1},dE={readContext:yn,useCallback:Qh,useContext:yn,useEffect:xc,useImperativeHandle:Jh,useInsertionEffect:$h,useLayoutEffect:Wh,useMemo:Yh,useReducer:Pc,useRef:Hh,useState:function(){return Pc(Qs)},useDebugValue:Nc,useDeferredValue:function(i){var s=_n();return _t===null?s.memoizedState=i:Xh(s,_t.memoizedState,i)},useTransition:function(){var i=Pc(Qs)[0],s=_n().memoizedState;return[i,s]},useMutableSource:Lh,useSyncExternalStore:Fh,useId:Zh,unstable_isNewReconciler:!1};function Ln(i,s){if(i&&i.defaultProps){s=ce({},s),i=i.defaultProps;for(var a in i)s[a]===void 0&&(s[a]=i[a]);return s}return s}function kc(i,s,a,p){s=i.memoizedState,a=a(p,s),a=a==null?s:ce({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Ca={isMounted:function(i){return(i=i._reactInternals)?An(i)===i:!1},enqueueSetState:function(i,s,a){i=i._reactInternals;var p=Jt(),_=Qr(i),E=vr(p,_);E.payload=s,a!=null&&(E.callback=a),s=$r(i,E,_),s!==null&&(Bn(s,i,_,p),ga(s,i,_))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var p=Jt(),_=Qr(i),E=vr(p,_);E.tag=1,E.payload=s,a!=null&&(E.callback=a),s=$r(i,E,_),s!==null&&(Bn(s,i,_,p),ga(s,i,_))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Jt(),p=Qr(i),_=vr(a,p);_.tag=2,s!=null&&(_.callback=s),s=$r(i,_,p),s!==null&&(Bn(s,i,p,a),ga(s,i,p))}};function np(i,s,a,p,_,E,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,E,C):s.prototype&&s.prototype.isPureReactComponent?!Fs(a,p)||!Fs(_,E):!0}function rp(i,s,a){var p=!1,_=Gr,E=s.contextType;return typeof E=="object"&&E!==null?E=yn(E):(_=Zt(s)?wi:Ut.current,p=s.contextTypes,E=(p=p!=null)?Ao(i,_):Gr),s=new s(a,E),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ca,i.stateNode=s,s._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=_,i.__reactInternalMemoizedMaskedChildContext=E),s}function ip(i,s,a,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,p),s.state!==i&&Ca.enqueueReplaceState(s,s.state,null)}function Mc(i,s,a,p){var _=i.stateNode;_.props=a,_.state=i.memoizedState,_.refs={},_c(i);var E=s.contextType;typeof E=="object"&&E!==null?_.context=yn(E):(E=Zt(s)?wi:Ut.current,_.context=Ao(i,E)),_.state=i.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(kc(i,s,E,a),_.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(s=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),s!==_.state&&Ca.enqueueReplaceState(_,_.state,null),ya(i,a,_,p),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308)}function Vo(i,s){try{var a="",p=s;do a+=Re(p),p=p.return;while(p);var _=a}catch(E){_=`
Error generating stack: `+E.message+`
`+E.stack}return{value:i,source:s,stack:_,digest:null}}function Dc(i,s,a){return{value:i,source:null,stack:a??null,digest:s??null}}function Vc(i,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var fE=typeof WeakMap=="function"?WeakMap:Map;function op(i,s,a){a=vr(-1,a),a.tag=3,a.payload={element:null};var p=s.value;return a.callback=function(){ka||(ka=!0,Qc=p),Vc(i,s)},a}function sp(i,s,a){a=vr(-1,a),a.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var _=s.value;a.payload=function(){return p(_)},a.callback=function(){Vc(i,s)}}var E=i.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Vc(i,s),typeof p!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})}),a}function lp(i,s,a){var p=i.pingCache;if(p===null){p=i.pingCache=new fE;var _=new Set;p.set(s,_)}else _=p.get(s),_===void 0&&(_=new Set,p.set(s,_));_.has(a)||(_.add(a),i=AE.bind(null,i,s,a),s.then(i,i))}function ap(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function up(i,s,a,p,_){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=vr(-1,1),s.tag=2,$r(a,s,1))),a.lanes|=1),i):(i.flags|=65536,i.lanes=_,i)}var hE=ie.ReactCurrentOwner,jt=!1;function Kt(i,s,a,p){s.child=i===null?xh(s,null,a,p):No(s,i.child,a,p)}function cp(i,s,a,p,_){a=a.render;var E=s.ref;return Mo(s,_),p=wc(i,s,a,p,E,_),a=Ac(),i!==null&&!jt?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~_,Er(i,s,_)):(tt&&a&&ac(s),s.flags|=1,Kt(i,s,p,_),s.child)}function dp(i,s,a,p,_){if(i===null){var E=a.type;return typeof E=="function"&&!nd(E)&&E.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=E,fp(i,s,E,p,_)):(i=Ua(a.type,null,p,s,s.mode,_),i.ref=s.ref,i.return=s,s.child=i)}if(E=i.child,(i.lanes&_)===0){var C=E.memoizedProps;if(a=a.compare,a=a!==null?a:Fs,a(C,p)&&i.ref===s.ref)return Er(i,s,_)}return s.flags|=1,i=Xr(E,p),i.ref=s.ref,i.return=s,s.child=i}function fp(i,s,a,p,_){if(i!==null){var E=i.memoizedProps;if(Fs(E,p)&&i.ref===s.ref)if(jt=!1,s.pendingProps=p=E,(i.lanes&_)!==0)(i.flags&131072)!==0&&(jt=!0);else return s.lanes=i.lanes,Er(i,s,_)}return Lc(i,s,a,p,_)}function hp(i,s,a){var p=s.pendingProps,_=p.children,E=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Fo,cn),cn|=a;else{if((a&1073741824)===0)return i=E!==null?E.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Ye(Fo,cn),cn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=E!==null?E.baseLanes:a,Ye(Fo,cn),cn|=p}else E!==null?(p=E.baseLanes|a,s.memoizedState=null):p=a,Ye(Fo,cn),cn|=p;return Kt(i,s,_,a),s.child}function pp(i,s){var a=s.ref;(i===null&&a!==null||i!==null&&i.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Lc(i,s,a,p,_){var E=Zt(a)?wi:Ut.current;return E=Ao(s,E),Mo(s,_),a=wc(i,s,a,p,E,_),p=Ac(),i!==null&&!jt?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~_,Er(i,s,_)):(tt&&p&&ac(s),s.flags|=1,Kt(i,s,a,_),s.child)}function mp(i,s,a,p,_){if(Zt(a)){var E=!0;aa(s)}else E=!1;if(Mo(s,_),s.stateNode===null)Aa(i,s),rp(s,a,p),Mc(s,a,p,_),p=!0;else if(i===null){var C=s.stateNode,N=s.memoizedProps;C.props=N;var V=C.context,$=a.contextType;typeof $=="object"&&$!==null?$=yn($):($=Zt(a)?wi:Ut.current,$=Ao(s,$));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function";te||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==p||V!==$)&&ip(s,C,p,$),zr=!1;var Y=s.memoizedState;C.state=Y,ya(s,p,C,_),V=s.memoizedState,N!==p||Y!==V||Xt.current||zr?(typeof Z=="function"&&(kc(s,a,Z,p),V=s.memoizedState),(N=zr||np(s,a,N,p,Y,V,$))?(te||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=V),C.props=p,C.state=V,C.context=$,p=N):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{C=s.stateNode,kh(i,s),N=s.memoizedProps,$=s.type===s.elementType?N:Ln(s.type,N),C.props=$,te=s.pendingProps,Y=C.context,V=a.contextType,typeof V=="object"&&V!==null?V=yn(V):(V=Zt(a)?wi:Ut.current,V=Ao(s,V));var ue=a.getDerivedStateFromProps;(Z=typeof ue=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==te||Y!==V)&&ip(s,C,p,V),zr=!1,Y=s.memoizedState,C.state=Y,ya(s,p,C,_);var fe=s.memoizedState;N!==te||Y!==fe||Xt.current||zr?(typeof ue=="function"&&(kc(s,a,ue,p),fe=s.memoizedState),($=zr||np(s,a,$,p,Y,fe,V)||!1)?(Z||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,fe,V),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,fe,V)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||N===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=fe),C.props=p,C.state=fe,C.context=V,p=$):(typeof C.componentDidUpdate!="function"||N===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),p=!1)}return Fc(i,s,a,p,E,_)}function Fc(i,s,a,p,_,E){pp(i,s);var C=(s.flags&128)!==0;if(!p&&!C)return _&&Eh(s,a,!1),Er(i,s,E);p=s.stateNode,hE.current=s;var N=C&&typeof a.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,i!==null&&C?(s.child=No(s,i.child,null,E),s.child=No(s,null,N,E)):Kt(i,s,N,E),s.memoizedState=p.state,_&&Eh(s,a,!0),s.child}function gp(i){var s=i.stateNode;s.pendingContext?_h(i,s.pendingContext,s.pendingContext!==s.context):s.context&&_h(i,s.context,!1),vc(i,s.containerInfo)}function yp(i,s,a,p,_){return xo(),fc(_),s.flags|=256,Kt(i,s,a,p),s.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function Bc(i){return{baseLanes:i,cachePool:null,transitions:null}}function _p(i,s,a){var p=s.pendingProps,_=rt.current,E=!1,C=(s.flags&128)!==0,N;if((N=C)||(N=i!==null&&i.memoizedState===null?!1:(_&2)!==0),N?(E=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(_|=1),Ye(rt,_&1),i===null)return dc(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(C=p.children,i=p.fallback,E?(p=s.mode,E=s.child,C={mode:"hidden",children:C},(p&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=C):E=Ba(C,p,0,null),i=Li(i,p,a,null),E.return=s,i.return=s,E.sibling=i,s.child=E,s.child.memoizedState=Bc(a),s.memoizedState=Uc,i):qc(s,C));if(_=i.memoizedState,_!==null&&(N=_.dehydrated,N!==null))return pE(i,s,C,p,N,_,a);if(E){E=p.fallback,C=s.mode,_=i.child,N=_.sibling;var V={mode:"hidden",children:p.children};return(C&1)===0&&s.child!==_?(p=s.child,p.childLanes=0,p.pendingProps=V,s.deletions=null):(p=Xr(_,V),p.subtreeFlags=_.subtreeFlags&14680064),N!==null?E=Xr(N,E):(E=Li(E,C,a,null),E.flags|=2),E.return=s,p.return=s,p.sibling=E,s.child=p,p=E,E=s.child,C=i.child.memoizedState,C=C===null?Bc(a):{baseLanes:C.baseLanes|a,cachePool:null,transitions:C.transitions},E.memoizedState=C,E.childLanes=i.childLanes&~a,s.memoizedState=Uc,p}return E=i.child,i=E.sibling,p=Xr(E,{mode:"visible",children:p.children}),(s.mode&1)===0&&(p.lanes=a),p.return=s,p.sibling=null,i!==null&&(a=s.deletions,a===null?(s.deletions=[i],s.flags|=16):a.push(i)),s.child=p,s.memoizedState=null,p}function qc(i,s){return s=Ba({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function wa(i,s,a,p){return p!==null&&fc(p),No(s,i.child,null,a),i=qc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function pE(i,s,a,p,_,E,C){if(a)return s.flags&256?(s.flags&=-257,p=Dc(Error(t(422))),wa(i,s,C,p)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(E=p.fallback,_=s.mode,p=Ba({mode:"visible",children:p.children},_,0,null),E=Li(E,_,C,null),E.flags|=2,p.return=s,E.return=s,p.sibling=E,s.child=p,(s.mode&1)!==0&&No(s,i.child,null,C),s.child.memoizedState=Bc(C),s.memoizedState=Uc,E);if((s.mode&1)===0)return wa(i,s,C,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var N=p.dgst;return p=N,E=Error(t(419)),p=Dc(E,p,void 0),wa(i,s,C,p)}if(N=(C&i.childLanes)!==0,jt||N){if(p=wt,p!==null){switch(C&-C){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(p.suspendedLanes|C))!==0?0:_,_!==0&&_!==E.retryLane&&(E.retryLane=_,_r(i,_),Bn(p,i,_,-1))}return td(),p=Dc(Error(t(421))),wa(i,s,C,p)}return _.data==="$?"?(s.flags|=128,s.child=i.child,s=RE.bind(null,i),_._reactRetry=s,null):(i=E.treeContext,un=Or(_.nextSibling),an=s,tt=!0,Vn=null,i!==null&&(mn[gn++]=gr,mn[gn++]=yr,mn[gn++]=Ai,gr=i.id,yr=i.overflow,Ai=s),s=qc(s,p.children),s.flags|=4096,s)}function vp(i,s,a){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),gc(i.return,s,a)}function Oc(i,s,a,p,_){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:a,tailMode:_}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=a,E.tailMode=_)}function Ep(i,s,a){var p=s.pendingProps,_=p.revealOrder,E=p.tail;if(Kt(i,s,p.children,a),p=rt.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vp(i,a,s);else if(i.tag===19)vp(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ye(rt,p),(s.mode&1)===0)s.memoizedState=null;else switch(_){case"forwards":for(a=s.child,_=null;a!==null;)i=a.alternate,i!==null&&_a(i)===null&&(_=a),a=a.sibling;a=_,a===null?(_=s.child,s.child=null):(_=a.sibling,a.sibling=null),Oc(s,!1,_,a,E);break;case"backwards":for(a=null,_=s.child,s.child=null;_!==null;){if(i=_.alternate,i!==null&&_a(i)===null){s.child=_;break}i=_.sibling,_.sibling=a,a=_,_=i}Oc(s,!0,a,null,E);break;case"together":Oc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Aa(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Er(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),ki|=s.lanes,(a&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,a=Xr(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Xr(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function mE(i,s,a){switch(s.tag){case 3:gp(s),xo();break;case 5:Vh(s);break;case 1:Zt(s.type)&&aa(s);break;case 4:vc(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,_=s.memoizedProps.value;Ye(pa,p._currentValue),p._currentValue=_;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(Ye(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?_p(i,s,a):(Ye(rt,rt.current&1),i=Er(i,s,a),i!==null?i.sibling:null);Ye(rt,rt.current&1);break;case 19:if(p=(a&s.childLanes)!==0,(i.flags&128)!==0){if(p)return Ep(i,s,a);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ye(rt,rt.current),p)break;return null;case 22:case 23:return s.lanes=0,hp(i,s,a)}return Er(i,s,a)}var Tp,bc,Ip,Sp;Tp=function(i,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},bc=function(){},Ip=function(i,s,a,p){var _=i.memoizedProps;if(_!==p){i=s.stateNode,xi(Xn.current);var E=null;switch(a){case"input":_=ai(i,_),p=ai(i,p),E=[];break;case"select":_=ce({},_,{value:void 0}),p=ce({},p,{value:void 0}),E=[];break;case"textarea":_=ds(i,_),p=ds(i,p),E=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=oa)}ys(a,p);var C;a=null;for($ in _)if(!p.hasOwnProperty($)&&_.hasOwnProperty($)&&_[$]!=null)if($==="style"){var N=_[$];for(C in N)N.hasOwnProperty(C)&&(a||(a={}),a[C]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?E||(E=[]):(E=E||[]).push($,null));for($ in p){var V=p[$];if(N=_?.[$],p.hasOwnProperty($)&&V!==N&&(V!=null||N!=null))if($==="style")if(N){for(C in N)!N.hasOwnProperty(C)||V&&V.hasOwnProperty(C)||(a||(a={}),a[C]="");for(C in V)V.hasOwnProperty(C)&&N[C]!==V[C]&&(a||(a={}),a[C]=V[C])}else a||(E||(E=[]),E.push($,a)),a=V;else $==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,N=N?N.__html:void 0,V!=null&&N!==V&&(E=E||[]).push($,V)):$==="children"?typeof V!="string"&&typeof V!="number"||(E=E||[]).push($,""+V):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(V!=null&&$==="onScroll"&&Xe("scroll",i),E||N===V||(E=[])):(E=E||[]).push($,V))}a&&(E=E||[]).push("style",a);var $=E;(s.updateQueue=$)&&(s.flags|=4)}},Sp=function(i,s,a,p){a!==p&&(s.flags|=4)};function Xs(i,s){if(!tt)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function qt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,p=0;if(s)for(var _=i.child;_!==null;)a|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)a|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=p,i.childLanes=a,s}function gE(i,s,a){var p=s.pendingProps;switch(uc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return Zt(s.type)&&la(),qt(s),null;case 3:return p=s.stateNode,Do(),Ze(Xt),Ze(Ut),Ic(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(fa(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Vn!==null&&(Zc(Vn),Vn=null))),bc(i,s),qt(s),null;case 5:Ec(s);var _=xi(Ws.current);if(a=s.type,i!==null&&s.stateNode!=null)Ip(i,s,a,p,_),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(t(166));return qt(s),null}if(i=xi(Xn.current),fa(s)){p=s.stateNode,a=s.type;var E=s.memoizedProps;switch(p[Yn]=s,p[bs]=E,i=(s.mode&1)!==0,a){case"dialog":Xe("cancel",p),Xe("close",p);break;case"iframe":case"object":case"embed":Xe("load",p);break;case"video":case"audio":for(_=0;_<Bs.length;_++)Xe(Bs[_],p);break;case"source":Xe("error",p);break;case"img":case"image":case"link":Xe("error",p),Xe("load",p);break;case"details":Xe("toggle",p);break;case"input":Ki(p,E),Xe("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!E.multiple},Xe("invalid",p);break;case"textarea":Qi(p,E),Xe("invalid",p)}ys(a,E),_=null;for(var C in E)if(E.hasOwnProperty(C)){var N=E[C];C==="children"?typeof N=="string"?p.textContent!==N&&(E.suppressHydrationWarning!==!0&&ia(p.textContent,N,i),_=["children",N]):typeof N=="number"&&p.textContent!==""+N&&(E.suppressHydrationWarning!==!0&&ia(p.textContent,N,i),_=["children",""+N]):o.hasOwnProperty(C)&&N!=null&&C==="onScroll"&&Xe("scroll",p)}switch(a){case"input":ir(p),Nl(p,E,!0);break;case"textarea":ir(p),fs(p);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(p.onclick=oa)}p=_,s.updateQueue=p,p!==null&&(s.flags|=4)}else{C=_.nodeType===9?_:_.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=mt(a)),i==="http://www.w3.org/1999/xhtml"?a==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(a,{is:p.is}):(i=C.createElement(a),a==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,a),i[Yn]=s,i[bs]=p,Tp(i,s,!1,!1),s.stateNode=i;e:{switch(C=_s(a,p),a){case"dialog":Xe("cancel",i),Xe("close",i),_=p;break;case"iframe":case"object":case"embed":Xe("load",i),_=p;break;case"video":case"audio":for(_=0;_<Bs.length;_++)Xe(Bs[_],i);_=p;break;case"source":Xe("error",i),_=p;break;case"img":case"image":case"link":Xe("error",i),Xe("load",i),_=p;break;case"details":Xe("toggle",i),_=p;break;case"input":Ki(i,p),_=ai(i,p),Xe("invalid",i);break;case"option":_=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},_=ce({},p,{value:void 0}),Xe("invalid",i);break;case"textarea":Qi(i,p),_=ds(i,p),Xe("invalid",i);break;default:_=p}ys(a,_),N=_;for(E in N)if(N.hasOwnProperty(E)){var V=N[E];E==="style"?ms(i,V):E==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&hs(i,V)):E==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&xr(i,V):typeof V=="number"&&xr(i,""+V):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(o.hasOwnProperty(E)?V!=null&&E==="onScroll"&&Xe("scroll",i):V!=null&&Q(i,E,V,C))}switch(a){case"input":ir(i),Nl(i,p,!1);break;case"textarea":ir(i),fs(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ge(p.value));break;case"select":i.multiple=!!p.multiple,E=p.value,E!=null?sr(i,!!p.multiple,E,!1):p.defaultValue!=null&&sr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(i.onclick=oa)}switch(a){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(i&&s.stateNode!=null)Sp(i,s,i.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(t(166));if(a=xi(Ws.current),xi(Xn.current),fa(s)){if(p=s.stateNode,a=s.memoizedProps,p[Yn]=s,(E=p.nodeValue!==a)&&(i=an,i!==null))switch(i.tag){case 3:ia(p.nodeValue,a,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ia(p.nodeValue,a,(i.mode&1)!==0)}E&&(s.flags|=4)}else p=(a.nodeType===9?a:a.ownerDocument).createTextNode(p),p[Yn]=s,s.stateNode=p}return qt(s),null;case 13:if(Ze(rt),p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(tt&&un!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ah(),xo(),s.flags|=98560,E=!1;else if(E=fa(s),p!==null&&p.dehydrated!==null){if(i===null){if(!E)throw Error(t(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[Yn]=s}else xo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),E=!1}else Vn!==null&&(Zc(Vn),Vn=null),E=!0;if(!E)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(rt.current&1)!==0?vt===0&&(vt=3):td())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return Do(),bc(i,s),i===null&&qs(s.stateNode.containerInfo),qt(s),null;case 10:return mc(s.type._context),qt(s),null;case 17:return Zt(s.type)&&la(),qt(s),null;case 19:if(Ze(rt),E=s.memoizedState,E===null)return qt(s),null;if(p=(s.flags&128)!==0,C=E.rendering,C===null)if(p)Xs(E,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(C=_a(i),C!==null){for(s.flags|=128,Xs(E,!1),p=C.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=a,a=s.child;a!==null;)E=a,i=p,E.flags&=14680066,C=E.alternate,C===null?(E.childLanes=0,E.lanes=i,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=C.childLanes,E.lanes=C.lanes,E.child=C.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=C.memoizedProps,E.memoizedState=C.memoizedState,E.updateQueue=C.updateQueue,E.type=C.type,i=C.dependencies,E.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a=a.sibling;return Ye(rt,rt.current&1|2),s.child}i=i.sibling}E.tail!==null&&Qe()>Uo&&(s.flags|=128,p=!0,Xs(E,!1),s.lanes=4194304)}else{if(!p)if(i=_a(C),i!==null){if(s.flags|=128,p=!0,a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Xs(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!tt)return qt(s),null}else 2*Qe()-E.renderingStartTime>Uo&&a!==1073741824&&(s.flags|=128,p=!0,Xs(E,!1),s.lanes=4194304);E.isBackwards?(C.sibling=s.child,s.child=C):(a=E.last,a!==null?a.sibling=C:s.child=C,E.last=C)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Qe(),s.sibling=null,a=rt.current,Ye(rt,p?a&1|2:a&1),s):(qt(s),null);case 22:case 23:return ed(),p=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(s.flags|=8192),p&&(s.mode&1)!==0?(cn&1073741824)!==0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function yE(i,s){switch(uc(s),s.tag){case 1:return Zt(s.type)&&la(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Do(),Ze(Xt),Ze(Ut),Ic(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return Ec(s),null;case 13:if(Ze(rt),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));xo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return Do(),null;case 10:return mc(s.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var Ra=!1,Ot=!1,_E=typeof WeakSet=="function"?WeakSet:Set,de=null;function Lo(i,s){var a=i.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){st(i,s,p)}else a.current=null}function Gc(i,s,a){try{a()}catch(p){st(i,s,p)}}var Cp=!1;function vE(i,s){if(ec=Ur,i=nh(),Wu(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var p=a.getSelection&&a.getSelection();if(p&&p.rangeCount!==0){a=p.anchorNode;var _=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{a.nodeType,E.nodeType}catch{a=null;break e}var C=0,N=-1,V=-1,$=0,Z=0,te=i,Y=null;t:for(;;){for(var ue;te!==a||_!==0&&te.nodeType!==3||(N=C+_),te!==E||p!==0&&te.nodeType!==3||(V=C+p),te.nodeType===3&&(C+=te.nodeValue.length),(ue=te.firstChild)!==null;)Y=te,te=ue;for(;;){if(te===i)break t;if(Y===a&&++$===_&&(N=C),Y===E&&++Z===p&&(V=C),(ue=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=ue}a=N===-1||V===-1?null:{start:N,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(tc={focusedElem:i,selectionRange:a},Ur=!1,de=s;de!==null;)if(s=de,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,de=i;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var he=fe.memoizedProps,at=fe.memoizedState,H=s.stateNode,F=H.getSnapshotBeforeUpdate(s.elementType===s.type?he:Ln(s.type,he),at);H.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){st(s,s.return,ne)}if(i=s.sibling,i!==null){i.return=s.return,de=i;break}de=s.return}return fe=Cp,Cp=!1,fe}function Zs(i,s,a){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&i)===i){var E=_.destroy;_.destroy=void 0,E!==void 0&&Gc(s,a,E)}_=_.next}while(_!==p)}}function Pa(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&i)===i){var p=a.create;a.destroy=p()}a=a.next}while(a!==s)}}function Hc(i){var s=i.ref;if(s!==null){var a=i.stateNode;switch(i.tag){case 5:i=a;break;default:i=a}typeof s=="function"?s(i):s.current=i}}function wp(i){var s=i.alternate;s!==null&&(i.alternate=null,wp(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Yn],delete s[bs],delete s[oc],delete s[tE],delete s[nE])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Ap(i){return i.tag===5||i.tag===3||i.tag===4}function Rp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ap(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zc(i,s,a){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(i,s):a.insertBefore(i,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(i,a)):(s=a,s.appendChild(i)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=oa));else if(p!==4&&(i=i.child,i!==null))for(zc(i,s,a),i=i.sibling;i!==null;)zc(i,s,a),i=i.sibling}function $c(i,s,a){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for($c(i,s,a),i=i.sibling;i!==null;)$c(i,s,a),i=i.sibling}var Nt=null,Fn=!1;function Wr(i,s,a){for(a=a.child;a!==null;)Pp(i,s,a),a=a.sibling}function Pp(i,s,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(yi,a)}catch{}switch(a.tag){case 5:Ot||Lo(a,s);case 6:var p=Nt,_=Fn;Nt=null,Wr(i,s,a),Nt=p,Fn=_,Nt!==null&&(Fn?(i=Nt,a=a.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Fn?(i=Nt,a=a.stateNode,i.nodeType===8?ic(i.parentNode,a):i.nodeType===1&&ic(i,a),kn(i)):ic(Nt,a.stateNode));break;case 4:p=Nt,_=Fn,Nt=a.stateNode.containerInfo,Fn=!0,Wr(i,s,a),Nt=p,Fn=_;break;case 0:case 11:case 14:case 15:if(!Ot&&(p=a.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var E=_,C=E.destroy;E=E.tag,C!==void 0&&((E&2)!==0||(E&4)!==0)&&Gc(a,s,C),_=_.next}while(_!==p)}Wr(i,s,a);break;case 1:if(!Ot&&(Lo(a,s),p=a.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=a.memoizedProps,p.state=a.memoizedState,p.componentWillUnmount()}catch(N){st(a,s,N)}Wr(i,s,a);break;case 21:Wr(i,s,a);break;case 22:a.mode&1?(Ot=(p=Ot)||a.memoizedState!==null,Wr(i,s,a),Ot=p):Wr(i,s,a);break;default:Wr(i,s,a)}}function xp(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var a=i.stateNode;a===null&&(a=i.stateNode=new _E),s.forEach(function(p){var _=PE.bind(null,i,p);a.has(p)||(a.add(p),p.then(_,_))})}}function Un(i,s){var a=s.deletions;if(a!==null)for(var p=0;p<a.length;p++){var _=a[p];try{var E=i,C=s,N=C;e:for(;N!==null;){switch(N.tag){case 5:Nt=N.stateNode,Fn=!1;break e;case 3:Nt=N.stateNode.containerInfo,Fn=!0;break e;case 4:Nt=N.stateNode.containerInfo,Fn=!0;break e}N=N.return}if(Nt===null)throw Error(t(160));Pp(E,C,_),Nt=null,Fn=!1;var V=_.alternate;V!==null&&(V.return=null),_.return=null}catch($){st(_,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Np(s,i),s=s.sibling}function Np(i,s){var a=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Un(s,i),jn(i),p&4){try{Zs(3,i,i.return),Pa(3,i)}catch(he){st(i,i.return,he)}try{Zs(5,i,i.return)}catch(he){st(i,i.return,he)}}break;case 1:Un(s,i),jn(i),p&512&&a!==null&&Lo(a,a.return);break;case 5:if(Un(s,i),jn(i),p&512&&a!==null&&Lo(a,a.return),i.flags&32){var _=i.stateNode;try{xr(_,"")}catch(he){st(i,i.return,he)}}if(p&4&&(_=i.stateNode,_!=null)){var E=i.memoizedProps,C=a!==null?a.memoizedProps:E,N=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{N==="input"&&E.type==="radio"&&E.name!=null&&us(_,E),_s(N,C);var $=_s(N,E);for(C=0;C<V.length;C+=2){var Z=V[C],te=V[C+1];Z==="style"?ms(_,te):Z==="dangerouslySetInnerHTML"?hs(_,te):Z==="children"?xr(_,te):Q(_,Z,te,$)}switch(N){case"input":cs(_,E);break;case"textarea":Yi(_,E);break;case"select":var Y=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!E.multiple;var ue=E.value;ue!=null?sr(_,!!E.multiple,ue,!1):Y!==!!E.multiple&&(E.defaultValue!=null?sr(_,!!E.multiple,E.defaultValue,!0):sr(_,!!E.multiple,E.multiple?[]:"",!1))}_[bs]=E}catch(he){st(i,i.return,he)}}break;case 6:if(Un(s,i),jn(i),p&4){if(i.stateNode===null)throw Error(t(162));_=i.stateNode,E=i.memoizedProps;try{_.nodeValue=E}catch(he){st(i,i.return,he)}}break;case 3:if(Un(s,i),jn(i),p&4&&a!==null&&a.memoizedState.isDehydrated)try{kn(s.containerInfo)}catch(he){st(i,i.return,he)}break;case 4:Un(s,i),jn(i);break;case 13:Un(s,i),jn(i),_=i.child,_.flags&8192&&(E=_.memoizedState!==null,_.stateNode.isHidden=E,!E||_.alternate!==null&&_.alternate.memoizedState!==null||(Jc=Qe())),p&4&&xp(i);break;case 22:if(Z=a!==null&&a.memoizedState!==null,i.mode&1?(Ot=($=Ot)||Z,Un(s,i),Ot=$):Un(s,i),jn(i),p&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!Z&&(i.mode&1)!==0)for(de=i,Z=i.child;Z!==null;){for(te=de=Z;de!==null;){switch(Y=de,ue=Y.child,Y.tag){case 0:case 11:case 14:case 15:Zs(4,Y,Y.return);break;case 1:Lo(Y,Y.return);var fe=Y.stateNode;if(typeof fe.componentWillUnmount=="function"){p=Y,a=Y.return;try{s=p,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(he){st(p,a,he)}}break;case 5:Lo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Dp(te);continue}}ue!==null?(ue.return=Y,de=ue):Dp(te)}Z=Z.sibling}e:for(Z=null,te=i;;){if(te.tag===5){if(Z===null){Z=te;try{_=te.stateNode,$?(E=_.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(N=te.stateNode,V=te.memoizedProps.style,C=V!=null&&V.hasOwnProperty("display")?V.display:null,N.style.display=ps("display",C))}catch(he){st(i,i.return,he)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(he){st(i,i.return,he)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Un(s,i),jn(i),p&4&&xp(i);break;case 21:break;default:Un(s,i),jn(i)}}function jn(i){var s=i.flags;if(s&2){try{e:{for(var a=i.return;a!==null;){if(Ap(a)){var p=a;break e}a=a.return}throw Error(t(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(xr(_,""),p.flags&=-33);var E=Rp(i);$c(i,E,_);break;case 3:case 4:var C=p.stateNode.containerInfo,N=Rp(i);zc(i,N,C);break;default:throw Error(t(161))}}catch(V){st(i,i.return,V)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function EE(i,s,a){de=i,kp(i)}function kp(i,s,a){for(var p=(i.mode&1)!==0;de!==null;){var _=de,E=_.child;if(_.tag===22&&p){var C=_.memoizedState!==null||Ra;if(!C){var N=_.alternate,V=N!==null&&N.memoizedState!==null||Ot;N=Ra;var $=Ot;if(Ra=C,(Ot=V)&&!$)for(de=_;de!==null;)C=de,V=C.child,C.tag===22&&C.memoizedState!==null?Vp(_):V!==null?(V.return=C,de=V):Vp(_);for(;E!==null;)de=E,kp(E),E=E.sibling;de=_,Ra=N,Ot=$}Mp(i)}else(_.subtreeFlags&8772)!==0&&E!==null?(E.return=_,de=E):Mp(i)}}function Mp(i){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ot||Pa(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!Ot)if(a===null)p.componentDidMount();else{var _=s.elementType===s.type?a.memoizedProps:Ln(s.type,a.memoizedProps);p.componentDidUpdate(_,a.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var E=s.updateQueue;E!==null&&Dh(s,E,p);break;case 3:var C=s.updateQueue;if(C!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Dh(s,C,a)}break;case 5:var N=s.stateNode;if(a===null&&s.flags&4){a=N;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&kn(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||s.flags&512&&Hc(s)}catch(Y){st(s,s.return,Y)}}if(s===i){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function Dp(i){for(;de!==null;){var s=de;if(s===i){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function Vp(i){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Pa(4,s)}catch(V){st(s,a,V)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var _=s.return;try{p.componentDidMount()}catch(V){st(s,_,V)}}var E=s.return;try{Hc(s)}catch(V){st(s,E,V)}break;case 5:var C=s.return;try{Hc(s)}catch(V){st(s,C,V)}}}catch(V){st(s,s.return,V)}if(s===i){de=null;break}var N=s.sibling;if(N!==null){N.return=s.return,de=N;break}de=s.return}}var TE=Math.ceil,xa=ie.ReactCurrentDispatcher,Wc=ie.ReactCurrentOwner,vn=ie.ReactCurrentBatchConfig,Ve=0,wt=null,dt=null,kt=0,cn=0,Fo=br(0),vt=0,js=null,ki=0,Na=0,Kc=0,el=null,en=null,Jc=0,Uo=1/0,Tr=null,ka=!1,Qc=null,Kr=null,Ma=!1,Jr=null,Da=0,tl=0,Yc=null,Va=-1,La=0;function Jt(){return(Ve&6)!==0?Qe():Va!==-1?Va:Va=Qe()}function Qr(i){return(i.mode&1)===0?1:(Ve&2)!==0&&kt!==0?kt&-kt:iE.transition!==null?(La===0&&(La=vi()),La):(i=Ne,i!==0||(i=window.event,i=i===void 0?16:xs(i.type)),i)}function Bn(i,s,a,p){if(50<tl)throw tl=0,Yc=null,Error(t(185));Dr(i,a,p),((Ve&2)===0||i!==wt)&&(i===wt&&((Ve&2)===0&&(Na|=a),vt===4&&Yr(i,kt)),tn(i,p),a===1&&Ve===0&&(s.mode&1)===0&&(Uo=Qe()+500,ua&&Hr()))}function tn(i,s){var a=i.callbackNode;ur(i,s);var p=_i(i,i===wt?kt:0);if(p===0)a!==null&&Cs(a),i.callbackNode=null,i.callbackPriority=0;else if(s=p&-p,i.callbackPriority!==s){if(a!=null&&Cs(a),s===1)i.tag===0?rE(Fp.bind(null,i)):Th(Fp.bind(null,i)),jv(function(){(Ve&6)===0&&Hr()}),a=null;else{switch(Lr(p)){case 1:a=gi;break;case 4:a=Nr;break;case 16:a=fn;break;case 536870912:a=Ll;break;default:a=fn}a=zp(a,Lp.bind(null,i))}i.callbackPriority=s,i.callbackNode=a}}function Lp(i,s){if(Va=-1,La=0,(Ve&6)!==0)throw Error(t(327));var a=i.callbackNode;if(Bo()&&i.callbackNode!==a)return null;var p=_i(i,i===wt?kt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||s)s=Fa(i,p);else{s=p;var _=Ve;Ve|=2;var E=Bp();(wt!==i||kt!==s)&&(Tr=null,Uo=Qe()+500,Di(i,s));do try{CE();break}catch(N){Up(i,N)}while(!0);pc(),xa.current=E,Ve=_,dt!==null?s=0:(wt=null,kt=0,s=vt)}if(s!==0){if(s===2&&(_=on(i),_!==0&&(p=_,s=Xc(i,_))),s===1)throw a=js,Di(i,0),Yr(i,p),tn(i,Qe()),a;if(s===6)Yr(i,p);else{if(_=i.current.alternate,(p&30)===0&&!IE(_)&&(s=Fa(i,p),s===2&&(E=on(i),E!==0&&(p=E,s=Xc(i,E))),s===1))throw a=js,Di(i,0),Yr(i,p),tn(i,Qe()),a;switch(i.finishedWork=_,i.finishedLanes=p,s){case 0:case 1:throw Error(t(345));case 2:Vi(i,en,Tr);break;case 3:if(Yr(i,p),(p&130023424)===p&&(s=Jc+500-Qe(),10<s)){if(_i(i,0)!==0)break;if(_=i.suspendedLanes,(_&p)!==p){Jt(),i.pingedLanes|=i.suspendedLanes&_;break}i.timeoutHandle=rc(Vi.bind(null,i,en,Tr),s);break}Vi(i,en,Tr);break;case 4:if(Yr(i,p),(p&4194240)===p)break;for(s=i.eventTimes,_=-1;0<p;){var C=31-$t(p);E=1<<C,C=s[C],C>_&&(_=C),p&=~E}if(p=_,p=Qe()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*TE(p/1960))-p,10<p){i.timeoutHandle=rc(Vi.bind(null,i,en,Tr),p);break}Vi(i,en,Tr);break;case 5:Vi(i,en,Tr);break;default:throw Error(t(329))}}}return tn(i,Qe()),i.callbackNode===a?Lp.bind(null,i):null}function Xc(i,s){var a=el;return i.current.memoizedState.isDehydrated&&(Di(i,s).flags|=256),i=Fa(i,s),i!==2&&(s=en,en=a,s!==null&&Zc(s)),i}function Zc(i){en===null?en=i:en.push.apply(en,i)}function IE(i){for(var s=i;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var p=0;p<a.length;p++){var _=a[p],E=_.getSnapshot;_=_.value;try{if(!Dn(E(),_))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yr(i,s){for(s&=~Kc,s&=~Na,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var a=31-$t(s),p=1<<a;i[a]=-1,s&=~p}}function Fp(i){if((Ve&6)!==0)throw Error(t(327));Bo();var s=_i(i,0);if((s&1)===0)return tn(i,Qe()),null;var a=Fa(i,s);if(i.tag!==0&&a===2){var p=on(i);p!==0&&(s=p,a=Xc(i,p))}if(a===1)throw a=js,Di(i,0),Yr(i,s),tn(i,Qe()),a;if(a===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Vi(i,en,Tr),tn(i,Qe()),null}function jc(i,s){var a=Ve;Ve|=1;try{return i(s)}finally{Ve=a,Ve===0&&(Uo=Qe()+500,ua&&Hr())}}function Mi(i){Jr!==null&&Jr.tag===0&&(Ve&6)===0&&Bo();var s=Ve;Ve|=1;var a=vn.transition,p=Ne;try{if(vn.transition=null,Ne=1,i)return i()}finally{Ne=p,vn.transition=a,Ve=s,(Ve&6)===0&&Hr()}}function ed(){cn=Fo.current,Ze(Fo)}function Di(i,s){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;if(a!==-1&&(i.timeoutHandle=-1,Zv(a)),dt!==null)for(a=dt.return;a!==null;){var p=a;switch(uc(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&la();break;case 3:Do(),Ze(Xt),Ze(Ut),Ic();break;case 5:Ec(p);break;case 4:Do();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:mc(p.type._context);break;case 22:case 23:ed()}a=a.return}if(wt=i,dt=i=Xr(i.current,null),kt=cn=s,vt=0,js=null,Kc=Na=ki=0,en=el=null,Pi!==null){for(s=0;s<Pi.length;s++)if(a=Pi[s],p=a.interleaved,p!==null){a.interleaved=null;var _=p.next,E=a.pending;if(E!==null){var C=E.next;E.next=_,p.next=C}a.pending=p}Pi=null}return i}function Up(i,s){do{var a=dt;try{if(pc(),va.current=Sa,Ea){for(var p=it.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}Ea=!1}if(Ni=0,Ct=_t=it=null,Ks=!1,Js=0,Wc.current=null,a===null||a.return===null){vt=1,js=s,dt=null;break}e:{var E=i,C=a.return,N=a,V=s;if(s=kt,N.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var $=V,Z=N,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ue=ap(C);if(ue!==null){ue.flags&=-257,up(ue,C,N,E,s),ue.mode&1&&lp(E,$,s),s=ue,V=$;var fe=s.updateQueue;if(fe===null){var he=new Set;he.add(V),s.updateQueue=he}else fe.add(V);break e}else{if((s&1)===0){lp(E,$,s),td();break e}V=Error(t(426))}}else if(tt&&N.mode&1){var at=ap(C);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),up(at,C,N,E,s),fc(Vo(V,N));break e}}E=V=Vo(V,N),vt!==4&&(vt=2),el===null?el=[E]:el.push(E),E=C;do{switch(E.tag){case 3:E.flags|=65536,s&=-s,E.lanes|=s;var H=op(E,V,s);Mh(E,H);break e;case 1:N=V;var F=E.type,z=E.stateNode;if((E.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Kr===null||!Kr.has(z)))){E.flags|=65536,s&=-s,E.lanes|=s;var ne=sp(E,N,s);Mh(E,ne);break e}}E=E.return}while(E!==null)}Op(a)}catch(me){s=me,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Bp(){var i=xa.current;return xa.current=Sa,i===null?Sa:i}function td(){(vt===0||vt===3||vt===2)&&(vt=4),wt===null||(ki&268435455)===0&&(Na&268435455)===0||Yr(wt,kt)}function Fa(i,s){var a=Ve;Ve|=2;var p=Bp();(wt!==i||kt!==s)&&(Tr=null,Di(i,s));do try{SE();break}catch(_){Up(i,_)}while(!0);if(pc(),Ve=a,xa.current=p,dt!==null)throw Error(t(261));return wt=null,kt=0,vt}function SE(){for(;dt!==null;)qp(dt)}function CE(){for(;dt!==null&&!Dl();)qp(dt)}function qp(i){var s=Hp(i.alternate,i,cn);i.memoizedProps=i.pendingProps,s===null?Op(i):dt=s,Wc.current=null}function Op(i){var s=i;do{var a=s.alternate;if(i=s.return,(s.flags&32768)===0){if(a=gE(a,s,cn),a!==null){dt=a;return}}else{if(a=yE(a,s),a!==null){a.flags&=32767,dt=a;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{vt=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=i}while(s!==null);vt===0&&(vt=5)}function Vi(i,s,a){var p=Ne,_=vn.transition;try{vn.transition=null,Ne=1,wE(i,s,a,p)}finally{vn.transition=_,Ne=p}return null}function wE(i,s,a,p){do Bo();while(Jr!==null);if((Ve&6)!==0)throw Error(t(327));a=i.finishedWork;var _=i.finishedLanes;if(a===null)return null;if(i.finishedWork=null,i.finishedLanes=0,a===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var E=a.lanes|a.childLanes;if(We(i,E),i===wt&&(dt=wt=null,kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ma||(Ma=!0,zp(fn,function(){return Bo(),null})),E=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||E){E=vn.transition,vn.transition=null;var C=Ne;Ne=1;var N=Ve;Ve|=4,Wc.current=null,vE(i,a),Np(a,i),$v(tc),Ur=!!ec,tc=ec=null,i.current=a,EE(a),Bu(),Ve=N,Ne=C,vn.transition=E}else i.current=a;if(Ma&&(Ma=!1,Jr=i,Da=_),E=i.pendingLanes,E===0&&(Kr=null),Fl(a.stateNode),tn(i,Qe()),s!==null)for(p=i.onRecoverableError,a=0;a<s.length;a++)_=s[a],p(_.value,{componentStack:_.stack,digest:_.digest});if(ka)throw ka=!1,i=Qc,Qc=null,i;return(Da&1)!==0&&i.tag!==0&&Bo(),E=i.pendingLanes,(E&1)!==0?i===Yc?tl++:(tl=0,Yc=i):tl=0,Hr(),null}function Bo(){if(Jr!==null){var i=Lr(Da),s=vn.transition,a=Ne;try{if(vn.transition=null,Ne=16>i?16:i,Jr===null)var p=!1;else{if(i=Jr,Jr=null,Da=0,(Ve&6)!==0)throw Error(t(331));var _=Ve;for(Ve|=4,de=i.current;de!==null;){var E=de,C=E.child;if((de.flags&16)!==0){var N=E.deletions;if(N!==null){for(var V=0;V<N.length;V++){var $=N[V];for(de=$;de!==null;){var Z=de;switch(Z.tag){case 0:case 11:case 15:Zs(8,Z,E)}var te=Z.child;if(te!==null)te.return=Z,de=te;else for(;de!==null;){Z=de;var Y=Z.sibling,ue=Z.return;if(wp(Z),Z===$){de=null;break}if(Y!==null){Y.return=ue,de=Y;break}de=ue}}}var fe=E.alternate;if(fe!==null){var he=fe.child;if(he!==null){fe.child=null;do{var at=he.sibling;he.sibling=null,he=at}while(he!==null)}}de=E}}if((E.subtreeFlags&2064)!==0&&C!==null)C.return=E,de=C;else e:for(;de!==null;){if(E=de,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Zs(9,E,E.return)}var H=E.sibling;if(H!==null){H.return=E.return,de=H;break e}de=E.return}}var F=i.current;for(de=F;de!==null;){C=de;var z=C.child;if((C.subtreeFlags&2064)!==0&&z!==null)z.return=C,de=z;else e:for(C=F;de!==null;){if(N=de,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Pa(9,N)}}catch(me){st(N,N.return,me)}if(N===C){de=null;break e}var ne=N.sibling;if(ne!==null){ne.return=N.return,de=ne;break e}de=N.return}}if(Ve=_,Hr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(yi,i)}catch{}p=!0}return p}finally{Ne=a,vn.transition=s}}return!1}function bp(i,s,a){s=Vo(a,s),s=op(i,s,1),i=$r(i,s,1),s=Jt(),i!==null&&(Dr(i,1,s),tn(i,s))}function st(i,s,a){if(i.tag===3)bp(i,i,a);else for(;s!==null;){if(s.tag===3){bp(s,i,a);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Kr===null||!Kr.has(p))){i=Vo(a,i),i=sp(s,i,1),s=$r(s,i,1),i=Jt(),s!==null&&(Dr(s,1,i),tn(s,i));break}}s=s.return}}function AE(i,s,a){var p=i.pingCache;p!==null&&p.delete(s),s=Jt(),i.pingedLanes|=i.suspendedLanes&a,wt===i&&(kt&a)===a&&(vt===4||vt===3&&(kt&130023424)===kt&&500>Qe()-Jc?Di(i,0):Kc|=a),tn(i,s)}function Gp(i,s){s===0&&((i.mode&1)===0?s=1:(s=so,so<<=1,(so&130023424)===0&&(so=4194304)));var a=Jt();i=_r(i,s),i!==null&&(Dr(i,s,a),tn(i,a))}function RE(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Gp(i,a)}function PE(i,s){var a=0;switch(i.tag){case 13:var p=i.stateNode,_=i.memoizedState;_!==null&&(a=_.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(s),Gp(i,a)}var Hp;Hp=function(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps||Xt.current)jt=!0;else{if((i.lanes&a)===0&&(s.flags&128)===0)return jt=!1,mE(i,s,a);jt=(i.flags&131072)!==0}else jt=!1,tt&&(s.flags&1048576)!==0&&Ih(s,da,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;Aa(i,s),i=s.pendingProps;var _=Ao(s,Ut.current);Mo(s,a),_=wc(null,s,p,i,_,a);var E=Ac();return s.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(p)?(E=!0,aa(s)):E=!1,s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_c(s),_.updater=Ca,s.stateNode=_,_._reactInternals=s,Mc(s,p,i,a),s=Fc(null,s,p,!0,E,a)):(s.tag=0,tt&&E&&ac(s),Kt(null,s,_,a),s=s.child),s;case 16:p=s.elementType;e:{switch(Aa(i,s),i=s.pendingProps,_=p._init,p=_(p._payload),s.type=p,_=s.tag=NE(p),i=Ln(p,i),_){case 0:s=Lc(null,s,p,i,a);break e;case 1:s=mp(null,s,p,i,a);break e;case 11:s=cp(null,s,p,i,a);break e;case 14:s=dp(null,s,p,Ln(p.type,i),a);break e}throw Error(t(306,p,""))}return s;case 0:return p=s.type,_=s.pendingProps,_=s.elementType===p?_:Ln(p,_),Lc(i,s,p,_,a);case 1:return p=s.type,_=s.pendingProps,_=s.elementType===p?_:Ln(p,_),mp(i,s,p,_,a);case 3:e:{if(gp(s),i===null)throw Error(t(387));p=s.pendingProps,E=s.memoizedState,_=E.element,kh(i,s),ya(s,p,null,a);var C=s.memoizedState;if(p=C.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){_=Vo(Error(t(423)),s),s=yp(i,s,p,a,_);break e}else if(p!==_){_=Vo(Error(t(424)),s),s=yp(i,s,p,a,_);break e}else for(un=Or(s.stateNode.containerInfo.firstChild),an=s,tt=!0,Vn=null,a=xh(s,null,p,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xo(),p===_){s=Er(i,s,a);break e}Kt(i,s,p,a)}s=s.child}return s;case 5:return Vh(s),i===null&&dc(s),p=s.type,_=s.pendingProps,E=i!==null?i.memoizedProps:null,C=_.children,nc(p,_)?C=null:E!==null&&nc(p,E)&&(s.flags|=32),pp(i,s),Kt(i,s,C,a),s.child;case 6:return i===null&&dc(s),null;case 13:return _p(i,s,a);case 4:return vc(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=No(s,null,p,a):Kt(i,s,p,a),s.child;case 11:return p=s.type,_=s.pendingProps,_=s.elementType===p?_:Ln(p,_),cp(i,s,p,_,a);case 7:return Kt(i,s,s.pendingProps,a),s.child;case 8:return Kt(i,s,s.pendingProps.children,a),s.child;case 12:return Kt(i,s,s.pendingProps.children,a),s.child;case 10:e:{if(p=s.type._context,_=s.pendingProps,E=s.memoizedProps,C=_.value,Ye(pa,p._currentValue),p._currentValue=C,E!==null)if(Dn(E.value,C)){if(E.children===_.children&&!Xt.current){s=Er(i,s,a);break e}}else for(E=s.child,E!==null&&(E.return=s);E!==null;){var N=E.dependencies;if(N!==null){C=E.child;for(var V=N.firstContext;V!==null;){if(V.context===p){if(E.tag===1){V=vr(-1,a&-a),V.tag=2;var $=E.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?V.next=V:(V.next=Z.next,Z.next=V),$.pending=V}}E.lanes|=a,V=E.alternate,V!==null&&(V.lanes|=a),gc(E.return,a,s),N.lanes|=a;break}V=V.next}}else if(E.tag===10)C=E.type===s.type?null:E.child;else if(E.tag===18){if(C=E.return,C===null)throw Error(t(341));C.lanes|=a,N=C.alternate,N!==null&&(N.lanes|=a),gc(C,a,s),C=E.sibling}else C=E.child;if(C!==null)C.return=E;else for(C=E;C!==null;){if(C===s){C=null;break}if(E=C.sibling,E!==null){E.return=C.return,C=E;break}C=C.return}E=C}Kt(i,s,_.children,a),s=s.child}return s;case 9:return _=s.type,p=s.pendingProps.children,Mo(s,a),_=yn(_),p=p(_),s.flags|=1,Kt(i,s,p,a),s.child;case 14:return p=s.type,_=Ln(p,s.pendingProps),_=Ln(p.type,_),dp(i,s,p,_,a);case 15:return fp(i,s,s.type,s.pendingProps,a);case 17:return p=s.type,_=s.pendingProps,_=s.elementType===p?_:Ln(p,_),Aa(i,s),s.tag=1,Zt(p)?(i=!0,aa(s)):i=!1,Mo(s,a),rp(s,p,_),Mc(s,p,_,a),Fc(null,s,p,!0,i,a);case 19:return Ep(i,s,a);case 22:return hp(i,s,a)}throw Error(t(156,s.tag))};function zp(i,s){return io(i,s)}function xE(i,s,a,p){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,s,a,p){return new xE(i,s,a,p)}function nd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function NE(i){if(typeof i=="function")return nd(i)?1:0;if(i!=null){if(i=i.$$typeof,i===O)return 11;if(i===pt)return 14}return 2}function Xr(i,s){var a=i.alternate;return a===null?(a=En(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&14680064,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a}function Ua(i,s,a,p,_,E){var C=2;if(p=i,typeof i=="function")nd(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case M:return Li(a.children,_,E,s);case P:C=8,_|=8;break;case R:return i=En(12,a,s,_|2),i.elementType=R,i.lanes=E,i;case x:return i=En(13,a,s,_),i.elementType=x,i.lanes=E,i;case Fe:return i=En(19,a,s,_),i.elementType=Fe,i.lanes=E,i;case Ue:return Ba(a,_,E,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:C=10;break e;case L:C=9;break e;case O:C=11;break e;case pt:C=14;break e;case Ke:C=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=En(C,a,s,_),s.elementType=i,s.type=p,s.lanes=E,s}function Li(i,s,a,p){return i=En(7,i,p,s),i.lanes=a,i}function Ba(i,s,a,p){return i=En(22,i,p,s),i.elementType=Ue,i.lanes=a,i.stateNode={isHidden:!1},i}function rd(i,s,a){return i=En(6,i,null,s),i.lanes=a,i}function id(i,s,a){return s=En(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function kE(i,s,a,p,_){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mr(0),this.expirationTimes=Mr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function od(i,s,a,p,_,E,C,N,V){return i=new kE(i,s,a,N,V),s===1?(s=1,E===!0&&(s|=8)):s=0,E=En(3,null,null,s),i.current=E,E.stateNode=i,E.memoizedState={element:p,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_c(E),i}function ME(i,s,a){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:p==null?null:""+p,children:i,containerInfo:s,implementation:a}}function $p(i){if(!i)return Gr;i=i._reactInternals;e:{if(An(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var a=i.type;if(Zt(a))return vh(i,a,s)}return s}function Wp(i,s,a,p,_,E,C,N,V){return i=od(a,p,!0,i,_,E,C,N,V),i.context=$p(null),a=i.current,p=Jt(),_=Qr(a),E=vr(p,_),E.callback=s??null,$r(a,E,_),i.current.lanes=_,Dr(i,_,p),tn(i,p),i}function qa(i,s,a,p){var _=s.current,E=Jt(),C=Qr(_);return a=$p(a),s.context===null?s.context=a:s.pendingContext=a,s=vr(E,C),s.payload={element:i},p=p===void 0?null:p,p!==null&&(s.callback=p),i=$r(_,s,C),i!==null&&(Bn(i,_,C,E),ga(i,_,C)),C}function Oa(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Kp(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function sd(i,s){Kp(i,s),(i=i.alternate)&&Kp(i,s)}function DE(){return null}var Jp=typeof reportError=="function"?reportError:function(i){console.error(i)};function ld(i){this._internalRoot=i}ba.prototype.render=ld.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));qa(i,s,null,null)},ba.prototype.unmount=ld.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Mi(function(){qa(null,i,null,null)}),s[pr]=null}};function ba(i){this._internalRoot=i}ba.prototype.unstable_scheduleHydration=function(i){if(i){var s=bl();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Wn.length&&s!==0&&s<Wn[a].priority;a++);Wn.splice(a,0,i),a===0&&zl(i)}};function ad(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ga(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function VE(i,s,a,p,_){if(_){if(typeof p=="function"){var E=p;p=function(){var $=Oa(C);E.call($)}}var C=Wp(s,p,i,0,null,!1,!1,"",Qp);return i._reactRootContainer=C,i[pr]=C.current,qs(i.nodeType===8?i.parentNode:i),Mi(),C}for(;_=i.lastChild;)i.removeChild(_);if(typeof p=="function"){var N=p;p=function(){var $=Oa(V);N.call($)}}var V=od(i,0,!1,null,null,!1,!1,"",Qp);return i._reactRootContainer=V,i[pr]=V.current,qs(i.nodeType===8?i.parentNode:i),Mi(function(){qa(s,V,a,p)}),V}function Ha(i,s,a,p,_){var E=a._reactRootContainer;if(E){var C=E;if(typeof _=="function"){var N=_;_=function(){var V=Oa(C);N.call(V)}}qa(s,C,i,_)}else C=VE(a,s,i,_,p);return Oa(C)}ql=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var a=kr(s.pendingLanes);a!==0&&(Vr(s,a|1),tn(s,Qe()),(Ve&6)===0&&(Uo=Qe()+500,Hr()))}break;case 13:Mi(function(){var p=_r(i,1);if(p!==null){var _=Jt();Bn(p,i,1,_)}}),sd(i,1)}},lo=function(i){if(i.tag===13){var s=_r(i,134217728);if(s!==null){var a=Jt();Bn(s,i,134217728,a)}sd(i,134217728)}},Ol=function(i){if(i.tag===13){var s=Qr(i),a=_r(i,s);if(a!==null){var p=Jt();Bn(a,i,s,p)}sd(i,s)}},bl=function(){return Ne},Gl=function(i,s){var a=Ne;try{return Ne=i,s()}finally{Ne=a}},Zi=function(i,s,a){switch(s){case"input":if(cs(i,a),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var p=a[s];if(p!==i&&p.form===i.form){var _=sa(p);if(!_)throw Error(t(90));Wi(p),cs(p,_)}}}break;case"textarea":Yi(i,a);break;case"select":s=a.value,s!=null&&sr(i,!!a.multiple,s,!1)}},fi=jc,Es=Mi;var LE={usingClientEntryPoint:!1,Events:[Gs,Co,sa,zn,vs,jc]},nl={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FE={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ss(i),i===null?null:i.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||DE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{yi=za.inject(FE),rn=za}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LE,nn.createPortal=function(i,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ad(s))throw Error(t(200));return ME(i,s,null,a)},nn.createRoot=function(i,s){if(!ad(i))throw Error(t(299));var a=!1,p="",_=Jp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=od(i,1,!1,null,null,a,!1,p,_),i[pr]=s.current,qs(i.nodeType===8?i.parentNode:i),new ld(s)},nn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Ss(s),i=i===null?null:i.stateNode,i},nn.flushSync=function(i){return Mi(i)},nn.hydrate=function(i,s,a){if(!Ga(s))throw Error(t(200));return Ha(null,i,s,!0,a)},nn.hydrateRoot=function(i,s,a){if(!ad(i))throw Error(t(405));var p=a!=null&&a.hydratedSources||null,_=!1,E="",C=Jp;if(a!=null&&(a.unstable_strictMode===!0&&(_=!0),a.identifierPrefix!==void 0&&(E=a.identifierPrefix),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),s=Wp(s,null,i,1,a??null,_,!1,E,C),i[pr]=s.current,qs(i),p)for(i=0;i<p.length;i++)a=p[i],_=a._getVersion,_=_(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,_]:s.mutableSourceEagerHydrationData.push(a,_);return new ba(s)},nn.render=function(i,s,a){if(!Ga(s))throw Error(t(200));return Ha(null,i,s,!1,a)},nn.unmountComponentAtNode=function(i){if(!Ga(i))throw Error(t(40));return i._reactRootContainer?(Mi(function(){Ha(null,null,i,!1,function(){i._reactRootContainer=null,i[pr]=null})}),!0):!1},nn.unstable_batchedUpdates=jc,nn.unstable_renderSubtreeIntoContainer=function(i,s,a,p){if(!Ga(a))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Ha(i,s,a,!1,p)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var rm;function zE(){if(rm)return dd.exports;rm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dd.exports=HE(),dd.exports}var im;function $E(){if(im)return $a;im=1;var n=zE();return $a.createRoot=n.createRoot,$a.hydrateRoot=n.hydrateRoot,$a}var WE=$E();var KE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const JE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ht=(n,e)=>{const t=ze.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:h="",children:m,...g},y)=>ze.createElement("svg",{ref:y,...KE,width:o,height:o,stroke:r,strokeWidth:u?Number(l)*24/Number(o):l,className:["lucide",`lucide-${JE(n)}`,h].join(" "),...g},[...e.map(([T,I])=>ze.createElement(T,I)),...Array.isArray(m)?m:[m]]));return t.displayName=`${n}`,t};const Ay=ht("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const om=ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const sm=ht("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Ry=ht("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const QE=ht("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const jd=ht("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const YE=ht("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const XE=ht("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const ZE=ht("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const jE=ht("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const eT=ht("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const tT=ht("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const nT=ht("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const rT=ht("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const iT=ht("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);const oT=ht("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Py=ht("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const sT=ht("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ef=ht("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const lT=ht("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var lm={};const xy=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],h=n[t++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Ny={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,h=u?n[o+1]:0,m=o+2<n.length,g=m?n[o+2]:0,y=l>>2,T=(l&3)<<4|h>>4;let I=(h&15)<<2|g>>6,A=g&63;m||(A=64,u||(I=64)),r.push(t[y],t[T],t[I],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||g==null||T==null)throw new uT;const I=l<<2|h>>4;if(r.push(I),g!==64){const A=h<<4&240|g>>2;if(r.push(A),T!==64){const B=g<<6&192|T;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cT=function(n){const e=xy(n);return Ny.encodeByteArray(e,!0)},iu=function(n){return cT(n).replace(/\./g,"")},dT=function(n){try{return Ny.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const hT=()=>fT().__FIREBASE_DEFAULTS__,pT=()=>{if(typeof process>"u"||typeof lm>"u")return;const n=lm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dT(n[1]);return e&&JSON.parse(e)},tf=()=>{try{return hT()||pT()||mT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gT=n=>{var e,t;return(t=(e=tf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},yT=n=>{const e=gT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ky=()=>{var n;return(n=tf())===null||n===void 0?void 0:n.config};class _T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function vT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[iu(JSON.stringify(t)),iu(JSON.stringify(u)),""].join(".")}function ET(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TT(){var n;const e=(n=tf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IT(){return!TT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ST(){try{return typeof indexedDB=="object"}catch{return!1}}function CT(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const wT="FirebaseError";class ts extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wT,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,My.prototype.create)}}class My{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?AT(l,r):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new ts(o,h,r)}}function AT(n,e){return n.replace(RT,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const RT=/\{\$([^}]+)}/g;function Id(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=n[o],u=e[o];if(am(l)&&am(u)){if(!Id(l,u))return!1}else if(l!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function am(n){return n!==null&&typeof n=="object"}function pl(n){return n&&n._delegate?n._delegate:n}class ml{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fi="[DEFAULT]";class PT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _T;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NT(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xT(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xT(n){return n===Fi?void 0:n}function NT(n){return n.instantiationMode==="EAGER"}class kT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const MT={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},DT=Le.INFO,VT={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},LT=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=VT[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dy{constructor(e){this.name=e,this._logLevel=DT,this._logHandler=LT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const FT=(n,e)=>e.some(t=>n instanceof t);let um,cm;function UT(){return um||(um=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BT(){return cm||(cm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vy=new WeakMap,Sd=new WeakMap,Ly=new WeakMap,pd=new WeakMap,nf=new WeakMap;function qT(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ei(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Vy.set(t,n)}).catch(()=>{}),nf.set(e,n),e}function OT(n){if(Sd.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Sd.set(n,e)}let Cd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ly.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ei(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bT(n){Cd=n(Cd)}function GT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(md(this),e,...t);return Ly.set(r,e.sort?e.sort():[e]),ei(r)}:BT().includes(n)?function(...e){return n.apply(md(this),e),ei(Vy.get(this))}:function(...e){return ei(n.apply(md(this),e))}}function HT(n){return typeof n=="function"?GT(n):(n instanceof IDBTransaction&&OT(n),FT(n,UT())?new Proxy(n,Cd):n)}function ei(n){if(n instanceof IDBRequest)return qT(n);if(pd.has(n))return pd.get(n);const e=HT(n);return e!==n&&(pd.set(n,e),nf.set(e,n)),e}const md=n=>nf.get(n);function zT(n,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),h=ei(u);return r&&u.addEventListener("upgradeneeded",m=>{r(ei(u.result),m.oldVersion,m.newVersion,ei(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const $T=["get","getKey","getAll","getAllKeys","count"],WT=["put","add","delete","clear"],gd=new Map;function dm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gd.get(e))return gd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=WT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||$T.includes(t)))return;const l=async function(u,...h){const m=this.transaction(u,o?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),o&&m.done]))[0]};return gd.set(e,l),l}bT(n=>({...n,get:(e,t,r)=>dm(e,t)||n.get(e,t,r),has:(e,t)=>!!dm(e,t)||n.has(e,t)}));class KT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JT(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function JT(n){const e=n.getComponent();return e?.type==="VERSION"}const wd="@firebase/app",fm="0.10.13";const Ir=new Dy("@firebase/app"),QT="@firebase/app-compat",YT="@firebase/analytics-compat",XT="@firebase/analytics",ZT="@firebase/app-check-compat",jT="@firebase/app-check",e0="@firebase/auth",t0="@firebase/auth-compat",n0="@firebase/database",r0="@firebase/data-connect",i0="@firebase/database-compat",o0="@firebase/functions",s0="@firebase/functions-compat",l0="@firebase/installations",a0="@firebase/installations-compat",u0="@firebase/messaging",c0="@firebase/messaging-compat",d0="@firebase/performance",f0="@firebase/performance-compat",h0="@firebase/remote-config",p0="@firebase/remote-config-compat",m0="@firebase/storage",g0="@firebase/storage-compat",y0="@firebase/firestore",_0="@firebase/vertexai-preview",v0="@firebase/firestore-compat",E0="firebase",T0="10.14.1";const Ad="[DEFAULT]",I0={[wd]:"fire-core",[QT]:"fire-core-compat",[XT]:"fire-analytics",[YT]:"fire-analytics-compat",[jT]:"fire-app-check",[ZT]:"fire-app-check-compat",[e0]:"fire-auth",[t0]:"fire-auth-compat",[n0]:"fire-rtdb",[r0]:"fire-data-connect",[i0]:"fire-rtdb-compat",[o0]:"fire-fn",[s0]:"fire-fn-compat",[l0]:"fire-iid",[a0]:"fire-iid-compat",[u0]:"fire-fcm",[c0]:"fire-fcm-compat",[d0]:"fire-perf",[f0]:"fire-perf-compat",[h0]:"fire-rc",[p0]:"fire-rc-compat",[m0]:"fire-gcs",[g0]:"fire-gcs-compat",[y0]:"fire-fst",[v0]:"fire-fst-compat",[_0]:"fire-vertex","fire-js":"fire-js",[E0]:"fire-js-all"};const ou=new Map,S0=new Map,Rd=new Map;function hm(n,e){try{n.container.addComponent(e)}catch(t){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function su(n){const e=n.name;if(Rd.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Rd.set(e,n);for(const t of ou.values())hm(t,n);for(const t of S0.values())hm(t,n);return!0}function C0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const w0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new My("app","Firebase",w0);class A0{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ml("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const R0=T0;function Fy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ad,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw ti.create("bad-app-name",{appName:String(o)});if(t||(t=ky()),!t)throw ti.create("no-options");const l=ou.get(o);if(l){if(Id(t,l.options)&&Id(r,l.config))return l;throw ti.create("duplicate-app",{appName:o})}const u=new kT(o);for(const m of Rd.values())u.addComponent(m);const h=new A0(t,r,u);return ou.set(o,h),h}function P0(n=Ad){const e=ou.get(n);if(!e&&n===Ad&&ky())return Fy();if(!e)throw ti.create("no-app",{appName:n});return e}function Ho(n,e,t){var r;let o=(r=I0[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(h.join(" "));return}su(new ml(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const x0="firebase-heartbeat-database",N0=1,gl="firebase-heartbeat-store";let yd=null;function Uy(){return yd||(yd=zT(x0,N0,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ti.create("idb-open",{originalErrorMessage:n.message})})),yd}async function k0(n){try{const t=(await Uy()).transaction(gl),r=await t.objectStore(gl).get(By(n));return await t.done,r}catch(e){if(e instanceof ts)Ir.warn(e.message);else{const t=ti.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(t.message)}}}async function pm(n,e){try{const r=(await Uy()).transaction(gl,"readwrite");await r.objectStore(gl).put(e,By(n)),await r.done}catch(t){if(t instanceof ts)Ir.warn(t.message);else{const r=ti.create("idb-set",{originalErrorMessage:t?.message});Ir.warn(r.message)}}}function By(n){return`${n.name}!${n.options.appId}`}const M0=1024,D0=720*60*60*1e3;class V0{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new F0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=mm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=D0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mm(),{heartbeatsToSend:r,unsentEntries:o}=L0(this._heartbeatsCache.heartbeats),l=iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ir.warn(t),""}}}function mm(){return new Date().toISOString().substring(0,10)}function L0(n,e=M0){const t=[];let r=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),gm(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),gm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class F0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ST()?CT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await k0(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return pm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return pm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function gm(n){return iu(JSON.stringify({version:2,heartbeats:n})).length}function U0(n){su(new ml("platform-logger",e=>new KT(e),"PRIVATE")),su(new ml("heartbeat",e=>new V0(e),"PRIVATE")),Ho(wd,fm,n),Ho(wd,fm,"esm2017"),Ho("fire-js","")}U0("");var B0="firebase",q0="10.14.1";Ho(B0,q0,"app");var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Bi,qy;(function(){var n;function e(M,P){function R(){}R.prototype=P.prototype,M.D=P.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(k,L,O){for(var x=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)x[Fe-2]=arguments[Fe];return P.prototype[L].apply(k,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,P,R){R||(R=0);var k=Array(16);if(typeof P=="string")for(var L=0;16>L;++L)k[L]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(L=0;16>L;++L)k[L]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=M.g[0],R=M.g[1],L=M.g[2];var O=M.g[3],x=P+(O^R&(L^O))+k[0]+3614090360&4294967295;P=R+(x<<7&4294967295|x>>>25),x=O+(L^P&(R^L))+k[1]+3905402710&4294967295,O=P+(x<<12&4294967295|x>>>20),x=L+(R^O&(P^R))+k[2]+606105819&4294967295,L=O+(x<<17&4294967295|x>>>15),x=R+(P^L&(O^P))+k[3]+3250441966&4294967295,R=L+(x<<22&4294967295|x>>>10),x=P+(O^R&(L^O))+k[4]+4118548399&4294967295,P=R+(x<<7&4294967295|x>>>25),x=O+(L^P&(R^L))+k[5]+1200080426&4294967295,O=P+(x<<12&4294967295|x>>>20),x=L+(R^O&(P^R))+k[6]+2821735955&4294967295,L=O+(x<<17&4294967295|x>>>15),x=R+(P^L&(O^P))+k[7]+4249261313&4294967295,R=L+(x<<22&4294967295|x>>>10),x=P+(O^R&(L^O))+k[8]+1770035416&4294967295,P=R+(x<<7&4294967295|x>>>25),x=O+(L^P&(R^L))+k[9]+2336552879&4294967295,O=P+(x<<12&4294967295|x>>>20),x=L+(R^O&(P^R))+k[10]+4294925233&4294967295,L=O+(x<<17&4294967295|x>>>15),x=R+(P^L&(O^P))+k[11]+2304563134&4294967295,R=L+(x<<22&4294967295|x>>>10),x=P+(O^R&(L^O))+k[12]+1804603682&4294967295,P=R+(x<<7&4294967295|x>>>25),x=O+(L^P&(R^L))+k[13]+4254626195&4294967295,O=P+(x<<12&4294967295|x>>>20),x=L+(R^O&(P^R))+k[14]+2792965006&4294967295,L=O+(x<<17&4294967295|x>>>15),x=R+(P^L&(O^P))+k[15]+1236535329&4294967295,R=L+(x<<22&4294967295|x>>>10),x=P+(L^O&(R^L))+k[1]+4129170786&4294967295,P=R+(x<<5&4294967295|x>>>27),x=O+(R^L&(P^R))+k[6]+3225465664&4294967295,O=P+(x<<9&4294967295|x>>>23),x=L+(P^R&(O^P))+k[11]+643717713&4294967295,L=O+(x<<14&4294967295|x>>>18),x=R+(O^P&(L^O))+k[0]+3921069994&4294967295,R=L+(x<<20&4294967295|x>>>12),x=P+(L^O&(R^L))+k[5]+3593408605&4294967295,P=R+(x<<5&4294967295|x>>>27),x=O+(R^L&(P^R))+k[10]+38016083&4294967295,O=P+(x<<9&4294967295|x>>>23),x=L+(P^R&(O^P))+k[15]+3634488961&4294967295,L=O+(x<<14&4294967295|x>>>18),x=R+(O^P&(L^O))+k[4]+3889429448&4294967295,R=L+(x<<20&4294967295|x>>>12),x=P+(L^O&(R^L))+k[9]+568446438&4294967295,P=R+(x<<5&4294967295|x>>>27),x=O+(R^L&(P^R))+k[14]+3275163606&4294967295,O=P+(x<<9&4294967295|x>>>23),x=L+(P^R&(O^P))+k[3]+4107603335&4294967295,L=O+(x<<14&4294967295|x>>>18),x=R+(O^P&(L^O))+k[8]+1163531501&4294967295,R=L+(x<<20&4294967295|x>>>12),x=P+(L^O&(R^L))+k[13]+2850285829&4294967295,P=R+(x<<5&4294967295|x>>>27),x=O+(R^L&(P^R))+k[2]+4243563512&4294967295,O=P+(x<<9&4294967295|x>>>23),x=L+(P^R&(O^P))+k[7]+1735328473&4294967295,L=O+(x<<14&4294967295|x>>>18),x=R+(O^P&(L^O))+k[12]+2368359562&4294967295,R=L+(x<<20&4294967295|x>>>12),x=P+(R^L^O)+k[5]+4294588738&4294967295,P=R+(x<<4&4294967295|x>>>28),x=O+(P^R^L)+k[8]+2272392833&4294967295,O=P+(x<<11&4294967295|x>>>21),x=L+(O^P^R)+k[11]+1839030562&4294967295,L=O+(x<<16&4294967295|x>>>16),x=R+(L^O^P)+k[14]+4259657740&4294967295,R=L+(x<<23&4294967295|x>>>9),x=P+(R^L^O)+k[1]+2763975236&4294967295,P=R+(x<<4&4294967295|x>>>28),x=O+(P^R^L)+k[4]+1272893353&4294967295,O=P+(x<<11&4294967295|x>>>21),x=L+(O^P^R)+k[7]+4139469664&4294967295,L=O+(x<<16&4294967295|x>>>16),x=R+(L^O^P)+k[10]+3200236656&4294967295,R=L+(x<<23&4294967295|x>>>9),x=P+(R^L^O)+k[13]+681279174&4294967295,P=R+(x<<4&4294967295|x>>>28),x=O+(P^R^L)+k[0]+3936430074&4294967295,O=P+(x<<11&4294967295|x>>>21),x=L+(O^P^R)+k[3]+3572445317&4294967295,L=O+(x<<16&4294967295|x>>>16),x=R+(L^O^P)+k[6]+76029189&4294967295,R=L+(x<<23&4294967295|x>>>9),x=P+(R^L^O)+k[9]+3654602809&4294967295,P=R+(x<<4&4294967295|x>>>28),x=O+(P^R^L)+k[12]+3873151461&4294967295,O=P+(x<<11&4294967295|x>>>21),x=L+(O^P^R)+k[15]+530742520&4294967295,L=O+(x<<16&4294967295|x>>>16),x=R+(L^O^P)+k[2]+3299628645&4294967295,R=L+(x<<23&4294967295|x>>>9),x=P+(L^(R|~O))+k[0]+4096336452&4294967295,P=R+(x<<6&4294967295|x>>>26),x=O+(R^(P|~L))+k[7]+1126891415&4294967295,O=P+(x<<10&4294967295|x>>>22),x=L+(P^(O|~R))+k[14]+2878612391&4294967295,L=O+(x<<15&4294967295|x>>>17),x=R+(O^(L|~P))+k[5]+4237533241&4294967295,R=L+(x<<21&4294967295|x>>>11),x=P+(L^(R|~O))+k[12]+1700485571&4294967295,P=R+(x<<6&4294967295|x>>>26),x=O+(R^(P|~L))+k[3]+2399980690&4294967295,O=P+(x<<10&4294967295|x>>>22),x=L+(P^(O|~R))+k[10]+4293915773&4294967295,L=O+(x<<15&4294967295|x>>>17),x=R+(O^(L|~P))+k[1]+2240044497&4294967295,R=L+(x<<21&4294967295|x>>>11),x=P+(L^(R|~O))+k[8]+1873313359&4294967295,P=R+(x<<6&4294967295|x>>>26),x=O+(R^(P|~L))+k[15]+4264355552&4294967295,O=P+(x<<10&4294967295|x>>>22),x=L+(P^(O|~R))+k[6]+2734768916&4294967295,L=O+(x<<15&4294967295|x>>>17),x=R+(O^(L|~P))+k[13]+1309151649&4294967295,R=L+(x<<21&4294967295|x>>>11),x=P+(L^(R|~O))+k[4]+4149444226&4294967295,P=R+(x<<6&4294967295|x>>>26),x=O+(R^(P|~L))+k[11]+3174756917&4294967295,O=P+(x<<10&4294967295|x>>>22),x=L+(P^(O|~R))+k[2]+718787259&4294967295,L=O+(x<<15&4294967295|x>>>17),x=R+(O^(L|~P))+k[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(L+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+O&4294967295}r.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var R=P-this.blockSize,k=this.B,L=this.h,O=0;O<P;){if(L==0)for(;O<=R;)o(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<P;)if(k[L++]=M.charCodeAt(O++),L==this.blockSize){o(this,k),L=0;break}}else for(;O<P;)if(k[L++]=M[O++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=P},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var R=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=R&255,R/=256;for(this.u(M),M=Array(16),P=R=0;4>P;++P)for(var k=0;32>k;k+=8)M[R++]=this.g[P]>>>k&255;return M};function l(M,P){var R=h;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=P(M)}function u(M,P){this.h=P;for(var R=[],k=!0,L=M.length-1;0<=L;L--){var O=M[L]|0;k&&O==P||(R[L]=O,k=!1)}this.g=R}var h={};function m(M){return-128<=M&&128>M?l(M,function(P){return new u([P|0],0>P?-1:0)}):new u([M|0],0>M?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return T;if(0>M)return q(g(-M));for(var P=[],R=1,k=0;M>=R;k++)P[k]=M/R|0,R*=4294967296;return new u(P,0)}function y(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return q(y(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(P,8)),k=T,L=0;L<M.length;L+=8){var O=Math.min(8,M.length-L),x=parseInt(M.substring(L,L+O),P);8>O?(O=g(Math.pow(P,O)),k=k.j(O).add(g(x))):(k=k.j(R),k=k.add(g(x)))}return k}var T=m(0),I=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(U(this))return-q(this).m();for(var M=0,P=1,R=0;R<this.g.length;R++){var k=this.i(R);M+=(0<=k?k:4294967296+k)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(B(this))return"0";if(U(this))return"-"+q(this).toString(M);for(var P=g(Math.pow(M,6)),R=this,k="";;){var L=ie(R,P).g;R=K(R,L.j(P));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=L,B(R))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function B(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function U(M){return M.h==-1}n.l=function(M){return M=K(this,M),U(M)?-1:B(M)?0:1};function q(M){for(var P=M.g.length,R=[],k=0;k<P;k++)R[k]=~M.g[k];return new u(R,~M.h).add(I)}n.abs=function(){return U(this)?q(this):this},n.add=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0,L=0;L<=P;L++){var O=k+(this.i(L)&65535)+(M.i(L)&65535),x=(O>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);k=x>>>16,O&=65535,x&=65535,R[L]=x<<16|O}return new u(R,R[R.length-1]&-2147483648?-1:0)};function K(M,P){return M.add(q(P))}n.j=function(M){if(B(this)||B(M))return T;if(U(this))return U(M)?q(this).j(q(M)):q(q(this).j(M));if(U(M))return q(this.j(q(M)));if(0>this.l(A)&&0>M.l(A))return g(this.m()*M.m());for(var P=this.g.length+M.g.length,R=[],k=0;k<2*P;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<M.g.length;L++){var O=this.i(k)>>>16,x=this.i(k)&65535,Fe=M.i(L)>>>16,pt=M.i(L)&65535;R[2*k+2*L]+=x*pt,X(R,2*k+2*L),R[2*k+2*L+1]+=O*pt,X(R,2*k+2*L+1),R[2*k+2*L+1]+=x*Fe,X(R,2*k+2*L+1),R[2*k+2*L+2]+=O*Fe,X(R,2*k+2*L+2)}for(k=0;k<P;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=P;k<2*P;k++)R[k]=0;return new u(R,0)};function X(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function Q(M,P){this.g=M,this.h=P}function ie(M,P){if(B(P))throw Error("division by zero");if(B(M))return new Q(T,T);if(U(M))return P=ie(q(M),P),new Q(q(P.g),q(P.h));if(U(P))return P=ie(M,q(P)),new Q(q(P.g),P.h);if(30<M.g.length){if(U(M)||U(P))throw Error("slowDivide_ only works with positive integers.");for(var R=I,k=P;0>=k.l(M);)R=se(R),k=se(k);var L=le(R,1),O=le(k,1);for(k=le(k,2),R=le(R,2);!B(k);){var x=O.add(k);0>=x.l(M)&&(L=L.add(R),O=x),k=le(k,1),R=le(R,1)}return P=K(M,L.j(P)),new Q(L,P)}for(L=T;0<=M.l(P);){for(R=Math.max(1,Math.floor(M.m()/P.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=g(R),x=O.j(P);U(x)||0<x.l(M);)R-=k,O=g(R),x=O.j(P);B(O)&&(O=I),L=L.add(O),M=K(M,x)}return new Q(L,M)}n.A=function(M){return ie(this,M).h},n.and=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)&M.i(k);return new u(R,this.h&M.h)},n.or=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)|M.i(k);return new u(R,this.h|M.h)},n.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)^M.i(k);return new u(R,this.h^M.h)};function se(M){for(var P=M.g.length+1,R=[],k=0;k<P;k++)R[k]=M.i(k)<<1|M.i(k-1)>>>31;return new u(R,M.h)}function le(M,P){var R=P>>5;P%=32;for(var k=M.g.length-R,L=[],O=0;O<k;O++)L[O]=0<P?M.i(O+R)>>>P|M.i(O+R+1)<<32-P:M.i(O+R);return new u(L,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qy=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=y,Bi=u}).apply(typeof ym<"u"?ym:typeof self<"u"?self:typeof window<"u"?window:{});var Wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Oy,sl,by,Xa,Pd,Gy,Hy,zy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,S){return d==Array.prototype||d==Object.prototype||(d[v]=S.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wa=="object"&&Wa];for(var v=0;v<d.length;++v){var S=d[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function o(d,v){if(v)e:{var S=r;d=d.split(".");for(var w=0;w<d.length-1;w++){var G=d[w];if(!(G in S))break e;S=S[G]}d=d[d.length-1],w=S[d],v=v(w),v!=w&&v!=null&&e(S,d,{configurable:!0,writable:!0,value:v})}}function l(d,v){d instanceof String&&(d+="");var S=0,w=!1,G={next:function(){if(!w&&S<d.length){var W=S++;return{value:v(W,d[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(d){return d||function(){return l(this,function(v,S){return S})}});var u=u||{},h=this||self;function m(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function g(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function y(d,v,S){return d.call.apply(d.bind,arguments)}function T(d,v,S){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),d.apply(v,G)}}return function(){return d.apply(v,arguments)}}function I(d,v,S){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,I.apply(null,arguments)}function A(d,v){var S=Array.prototype.slice.call(arguments,1);return function(){var w=S.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function B(d,v){function S(){}S.prototype=v.prototype,d.aa=v.prototype,d.prototype=new S,d.prototype.constructor=d,d.Qb=function(w,G,W){for(var re=Array(arguments.length-2),He=2;He<arguments.length;He++)re[He-2]=arguments[He];return v.prototype[G].apply(w,re)}}function U(d){const v=d.length;if(0<v){const S=Array(v);for(let w=0;w<v;w++)S[w]=d[w];return S}return[]}function q(d,v){for(let S=1;S<arguments.length;S++){const w=arguments[S];if(m(w)){const G=d.length||0,W=w.length||0;d.length=G+W;for(let re=0;re<W;re++)d[G+re]=w[re]}else d.push(w)}}class K{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function X(d){return/^[\s\xa0]*$/.test(d)}function Q(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function ie(d){return ie[" "](d),d}ie[" "]=function(){};var se=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function le(d,v,S){for(const w in d)v.call(S,d[w],w,d)}function M(d,v){for(const S in d)v.call(void 0,d[S],S,d)}function P(d){const v={};for(const S in d)v[S]=d[S];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,v){let S,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(S in w)d[S]=w[S];for(let W=0;W<R.length;W++)S=R[W],Object.prototype.hasOwnProperty.call(w,S)&&(d[S]=w[S])}}function L(d){var v=1;d=d.split(":");const S=[];for(;0<v&&d.length;)S.push(d.shift()),v--;return d.length&&S.push(d.join(":")),S}function O(d){h.setTimeout(()=>{throw d},0)}function x(){var d=_e;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Fe{constructor(){this.h=this.g=null}add(v,S){const w=pt.get();w.set(v,S),this.h?this.h.next=w:this.g=w,this.h=w}}var pt=new K(()=>new Ke,d=>d.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,oe=!1,_e=new Fe,ce=()=>{const d=h.Promise.resolve(void 0);Ue=()=>{d.then(b)}};var b=()=>{for(var d;d=x();){try{d.h.call(d.g)}catch(S){O(S)}var v=pt;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}oe=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};h.addEventListener("test",S,v),h.removeEventListener("test",S,v)}catch{}return d})();function Re(d,v){if(ge.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var S=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(se){e:{try{ie(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else S=="mouseover"?v=d.fromElement:S=="mouseout"&&(v=d.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ke[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Re.aa.h.call(this)}}B(Re,ge);var ke={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Je(d,v,S,w,G){this.listener=d,this.proxy=null,this.src=v,this.type=S,this.capture=!!w,this.ha=G,this.key=++Ge,this.da=this.fa=!1}function It(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ir(d){this.src=d,this.g={},this.h=0}ir.prototype.add=function(d,v,S,w,G){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var re=Pr(d,v,w,G);return-1<re?(v=d[re],S||(v.fa=!1)):(v=new Je(v,this.src,W,!!w,G),v.fa=S,d.push(v)),v};function Wi(d,v){var S=v.type;if(S in d.g){var w=d.g[S],G=Array.prototype.indexOf.call(w,v,void 0),W;(W=0<=G)&&Array.prototype.splice.call(w,G,1),W&&(It(v),d.g[S].length==0&&(delete d.g[S],d.h--))}}function Pr(d,v,S,w){for(var G=0;G<d.length;++G){var W=d[G];if(!W.da&&W.listener==v&&W.capture==!!S&&W.ha==w)return G}return-1}var ai="closure_lm_"+(1e6*Math.random()|0),Ki={};function us(d,v,S,w,G){if(Array.isArray(v)){for(var W=0;W<v.length;W++)us(d,v[W],S,w,G);return null}return S=fs(S),d&&d[be]?d.K(v,S,g(w)?!!w.capture:!1,G):cs(d,v,S,!1,w,G)}function cs(d,v,S,w,G,W){if(!v)throw Error("Invalid event type");var re=g(G)?!!G.capture:!!G,He=Qi(d);if(He||(d[ai]=He=new ir(d)),S=He.add(v,S,w,re,W),S.proxy)return S;if(w=Nl(),S.proxy=w,w.src=d,w.listener=S,d.addEventListener)Ae||(G=re),G===void 0&&(G=!1),d.addEventListener(v.toString(),w,G);else if(d.attachEvent)d.attachEvent(sr(v.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Nl(){function d(S){return v.call(d.src,d.listener,S)}const v=ds;return d}function Ji(d,v,S,w,G){if(Array.isArray(v))for(var W=0;W<v.length;W++)Ji(d,v[W],S,w,G);else w=g(w)?!!w.capture:!!w,S=fs(S),d&&d[be]?(d=d.i,v=String(v).toString(),v in d.g&&(W=d.g[v],S=Pr(W,S,w,G),-1<S&&(It(W[S]),Array.prototype.splice.call(W,S,1),W.length==0&&(delete d.g[v],d.h--)))):d&&(d=Qi(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Pr(v,S,w,G)),(S=-1<d?v[d]:null)&&or(S))}function or(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[be])Wi(v.i,d);else{var S=d.type,w=d.proxy;v.removeEventListener?v.removeEventListener(S,w,d.capture):v.detachEvent?v.detachEvent(sr(S),w):v.addListener&&v.removeListener&&v.removeListener(w),(S=Qi(v))?(Wi(S,d),S.h==0&&(S.src=null,v[ai]=null)):It(d)}}}function sr(d){return d in Ki?Ki[d]:Ki[d]="on"+d}function ds(d,v){if(d.da)d=!0;else{v=new Re(v,this);var S=d.listener,w=d.ha||d.src;d.fa&&or(d),d=S.call(w,v)}return d}function Qi(d){return d=d[ai],d instanceof ir?d:null}var Yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function fs(d){return typeof d=="function"?d:(d[Yi]||(d[Yi]=function(v){return d.handleEvent(v)}),d[Yi])}function mt(){J.call(this),this.i=new ir(this),this.M=this,this.F=null}B(mt,J),mt.prototype[be]=!0,mt.prototype.removeEventListener=function(d,v,S,w){Ji(this,d,v,S,w)};function gt(d,v){var S,w=d.F;if(w)for(S=[];w;w=w.F)S.push(w);if(d=d.M,w=v.type||v,typeof v=="string")v=new ge(v,d);else if(v instanceof ge)v.target=v.target||d;else{var G=v;v=new ge(w,d),k(v,G)}if(G=!0,S)for(var W=S.length-1;0<=W;W--){var re=v.g=S[W];G=lr(re,w,!0,v)&&G}if(re=v.g=d,G=lr(re,w,!0,v)&&G,G=lr(re,w,!1,v)&&G,S)for(W=0;W<S.length;W++)re=v.g=S[W],G=lr(re,w,!1,v)&&G}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var S=d.g[v],w=0;w<S.length;w++)It(S[w]);delete d.g[v],d.h--}}this.F=null},mt.prototype.K=function(d,v,S,w){return this.i.add(String(d),v,!1,S,w)},mt.prototype.L=function(d,v,S,w){return this.i.add(String(d),v,!0,S,w)};function lr(d,v,S,w){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,W=0;W<v.length;++W){var re=v[W];if(re&&!re.da&&re.capture==S){var He=re.listener,yt=re.ha||re.src;re.fa&&Wi(d.i,re),G=He.call(yt,w)!==!1&&G}}return G&&!w.defaultPrevented}function hs(d,v,S){if(typeof d=="function")S&&(d=I(d,S));else if(d&&typeof d.handleEvent=="function")d=I(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(d,v||0)}function xr(d){d.g=hs(()=>{d.g=null,d.i&&(d.i=!1,xr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class ui extends J{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(d){J.call(this),this.h=d,this.g={}}B(ci,J);var ps=[];function ms(d){le(d.g,function(v,S){this.g.hasOwnProperty(S)&&or(v)},d),d.g={}}ci.prototype.N=function(){ci.aa.N.call(this),ms(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=h.JSON.stringify,ys=h.JSON.parse,_s=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function di(){}di.prototype.h=null;function Xi(d){return d.h||(d.h=d.i())}function Zi(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){ge.call(this,"d")}B(Hn,ge);function ji(){ge.call(this,"c")}B(ji,ge);var zn={},vs=null;function fi(){return vs=vs||new mt}zn.La="serverreachability";function Es(d){ge.call(this,zn.La,d)}B(Es,ge);function ar(d){const v=fi();gt(v,new Es(v))}zn.STAT_EVENT="statevent";function Ts(d,v){ge.call(this,zn.STAT_EVENT,d),this.stat=v}B(Ts,ge);function lt(d){const v=fi();gt(v,new Ts(v,d))}zn.Ma="timingevent";function eo(d,v){ge.call(this,zn.Ma,d),this.size=v}B(eo,ge);function Cn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function hi(){this.g=!0}hi.prototype.xa=function(){this.g=!1};function pi(d,v,S,w,G,W){d.info(function(){if(d.g)if(W)for(var re="",He=W.split("&"),yt=0;yt<He.length;yt++){var Me=He[yt].split("=");if(1<Me.length){var St=Me[0];Me=Me[1];var ct=St.split("_");re=2<=ct.length&&ct[1]=="type"?re+(St+"="+Me+"&"):re+(St+"=redacted&")}}else re=null;else re=W;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+v+`
`+S+`
`+re})}function to(d,v,S,w,G,W,re){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+v+`
`+S+`
`+W+" "+re})}function wn(d,v,S,w){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Uu(d,S)+(w?" "+w:"")})}function Is(d,v){d.info(function(){return"TIMEOUT: "+v})}hi.prototype.info=function(){};function Uu(d,v){if(!d.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(d=0;d<S.length;d++)if(Array.isArray(S[d])){var w=S[d];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var re=1;re<G.length;re++)G[re]=""}}}}return gs(S)}catch{return v}}var no={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},An;function mi(){}B(mi,di),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},An=new mi;function Rn(d,v,S,w){this.j=d,this.i=v,this.l=S,this.R=w||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ml}function Ml(){this.i=null,this.g="",this.h=!1}var Ss={},ro={};function io(d,v,S){d.L=1,d.v=Vr(on(v)),d.m=S,d.P=!0,Cs(d,null)}function Cs(d,v){d.F=Date.now(),Qe(d),d.A=on(d.v);var S=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),Fr(S.i,"t",w),d.C=0,S=d.j.J,d.h=new Ml,d.g=Yl(d.j,S?v:null,!d.m),0<d.O&&(d.M=new ui(I(d.Y,d,d.g),d.O)),v=d.U,S=d.g,w=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(ps[0]=G.toString()),G=ps);for(var W=0;W<G.length;W++){var re=us(S,G[W],w||v.handleEvent,!1,v.h||v);if(!re)break;v.g[re.key]=re}v=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),ar(),pi(d.i,d.u,d.A,d.l,d.R,d.m)}Rn.prototype.ca=function(d){d=d.target;const v=this.M;v&&Yt(d)==3?v.j():this.Y(d)},Rn.prototype.Y=function(d){try{if(d==this.g)e:{const ct=Yt(this.g);var v=this.g.Ba();const pn=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Ns(this.g)))){this.J||ct!=4||v==7||(v==8||0>=pn?ar(3):ar(2)),gi(this);var S=this.g.Z();this.X=S;t:if(Dl(this)){var w=Ns(this.g);d="";var G=w.length,W=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Nr(this);var re="";break t}this.h.i=new h.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,d+=this.h.i.decode(w[v],{stream:!(W&&v==G-1)});w.length=0,this.h.g+=d,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=S==200,to(this.i,this.u,this.A,this.l,this.R,ct,S),this.o){if(this.T&&!this.K){t:{if(this.g){var He,yt=this.g;if((He=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(He)){var Me=He;break t}}Me=null}if(S=Me)wn(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ws(this,S);else{this.o=!1,this.s=3,lt(12),fn(this),Nr(this);break e}}if(this.P){S=!0;let ln;for(;!this.J&&this.C<re.length;)if(ln=Bu(this,re),ln==ro){ct==4&&(this.s=4,lt(14),S=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Ss){this.s=4,lt(15),wn(this.i,this.l,re,"[Invalid Chunk]"),S=!1;break}else wn(this.i,this.l,ln,null),ws(this,ln);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||re.length!=0||this.h.h||(this.s=1,lt(16),S=!1),this.o=this.o&&S,!S)wn(this.i,this.l,re,"[Invalid Chunked Response]"),fn(this),Nr(this);else if(0<re.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Ms(St),St.M=!0,lt(11))}}else wn(this.i,this.l,re,null),ws(this,re);ct==4&&fn(this),this.o&&!this.J&&(ct==4?go(this.j,this):(this.o=!1,Qe(this)))}else co(this.g),S==400&&0<re.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),fn(this),Nr(this)}}}catch{}finally{}};function Dl(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Bu(d,v){var S=d.C,w=v.indexOf(`
`,S);return w==-1?ro:(S=Number(v.substring(S,w)),isNaN(S)?Ss:(w+=1,w+S>v.length?ro:(v=v.slice(w,w+S),d.C=w+S,v)))}Rn.prototype.cancel=function(){this.J=!0,fn(this)};function Qe(d){d.S=Date.now()+d.I,Vl(d,d.I)}function Vl(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Cn(I(d.ba,d),v)}function gi(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Rn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Is(this.i,this.A),this.L!=2&&(ar(),lt(17)),fn(this),this.s=2,Nr(this)):Vl(this,this.S-d)};function Nr(d){d.j.G==0||d.J||go(d.j,d)}function fn(d){gi(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,ms(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function ws(d,v){try{var S=d.j;if(S.G!=0&&(S.g==d||$t(S.h,d))){if(!d.K&&$t(S.h,d)&&S.G==3){try{var w=S.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<d.F)mo(S),Mn(S);else break e;po(S),lt(18)}}else S.za=G[1],0<S.za-S.T&&37500>G[2]&&S.F&&S.v==0&&!S.C&&(S.C=Cn(I(S.Za,S),6e3));if(1>=Fl(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else hr(S,11)}else if((d.K||S.g==d)&&mo(S),!X(v))for(G=S.Da.g.parse(v),v=0;v<G.length;v++){let Me=G[v];if(S.T=Me[0],Me=Me[1],S.G==2)if(Me[0]=="c"){S.K=Me[1],S.ia=Me[2];const St=Me[3];St!=null&&(S.la=St,S.j.info("VER="+S.la));const ct=Me[4];ct!=null&&(S.Aa=ct,S.j.info("SVER="+S.Aa));const pn=Me[5];pn!=null&&typeof pn=="number"&&0<pn&&(w=1.5*pn,S.L=w,S.j.info("backChannelRequestTimeoutMs_="+w)),w=S;const ln=d.g;if(ln){const Si=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var W=w.h;W.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(As(W,W.h),W.h=null))}if(w.D){const _o=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(w.ya=_o,We(w.I,w.D,_o))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-d.F,S.j.info("Handshake RTT: "+S.R+"ms")),w=S;var re=d;if(w.qa=Ql(w,w.J?w.ia:null,w.W),re.K){Ul(w.h,re);var He=re,yt=w.L;yt&&(He.I=yt),He.B&&(gi(He),Qe(He)),w.g=re}else Ii(w);0<S.i.length&&Jn(S)}else Me[0]!="stop"&&Me[0]!="close"||hr(S,7);else S.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?hr(S,7):xt(S):Me[0]!="noop"&&S.l&&S.l.ta(Me),S.v=0)}}ar(4)}catch{}}var Ll=class{constructor(d,v){this.g=d,this.map=v}};function yi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Fl(d){return d.h?1:d.g?d.g.size:0}function $t(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function As(d,v){d.g?d.g.add(v):d.h=v}function Ul(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}yi.prototype.cancel=function(){if(this.i=Bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const S of d.g.values())v=v.concat(S.D);return v}return U(d.i)}function oo(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(m(d)){for(var v=[],S=d.length,w=0;w<S;w++)v.push(d[w]);return v}v=[],S=0;for(w in d)v[S++]=d[w];return v}function so(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(m(d)||typeof d=="string"){var v=[];d=d.length;for(var S=0;S<d;S++)v.push(S);return v}v=[],S=0;for(const w in d)v[S++]=w;return v}}}function kr(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(m(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var S=so(d),w=oo(d),G=w.length,W=0;W<G;W++)v.call(void 0,w[W],S&&S[W],d)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qu(d,v){if(d){d=d.split("&");for(var S=0;S<d.length;S++){var w=d[S].indexOf("="),G=null;if(0<=w){var W=d[S].substring(0,w);G=d[S].substring(w+1)}else W=d[S];v(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ur(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ur){this.h=d.h,vi(this,d.j),this.o=d.o,this.g=d.g,Mr(this,d.s),this.l=d.l;var v=d.i,S=new $n;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Dr(this,S),this.m=d.m}else d&&(v=String(d).match(_i))?(this.h=!1,vi(this,v[1]||"",!0),this.o=Ne(v[2]||""),this.g=Ne(v[3]||"",!0),Mr(this,v[4]),this.l=Ne(v[5]||"",!0),Dr(this,v[6]||"",!0),this.m=Ne(v[7]||"")):(this.h=!1,this.i=new $n(null,this.h))}ur.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Lr(v,lo,!0),":");var S=this.g;return(S||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Lr(v,lo,!0),"@"),d.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&d.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(Lr(S,S.charAt(0)=="/"?bl:Ol,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",Lr(S,Rs)),d.join("")};function on(d){return new ur(d)}function vi(d,v,S){d.j=S?Ne(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Mr(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Dr(d,v,S){v instanceof $n?(d.i=v,Wn(d.i,d.h)):(S||(v=Lr(v,Gl)),d.i=new $n(v,d.h))}function We(d,v,S){d.i.set(v,S)}function Vr(d){return We(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ne(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Lr(d,v,S){return typeof d=="string"?(d=encodeURI(d).replace(v,ql),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ql(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var lo=/[#\/\?@]/g,Ol=/[#\?:]/g,bl=/[#\?]/g,Gl=/[#\?@]/g,Rs=/#/g;function $n(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Pt(d){d.g||(d.g=new Map,d.h=0,d.i&&qu(d.i,function(v,S){d.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=$n.prototype,n.add=function(d,v){Pt(this),this.i=null,d=hn(this,d);var S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(v),this.h+=1,this};function Pn(d,v){Pt(d),v=hn(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function xn(d,v){return Pt(d),v=hn(d,v),d.g.has(v)}n.forEach=function(d,v){Pt(this),this.g.forEach(function(S,w){S.forEach(function(G){d.call(v,G,w,this)},this)},this)},n.na=function(){Pt(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let w=0;w<v.length;w++){const G=d[w];for(let W=0;W<G.length;W++)S.push(v[w])}return S},n.V=function(d){Pt(this);let v=[];if(typeof d=="string")xn(this,d)&&(v=v.concat(this.g.get(hn(this,d))));else{d=Array.from(this.g.values());for(let S=0;S<d.length;S++)v=v.concat(d[S])}return v},n.set=function(d,v){return Pt(this),this.i=null,d=hn(this,d),xn(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Fr(d,v,S){Pn(d,v),0<S.length&&(d.i=null,d.g.set(hn(d,v),U(S)),d.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var w=v[S];const W=encodeURIComponent(String(w)),re=this.V(w);for(w=0;w<re.length;w++){var G=W;re[w]!==""&&(G+="="+encodeURIComponent(String(re[w]))),d.push(G)}}return this.i=d.join("&")};function hn(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Wn(d,v){v&&!d.j&&(Pt(d),d.i=null,d.g.forEach(function(S,w){var G=w.toLowerCase();w!=G&&(Pn(this,w),Fr(this,G,S))},d)),d.j=v}function Ou(d,v){const S=new hi;if(h.Image){const w=new Image;w.onload=A(Qt,S,"TestLoadImage: loaded",!0,v,w),w.onerror=A(Qt,S,"TestLoadImage: error",!1,v,w),w.onabort=A(Qt,S,"TestLoadImage: abort",!1,v,w),w.ontimeout=A(Qt,S,"TestLoadImage: timeout",!1,v,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else v(!1)}function Hl(d,v){const S=new hi,w=new AbortController,G=setTimeout(()=>{w.abort(),Qt(S,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:w.signal}).then(W=>{clearTimeout(G),W.ok?Qt(S,"TestPingServer: ok",!0,v):Qt(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Qt(S,"TestPingServer: error",!1,v)})}function Qt(d,v,S,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(S)}catch{}}function bu(){this.g=new _s}function zl(d,v,S){const w=S||"";try{kr(d,function(G,W){let re=G;g(G)&&(re=gs(G)),v.push(w+W+"="+encodeURIComponent(re))})}catch(G){throw v.push(w+"type="+encodeURIComponent("_badmap")),G}}function cr(d){this.l=d.Ub||null,this.j=d.eb||!1}B(cr,di),cr.prototype.g=function(){return new Ei(this.l,this.j)},cr.prototype.i=(function(d){return function(){return d}})({});function Ei(d,v){mt.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Ei,mt),n=Ei.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,kn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nn(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Nn(this):kn(this),this.readyState==3&&$l(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Nn(this))},n.Qa=function(d){this.g&&(this.response=d,Nn(this))},n.ga=function(){this.g&&Nn(this)};function Nn(d){d.readyState=4,d.l=null,d.j=null,d.v=null,kn(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=v.next();return d.join(`\r
`)};function kn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function dr(d){let v="";return le(d,function(S,w){v+=w,v+=":",v+=S,v+=`\r
`}),v}function Ur(d,v,S){e:{for(w in S){var w=!1;break e}w=!0}w||(S=dr(S),typeof d=="string"?S!=null&&encodeURIComponent(String(S)):We(d,v,S))}function et(d){mt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(et,mt);var Gu=/^https?$/i,Ps=["POST","PUT"];n=et.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,S,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():An.g(),this.v=this.o?Xi(this.o):Xi(An),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(W){Ti(this,W);return}if(d=S||"",S=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)S.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())S.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(S.keys()).find(W=>W.toLowerCase()=="content-type"),G=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ps,v,void 0))||w||G||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,re]of S)this.g.setRequestHeader(W,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uo(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){Ti(this,W)}};function Ti(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,ao(d),sn(d)}function ao(d){d.A||(d.A=!0,gt(d,"complete"),gt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,gt(this,"complete"),gt(this,"abort"),sn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sn(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xs(this):this.bb())},n.bb=function(){xs(this)};function xs(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Yt(d)!=4||d.Z()!=2)){if(d.u&&Yt(d)==4)hs(d.Ea,0,d);else if(gt(d,"readystatechange"),Yt(d)==4){d.h=!1;try{const re=d.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var w;if(w=re===0){var G=String(d.D).match(_i)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),w=!Gu.test(G?G.toLowerCase():"")}S=w}if(S)gt(d,"complete"),gt(d,"success");else{d.m=6;try{var W=2<Yt(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",ao(d)}}finally{sn(d)}}}}function sn(d,v){if(d.g){uo(d);const S=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||gt(d,"ready");try{S.onreadystatechange=w}catch{}}}function uo(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Yt(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ys(v)}};function Ns(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function co(d){const v={};d=(d.g&&2<=Yt(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(X(d[w]))continue;var S=L(d[w]);const G=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const W=v[G]||[];v[G]=W,W.push(S)}M(v,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(d,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||v}function ks(d){this.Aa=0,this.i=[],this.j=new hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kn("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kn("baseRetryDelayMs",5e3,d),this.cb=Kn("retryDelaySeedMs",1e4,d),this.Wa=Kn("forwardChannelMaxRetries",2,d),this.wa=Kn("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(d&&d.concurrentRequestLimit),this.Da=new bu,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ks.prototype,n.la=8,n.G=1,n.connect=function(d,v,S,w){lt(0),this.W=d,this.H=v||{},S&&w!==void 0&&(this.H.OSID=S,this.H.OAID=w),this.F=this.X,this.I=Ql(this,null,this.W),Jn(this)};function xt(d){if(fo(d),d.G==3){var v=d.U++,S=on(d.I);if(We(S,"SID",d.K),We(S,"RID",v),We(S,"TYPE","terminate"),fr(d,S),v=new Rn(d,d.j,v),v.L=2,v.v=Vr(on(S)),S=!1,h.navigator&&h.navigator.sendBeacon)try{S=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&h.Image&&(new Image().src=v.v,S=!0),S||(v.g=Yl(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Qe(v)}Jl(d)}function Mn(d){d.g&&(Ms(d),d.g.cancel(),d.g=null)}function fo(d){Mn(d),d.u&&(h.clearTimeout(d.u),d.u=null),mo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function Jn(d){if(!rn(d.h)&&!d.s){d.s=!0;var v=d.Ga;Ue||ce(),oe||(Ue(),oe=!0),_e.add(v,d),d.B=0}}function Hu(d,v){return Fl(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Cn(I(d.Ga,d,v),Kl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new Rn(this,this.j,d);let W=this.o;if(this.S&&(W?(W=P(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var w=this.i[S];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Br(this,G,v),S=on(this.I),We(S,"RID",d),We(S,"CVER",22),this.D&&We(S,"X-HTTP-Session-Id",this.D),fr(this,S),W&&(this.O?v="headers="+encodeURIComponent(String(dr(W)))+"&"+v:this.m&&Ur(S,this.m,W)),As(this.h,G),this.Ua&&We(S,"TYPE","init"),this.P?(We(S,"$req",v),We(S,"SID","null"),G.T=!0,io(G,S,null)):io(G,S,v),this.G=2}}else this.G==3&&(d?ho(this,d):this.i.length==0||rn(this.h)||ho(this))};function ho(d,v){var S;v?S=v.l:S=d.U++;const w=on(d.I);We(w,"SID",d.K),We(w,"RID",S),We(w,"AID",d.T),fr(d,w),d.m&&d.o&&Ur(w,d.m,d.o),S=new Rn(d,d.j,S,d.B+1),d.m===null&&(S.H=d.o),v&&(d.i=v.D.concat(d.i)),v=Br(d,S,1e3),S.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),As(d.h,S),io(S,w,v)}function fr(d,v){d.H&&le(d.H,function(S,w){We(v,w,S)}),d.l&&kr({},function(S,w){We(v,w,S)})}function Br(d,v,S){S=Math.min(d.i.length,S);var w=d.l?I(d.l.Na,d.l,d):null;e:{var G=d.i;let W=-1;for(;;){const re=["count="+S];W==-1?0<S?(W=G[0].g,re.push("ofs="+W)):W=0:re.push("ofs="+W);let He=!0;for(let yt=0;yt<S;yt++){let Me=G[yt].g;const St=G[yt].map;if(Me-=W,0>Me)W=Math.max(0,G[yt].g-100),He=!1;else try{zl(St,re,"req"+Me+"_")}catch{w&&w(St)}}if(He){w=re.join("&");break e}}}return d=d.i.splice(0,S),v.D=d,w}function Ii(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Ue||ce(),oe||(Ue(),oe=!0),_e.add(v,d),d.v=0}}function po(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Cn(I(d.Fa,d),Kl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Cn(I(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Mn(this),Wl(this))};function Ms(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function Wl(d){d.g=new Rn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=on(d.qa);We(v,"RID","rpc"),We(v,"SID",d.K),We(v,"AID",d.T),We(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&We(v,"TO",d.ja),We(v,"TYPE","xmlhttp"),fr(d,v),d.m&&d.o&&Ur(v,d.m,d.o),d.L&&(d.g.I=d.L);var S=d.g;d=d.ia,S.L=1,S.v=Vr(on(v)),S.m=null,S.P=!0,Cs(S,d)}n.Za=function(){this.C!=null&&(this.C=null,Mn(this),po(this),lt(19))};function mo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function go(d,v){var S=null;if(d.g==v){mo(d),Ms(d),d.g=null;var w=2}else if($t(d.h,v))S=v.D,Ul(d.h,v),w=1;else return;if(d.G!=0){if(v.o)if(w==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var G=d.B;w=fi(),gt(w,new eo(w,S)),Jn(d)}else Ii(d);else if(G=v.s,G==3||G==0&&0<v.X||!(w==1&&Hu(d,v)||w==2&&po(d)))switch(S&&0<S.length&&(v=d.h,v.i=v.i.concat(S)),G){case 1:hr(d,5);break;case 4:hr(d,10);break;case 3:hr(d,6);break;default:hr(d,2)}}}function Kl(d,v){let S=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(S*=2),S*v}function hr(d,v){if(d.j.info("Error code "+v),v==2){var S=I(d.fb,d),w=d.Xa;const G=!w;w=new ur(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||vi(w,"https"),Vr(w),G?Ou(w.toString(),S):Hl(w.toString(),S)}else lt(2);d.G=0,d.l&&d.l.sa(v),Jl(d),fo(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Jl(d){if(d.G=0,d.ka=[],d.l){const v=Bl(d.h);(v.length!=0||d.i.length!=0)&&(q(d.ka,v),q(d.ka,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.ra()}}function Ql(d,v,S){var w=S instanceof ur?on(S):new ur(S);if(w.g!="")v&&(w.g=v+"."+w.g),Mr(w,w.s);else{var G=h.location;w=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var W=new ur(null);w&&vi(W,w),v&&(W.g=v),G&&Mr(W,G),S&&(W.l=S),w=W}return S=d.D,v=d.ya,S&&v&&We(w,S,v),We(w,"VER",d.la),fr(d,w),w}function Yl(d,v,S){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new et(new cr({eb:S})):new et(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ds(){}n=Ds.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function yo(){}yo.prototype.g=function(d,v){return new Wt(d,v)};function Wt(d,v){mt.call(this),this.g=new ks(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!X(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!X(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Qn(this)}B(Wt,mt),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){xt(this.g)},Wt.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.u&&(S={},S.__data__=gs(d),d=S);v.i.push(new Ll(v.Ya++,d)),v.G==3&&Jn(v)},Wt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,Wt.aa.N.call(this)};function Xl(d){Hn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const S in v){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}B(Xl,Hn);function Zl(){ji.call(this),this.status=1}B(Zl,ji);function Qn(d){this.g=d}B(Qn,Ds),Qn.prototype.ua=function(){gt(this.g,"a")},Qn.prototype.ta=function(d){gt(this.g,new Xl(d))},Qn.prototype.sa=function(d){gt(this.g,new Zl)},Qn.prototype.ra=function(){gt(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,zy=function(){return new yo},Hy=function(){return fi()},Gy=zn,Pd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,Xa=no,kl.COMPLETE="complete",by=kl,Zi.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,sl=Zi,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,Oy=et}).apply(typeof Wa<"u"?Wa:typeof self<"u"?self:typeof window<"u"?window:{});const _m="@firebase/firestore";class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let ns="10.14.0";const qi=new Dy("@firebase/firestore");function il(){return qi.logLevel}function pe(n,...e){if(qi.logLevel<=Le.DEBUG){const t=e.map(rf);qi.debug(`Firestore (${ns}): ${n}`,...t)}}function Sr(n,...e){if(qi.logLevel<=Le.ERROR){const t=e.map(rf);qi.error(`Firestore (${ns}): ${n}`,...t)}}function Jo(n,...e){if(qi.logLevel<=Le.WARN){const t=e.map(rf);qi.warn(`Firestore (${ns}): ${n}`,...t)}}function rf(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n="Unexpected state"){const e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+n;throw Sr(e),new Error(e)}function $e(n,e){n||Se()}function we(n,e){return n}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $y{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class b0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class G0{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0);let r=this.i;const o=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ni,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},h=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ni)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new $y(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Gt(e)}}class H0{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z0{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new H0(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){$e(this.o===void 0);const r=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string"),this.R=t.token,new $0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function K0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=K0(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function qe(n,e){return n<e?-1:n>e?1:0}function Qo(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}class Tt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Tt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Tt(0,0))}static max(){return new Ce(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return yl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),u=t.get(o);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nt extends yl{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const J0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends yl{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return J0.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new ye(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ye(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ye(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(r+=h,o++):(l(),o++)}if(l(),u)throw new ye(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(nt.fromString(e))}static fromName(e){return new Te(nt.fromString(e).popFirst(5))}static empty(){return new Te(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new nt(e.slice()))}}function Q0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(r===1e9?new Tt(t+1,0):new Tt(t,r));return new ii(o,Te.empty(),e)}function Y0(n){return new ii(n.readTime,n.key,-1)}class ii{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ii(Ce.min(),Te.empty(),-1)}static max(){return new ii(Ce.max(),Te.empty(),-1)}}function X0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}const Z0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Sl(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==Z0)throw n;pe("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let o=0,l=0,u=!1;e.forEach((h=>{++o,h.next((()=>{++l,u&&l===o&&t()}),(m=>r(m)))})),u=!0,l===o&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((o=>o?j.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,o)=>{const l=e.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{u[g]=y,++h,h===l&&r(u)}),(y=>o(y)))}}))}static doWhile(e,t){return new j(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}function eI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cl(n){return n.name==="IndexedDbTransactionError"}class of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}of.oe=-1;function Eu(n){return n==null}function lu(n){return n===0&&1/n==-1/0}function tI(n){return typeof n=="number"&&Number.isInteger(n)&&!lu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function vm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ky(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Dt(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,o,l){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Em(this.data.getIterator())}getIteratorFrom(e){return new Em(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class Em{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Lt(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Jy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Jy("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const nI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(n){if($e(!!n),typeof n=="string"){let e=0;const t=nI.exec(n);if($e(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oi(n){return typeof n=="string"?Ft.fromBase64String(n):Ft.fromUint8Array(n)}function sf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function lf(n){const e=n.mapValue.fields.__previous_value__;return sf(e)?lf(e):e}function _l(n){const e=oi(n.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}class rI{constructor(e,t,r,o,l,u,h,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g}}class vl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}const Ja={mapValue:{}};function bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sf(n)?4:oI(n)?9007199254740991:iI(n)?10:11:Se()}function nr(n,e){if(n===e)return!0;const t=bi(n);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _l(n).isEqual(_l(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=oi(o.timestampValue),h=oi(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Oi(o.bytesValue).isEqual(Oi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=ut(o.doubleValue),h=ut(l.doubleValue);return u===h?lu(u)===lu(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Qo(n.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},h=l.mapValue.fields||{};if(vm(u)!==vm(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!nr(u[m],h[m])))return!1;return!0})(n,e);default:return Se()}}function El(n,e){return(n.values||[]).find((t=>nr(t,e)))!==void 0}function Yo(n,e){if(n===e)return 0;const t=bi(n),r=bi(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=ut(l.integerValue||l.doubleValue),m=ut(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return Tm(n.timestampValue,e.timestampValue);case 4:return Tm(_l(n),_l(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=Oi(l),m=Oi(u);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),m=u.split("/");for(let g=0;g<h.length&&g<m.length;g++){const y=qe(h[g],m[g]);if(y!==0)return y}return qe(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=qe(ut(l.latitude),ut(u.latitude));return h!==0?h:qe(ut(l.longitude),ut(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Im(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var h,m,g,y;const T=l.fields||{},I=u.fields||{},A=(h=T.value)===null||h===void 0?void 0:h.arrayValue,B=(m=I.value)===null||m===void 0?void 0:m.arrayValue,U=qe(((g=A?.values)===null||g===void 0?void 0:g.length)||0,((y=B?.values)===null||y===void 0?void 0:y.length)||0);return U!==0?U:Im(A,B)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Ja.mapValue&&u===Ja.mapValue)return 0;if(l===Ja.mapValue)return 1;if(u===Ja.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),g=u.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let T=0;T<m.length&&T<y.length;++T){const I=qe(m[T],y[T]);if(I!==0)return I;const A=Yo(h[m[T]],g[y[T]]);if(A!==0)return A}return qe(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Se()}}function Tm(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=oi(n),r=oi(e),o=qe(t.seconds,r.seconds);return o!==0?o:qe(t.nanos,r.nanos)}function Im(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Yo(t[o],r[o]);if(l)return l}return qe(t.length,r.length)}function Xo(n){return xd(n)}function xd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=oi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Oi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=xd(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of r)l?l=!1:o+=",",o+=`${u}:${xd(t.fields[u])}`;return o+"}"})(n.mapValue):Se()}function Nd(n){return!!n&&"integerValue"in n}function af(n){return!!n&&"arrayValue"in n}function Sm(n){return!!n&&"nullValue"in n}function Cm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Za(n){return!!n&&"mapValue"in n}function iI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ul(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ul(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ul(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Za(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=Vt.emptyPath(),r={},o=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,o),r={},o=[],t=h.popLast()}u?r[h.lastSegment()]=ul(u):o.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Za(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Za(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){rs(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new Tn(ul(this.value))}}function Qy(n){const e=[];return rs(n.fields,((t,r)=>{const o=new Vt([t]);if(Za(r)){const l=Qy(r.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new qn(e)}class Ht{constructor(e,t,r,o,l,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Ht(e,0,Ce.min(),Ce.min(),Ce.min(),Tn.empty(),0)}static newFoundDocument(e,t,r,o){return new Ht(e,1,t,Ce.min(),r,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,Ce.min(),Ce.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,Ce.min(),Ce.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class au{constructor(e,t){this.position=e,this.inclusive=t}}function wm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?r=Te.comparator(Te.fromName(u.referenceValue),t.key):r=Yo(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Am(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nr(n.position[t],e.position[t]))return!1;return!0}class uu{constructor(e,t="asc"){this.field=e,this.dir=t}}function sI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Yy{}class Et extends Yy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new aI(e,t,r):t==="array-contains"?new dI(e,r):t==="in"?new fI(e,r):t==="not-in"?new hI(e,r):t==="array-contains-any"?new pI(e,r):new Et(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uI(e,r):new cI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Yo(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(Yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends Yy{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rr(e,t)}matches(e){return Xy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xy(n){return n.op==="and"}function Zy(n){return lI(n)&&Xy(n)}function lI(n){for(const e of n.filters)if(e instanceof rr)return!1;return!0}function kd(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(Zy(n))return n.filters.map((e=>kd(e))).join(",");{const e=n.filters.map((t=>kd(t))).join(",");return`${n.op}(${e})`}}function jy(n,e){return n instanceof Et?(function(r,o){return o instanceof Et&&r.op===o.op&&r.field.isEqual(o.field)&&nr(r.value,o.value)})(n,e):n instanceof rr?(function(r,o){return o instanceof rr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,u,h)=>l&&jy(u,o.filters[h])),!0):!1})(n,e):void Se()}function e_(n){return n instanceof Et?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`})(n):n instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(e_).join(" ,")+"}"})(n):"Filter"}class aI extends Et{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class uI extends Et{constructor(e,t){super(e,"in",t),this.keys=t_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cI extends Et{constructor(e,t){super(e,"not-in",t),this.keys=t_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function t_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class dI extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return af(t)&&El(t.arrayValue,this.value)}}class fI extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&El(this.value.arrayValue,t)}}class hI extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!El(this.value.arrayValue,t)}}class pI extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!af(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>El(this.value.arrayValue,r)))}}class mI{constructor(e,t=null,r=[],o=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=u,this.endAt=h,this.ue=null}}function Rm(n,e=null,t=[],r=[],o=null,l=null,u=null){return new mI(n,e,t,r,o,l,u)}function uf(n){const e=we(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>kd(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Eu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Xo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Xo(r))).join(",")),e.ue=t}return e.ue}function cf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jy(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Am(n.startAt,e.startAt)&&Am(n.endAt,e.endAt)}function Md(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Tu{constructor(e,t=null,r=[],o=[],l=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gI(n,e,t,r,o,l,u,h){return new Tu(n,e,t,r,o,l,u,h)}function n_(n){return new Tu(n)}function Pm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yI(n){return n.collectionGroup!==null}function cl(n){const e=we(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Lt(Vt.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new uu(l,r))})),t.has(Vt.keyField().canonicalString())||e.ce.push(new uu(Vt.keyField(),r))}return e.ce}function er(n){const e=we(n);return e.le||(e.le=_I(e,cl(n))),e.le}function _I(n,e){if(n.limitType==="F")return Rm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new uu(o.field,l)}));const t=n.endAt?new au(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new au(n.startAt.position,n.startAt.inclusive):null;return Rm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dd(n,e,t){return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Iu(n,e){return cf(er(n),er(e))&&n.limitType===e.limitType}function r_(n){return`${uf(er(n))}|lt:${n.limitType}`}function qo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>e_(o))).join(", ")}]`),Eu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Xo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Xo(o))).join(",")),`Target(${r})`})(er(n))}; limitType=${n.limitType})`}function Su(n,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Te.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,o){for(const l of cl(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(u,h,m){const g=wm(u,h,m);return u.inclusive?g<=0:g<0})(r.startAt,cl(r),o)||r.endAt&&!(function(u,h,m){const g=wm(u,h,m);return u.inclusive?g>=0:g>0})(r.endAt,cl(r),o))})(n,e)}function vI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function i_(n){return(e,t)=>{let r=!1;for(const o of cl(n)){const l=EI(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function EI(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,u,h){const m=u.data.field(l),g=h.data.field(l);return m!==null&&g!==null?Yo(m,g):Se()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}class is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){rs(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return Ky(this.inner)}size(){return this.innerSize}}const TI=new ot(Te.comparator);function Cr(){return TI}const o_=new ot(Te.comparator);function ll(...n){let e=o_;for(const t of n)e=e.insert(t.key,t);return e}function s_(n){let e=o_;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ui(){return dl()}function l_(){return dl()}function dl(){return new is((n=>n.toString()),((n,e)=>n.isEqual(e)))}const II=new ot(Te.comparator),SI=new Lt(Te.comparator);function xe(...n){let e=SI;for(const t of n)e=e.add(t);return e}const CI=new Lt(qe);function wI(){return CI}function df(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(e)?"-0":e}}function a_(n){return{integerValue:""+n}}function AI(n,e){return tI(e)?a_(e):df(n,e)}class Cu{constructor(){this._=void 0}}function RI(n,e,t){return n instanceof cu?(function(o,l){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&sf(l)&&(l=lf(l)),l&&(u.fields.__previous_value__=l),{mapValue:u}})(t,e):n instanceof Tl?c_(n,e):n instanceof Il?d_(n,e):(function(o,l){const u=u_(o,l),h=xm(u)+xm(o.Pe);return Nd(u)&&Nd(o.Pe)?a_(h):df(o.serializer,h)})(n,e)}function PI(n,e,t){return n instanceof Tl?c_(n,e):n instanceof Il?d_(n,e):t}function u_(n,e){return n instanceof du?(function(r){return Nd(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class cu extends Cu{}class Tl extends Cu{constructor(e){super(),this.elements=e}}function c_(n,e){const t=f_(e);for(const r of n.elements)t.some((o=>nr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Il extends Cu{constructor(e){super(),this.elements=e}}function d_(n,e){let t=f_(e);for(const r of n.elements)t=t.filter((o=>!nr(o,r)));return{arrayValue:{values:t}}}class du extends Cu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function xm(n){return ut(n.integerValue||n.doubleValue)}function f_(n){return af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xI(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof Tl&&o instanceof Tl||r instanceof Il&&o instanceof Il?Qo(r.elements,o.elements,nr):r instanceof du&&o instanceof du?nr(r.Pe,o.Pe):r instanceof cu&&o instanceof cu})(n.transform,e.transform)}class NI{constructor(e,t){this.version=e,this.transformResults=t}}class On{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ja(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wu{}function h_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ff(n.key,On.none()):new wl(n.key,n.data,On.none());{const t=n.data,r=Tn.empty();let o=new Lt(Vt.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),o=o.add(l)}return new Hi(n.key,r,new qn(o.toArray()),On.none())}}function kI(n,e,t){n instanceof wl?(function(o,l,u){const h=o.value.clone(),m=km(o.fieldTransforms,l,u.transformResults);h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Hi?(function(o,l,u){if(!ja(o.precondition,l))return void l.convertToUnknownDocument(u.version);const h=km(o.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(p_(o)),m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fl(n,e,t,r){return n instanceof wl?(function(l,u,h,m){if(!ja(l.precondition,u))return h;const g=l.value.clone(),y=Mm(l.fieldTransforms,m,u);return g.setAll(y),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof Hi?(function(l,u,h,m){if(!ja(l.precondition,u))return h;const g=Mm(l.fieldTransforms,m,u),y=u.data;return y.setAll(p_(l)),y.setAll(g),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,r):(function(l,u,h){return ja(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function MI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=u_(r.transform,o||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(r.field,l))}return t||null}function Nm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Qo(r,o,((l,u)=>xI(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wl extends wu{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Hi extends wu{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function p_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function km(n,e,t){const r=new Map;$e(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,h=e.data.field(l.field);r.set(l.field,PI(u,h,t[o]))}return r}function Mm(n,e,t){const r=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);r.set(o.field,RI(l,u,e))}return r}class ff extends wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DI extends wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&kI(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=l_();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(o.key)?null:h;const m=h_(u,h);m!==null&&r.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xe())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((t,r)=>Nm(t,r)))&&Qo(this.baseMutations,e.baseMutations,((t,r)=>Nm(t,r)))}}class hf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){$e(e.mutations.length===r.length);let o=(function(){return II})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,r[u].version);return new hf(e,t,r,o)}}class LI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class FI{constructor(e,t){this.count=e,this.unchangedNames=t}}var ft,De;function UI(n){switch(n){default:return Se();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function m_(n){if(n===void 0)return Sr("GRPC error has no .code"),ee.UNKNOWN;switch(n){case ft.OK:return ee.OK;case ft.CANCELLED:return ee.CANCELLED;case ft.UNKNOWN:return ee.UNKNOWN;case ft.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case ft.INTERNAL:return ee.INTERNAL;case ft.UNAVAILABLE:return ee.UNAVAILABLE;case ft.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case ft.NOT_FOUND:return ee.NOT_FOUND;case ft.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case ft.ABORTED:return ee.ABORTED;case ft.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case ft.DATA_LOSS:return ee.DATA_LOSS;default:return Se()}}(De=ft||(ft={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";function BI(){return new TextEncoder}const qI=new Bi([4294967295,4294967295],0);function Dm(n){const e=BI().encode(n),t=new qy;return t.update(e),new Uint8Array(t.digest())}function Vm(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Bi([t,r],0),new Bi([o,l],0)]}class pf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new al(`Invalid padding: ${t}`);if(r<0)throw new al(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new al(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Bi.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply(Bi.fromNumber(r)));return o.compare(qI)===1&&(o=new Bi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Dm(e),[r,o]=Vm(t);for(let l=0;l<this.hashCount;l++){const u=this.Ee(r,o,l);if(!this.de(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new pf(l,o,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.Ie===0)return;const t=Dm(e),[r,o]=Vm(t);for(let l=0;l<this.hashCount;l++){const u=this.Ee(r,o,l);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Au{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Au(Ce.min(),o,new ot(qe),Cr(),xe())}}class Al{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Al(r,t,xe(),xe(),xe())}}class eu{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class g_{constructor(e,t){this.targetId=e,this.me=t}}class y_{constructor(e,t,r=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Lm{constructor(){this.fe=0,this.ge=Um(),this.pe=Ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),r=xe();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Se()}})),new Al(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Um()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=Fm(),this.Qe=new ot(qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Se()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const l=o.target;if(Md(l))if(r===0){const u=new Te(l.path);this.Ue(t,u,Ht.newNoDocument(u,Ce.min()))}else $e(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),m=h?this.Xe(h,e,u):1;if(m!==0){this.je(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,g)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let u,h;try{u=Oi(r).toUint8Array()}catch(m){if(m instanceof Jy)return Jo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new pf(u,o,l)}catch(m){return Jo(m instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,u)=>{const h=this.Je(u);if(h){if(l.current&&Md(h.target)){const m=new Te(h.target.path);this.ke.get(m)!==null||this.it(u,m)||this.Ue(u,m,Ht.newNoDocument(m,e))}l.be&&(t.set(u,l.ve()),l.Ce())}}));let r=xe();this.qe.forEach(((l,u)=>{let h=!0;u.forEachWhile((m=>{const g=this.Je(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.ke.forEach(((l,u)=>u.setReadTime(e)));const o=new Au(e,t,this.Qe,this.ke,r);return this.ke=Cr(),this.qe=Fm(),this.Qe=new ot(qe),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lm),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Fm(){return new ot(Te.comparator)}function Um(){return new ot(Te.comparator)}const bI={asc:"ASCENDING",desc:"DESCENDING"},GI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HI={and:"AND",or:"OR"};class zI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vd(n,e){return n.useProto3Json||Eu(e)?e:{value:e}}function fu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $I(n,e){return fu(n,e.toTimestamp())}function tr(n){return $e(!!n),Ce.fromTimestamp((function(t){const r=oi(t);return new Tt(r.seconds,r.nanos)})(n))}function mf(n,e){return Ld(n,e).canonicalString()}function Ld(n,e){const t=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function v_(n){const e=nt.fromString(n);return $e(C_(e)),e}function Fd(n,e){return mf(n.databaseId,e.path)}function _d(n,e){const t=v_(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(T_(t))}function E_(n,e){return mf(n.databaseId,e)}function WI(n){const e=v_(n);return e.length===4?nt.emptyPath():T_(e)}function Ud(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T_(n){return $e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Bm(n,e,t){return{name:Fd(n,e),fields:t.value.mapValue.fields}}function KI(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?($e(y===void 0||typeof y=="string"),Ft.fromBase64String(y||"")):($e(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Ft.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(g){const y=g.code===void 0?ee.UNKNOWN:m_(g.code);return new ye(y,g.message||"")})(u);t=new y_(r,o,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=_d(n,r.document.name),l=tr(r.document.updateTime),u=r.document.createTime?tr(r.document.createTime):Ce.min(),h=new Tn({mapValue:{fields:r.document.fields}}),m=Ht.newFoundDocument(o,l,u,h),g=r.targetIds||[],y=r.removedTargetIds||[];t=new eu(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=_d(n,r.document),l=r.readTime?tr(r.readTime):Ce.min(),u=Ht.newNoDocument(o,l),h=r.removedTargetIds||[];t=new eu([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=_d(n,r.document),l=r.removedTargetIds||[];t=new eu([],l,o,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,u=new FI(o,l),h=r.targetId;t=new g_(h,u)}}return t}function JI(n,e){let t;if(e instanceof wl)t={update:Bm(n,e.key,e.value)};else if(e instanceof ff)t={delete:Fd(n,e.key)};else if(e instanceof Hi)t={update:Bm(n,e.key,e.data),updateMask:rS(e.fieldMask)};else{if(!(e instanceof DI))return Se();t={verify:Fd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const h=u.transform;if(h instanceof cu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Tl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Il)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof du)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Se()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:$I(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se()})(n,e.precondition)),t}function QI(n,e){return n&&n.length>0?($e(e!==void 0),n.map((t=>(function(o,l){let u=o.updateTime?tr(o.updateTime):tr(l);return u.isEqual(Ce.min())&&(u=tr(l)),new NI(u,o.transformResults||[])})(t,e)))):[]}function YI(n,e){return{documents:[E_(n,e.path)]}}function XI(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=E_(n,o);const l=(function(g){if(g.length!==0)return S_(rr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((y=>(function(I){return{field:Oo(I.field),direction:eS(I.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Vd(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{_t:t,parent:o}}function ZI(n){let e=WI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){$e(r===1);const y=t.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(T){const I=I_(T);return I instanceof rr&&Zy(I)?I.getFilters():[I]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((I=>(function(B){return new uu(bo(B.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(I)))})(t.orderBy));let h=null;t.limit&&(h=(function(T){let I;return I=typeof T=="object"?T.value:T,Eu(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(T){const I=!!T.before,A=T.values||[];return new au(A,I)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const I=!T.before,A=T.values||[];return new au(A,I)})(t.endAt)),gI(e,o,u,l,h,"F",m,g)}function jI(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I_(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=bo(t.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(t.unaryFilter.field);return Et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bo(t.unaryFilter.field);return Et.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Se()}})(n):n.fieldFilter!==void 0?(function(t){return Et.create(bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((r=>I_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se()}})(t.compositeFilter.op))})(n):Se()}function eS(n){return bI[n]}function tS(n){return GI[n]}function nS(n){return HI[n]}function Oo(n){return{fieldPath:n.canonicalString()}}function bo(n){return Vt.fromServerFormat(n.fieldPath)}function S_(n){return n instanceof Et?(function(t){if(t.op==="=="){if(Cm(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(Sm(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cm(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(Sm(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:tS(t.op),value:t.value}}})(n):n instanceof rr?(function(t){const r=t.getFilters().map((o=>S_(o)));return r.length===1?r[0]:{compositeFilter:{op:nS(t.op),filters:r}}})(n):Se()}function rS(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function C_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class jr{constructor(e,t,r,o,l=Ce.min(),u=Ce.min(),h=Ft.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iS{constructor(e){this.ct=e}}function oS(n){const e=ZI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dd(e,e.limit,"L"):e}class sS{constructor(){this.un=new lS}addToCollectionParentIndex(e,t){return this.un.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(ii.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class lS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Lt(nt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Lt(nt.comparator)).toArray()}}class Zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zo(0)}static kn(){return new Zo(-1)}}class aS{constructor(){this.changes=new is((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cS{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&fl(r.mutation,o,qn.empty(),Tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,xe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=xe()){const o=Ui();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let u=ll();return l.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ui();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,xe())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,o){let l=Cr();const u=dl(),h=(function(){return dl()})();return t.forEach(((m,g)=>{const y=r.get(g.key);o.has(g.key)&&(y===void 0||y.mutation instanceof Hi)?l=l.insert(g.key,g):y!==void 0?(u.set(g.key,y.mutation.getFieldMask()),fl(y.mutation,g,y.mutation.getFieldMask(),Tt.now())):u.set(g.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>u.set(g,y))),t.forEach(((g,y)=>{var T;return h.set(g,new uS(y,(T=u.get(g))!==null&&T!==void 0?T:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=dl();let o=new ot(((u,h)=>u-h)),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=r.get(m)||qn.empty();y=h.applyToLocalView(g,y),r.set(m,y);const T=(o.get(h.batchId)||xe()).add(m);o=o.insert(h.batchId,T)}))})).next((()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,y=m.value,T=l_();y.forEach((I=>{if(!l.has(I)){const A=h_(t.get(I),r.get(I));A!==null&&T.set(I,A),l=l.add(I)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,T))}return j.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):j.resolve(Ui());let h=-1,m=l;return u.next((g=>j.forEach(g,((y,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),l.get(y)?j.resolve():this.remoteDocumentCache.getEntry(e,y).next((I=>{m=m.insert(y,I)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,xe()))).next((y=>({batchId:h,changes:s_(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((r=>{let o=ll();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let u=ll();return this.indexManager.getCollectionParents(e,l).next((h=>j.forEach(h,(m=>{const g=(function(T,I){return new Tu(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next((y=>{y.forEach(((T,I)=>{u=u.insert(T,I)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((u=>{l.forEach(((m,g)=>{const y=g.getKey();u.get(y)===null&&(u=u.insert(y,Ht.newInvalidDocument(y)))}));let h=ll();return u.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&fl(y.mutation,g,qn.empty(),Tt.now()),Su(t,g)&&(h=h.insert(m,g))})),h}))}}class dS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return j.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:oS(o.bundledQuery),readTime:tr(o.readTime)}})(t)),j.resolve()}}class fS{constructor(){this.overlays=new ot(Te.comparator),this.Ir=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ui();return j.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.ht(e,t,l)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const o=Ui(),l=t.length+1,u=new Te(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&o.set(m.getKey(),m)}return j.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new ot(((g,y)=>g-y));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=Ui(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Ui(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>h.set(g,y))),!(h.size()>=o)););return j.resolve(h)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new LI(t,r));let l=this.Ir.get(t);l===void 0&&(l=xe(),this.Ir.set(t,l)),this.Ir.set(t,l.add(r.key))}}class hS{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}class gf{constructor(){this.Tr=new Lt(Rt.Er),this.dr=new Lt(Rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Rt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new Rt(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new Te(new nt([])),r=new Rt(t,e),o=new Rt(t,e+1),l=[];return this.dr.forEachInRange([r,o],(u=>{this.Vr(u),l.push(u.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new nt([])),r=new Rt(t,e),o=new Rt(t,e+1);let l=xe();return this.dr.forEachInRange([r,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Rt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||Te.comparator(e.key,t.key)}}class pS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(Rt.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new VI(l,t,r,o);this.mutationQueue.push(u);for(const h of o)this.br=this.br.add(new Rt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return j.resolve(u)}lookupMutationBatch(e,t){return j.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),l=o<0?0:o;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([r,o],(u=>{const h=this.Dr(u.wr);l.push(h)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(qe);return t.forEach((o=>{const l=new Rt(o,0),u=new Rt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,u],(h=>{r=r.add(h.wr)}))})),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Te.isDocumentKey(l)||(l=l.child(""));const u=new Rt(new Te(l),0);let h=new Lt(qe);return this.br.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(h=h.add(m.wr)),!0)}),u),j.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach((r=>{const o=this.Dr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(t.mutations,(o=>{const l=new Rt(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new Rt(t,0),o=this.br.firstAfterOrEqual(r);return j.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mS{constructor(e){this.Mr=e,this.docs=(function(){return new ot(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let r=Cr();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Ht.newInvalidDocument(o))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=Cr();const u=t.path,h=new Te(u.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||X0(Y0(y),r)<=0||(o.has(y.key)||Su(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,r,o){Se()}Or(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new gS(this)}getSize(e){return j.resolve(this.size)}}class gS extends aS{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class yS{constructor(e){this.persistence=e,this.Nr=new is((t=>uf(t)),cf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gf,this.targetCount=0,this.kr=Zo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,o)=>t(o))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),j.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Zo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Kn(t),j.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Nr.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),j.waitFor(l).next((()=>o))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.Br.containsKey(t))}}class _S{constructor(e,t){this.qr={},this.overlays={},this.Qr=new of(0),this.Kr=!1,this.Kr=!0,this.$r=new hS,this.referenceDelegate=e(this),this.Ur=new yS(this),this.indexManager=new sS,this.remoteDocumentCache=(function(o){return new mS(o)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new iS(t),this.Gr=new dS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new pS(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const o=new vS(this.Qr.next());return this.referenceDelegate.zr(),r(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return j.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class vS extends j0{constructor(e){super(),this.currentSequenceNumber=e}}class yf{constructor(e){this.persistence=e,this.Jr=new gf,this.Yr=null}static Zr(e){return new yf(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),j.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,(r=>{const o=Te.fromPath(r);return this.ei(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return j.or([()=>j.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class _f{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new _f(e,t.fromCache,r,o)}}class ES{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class TS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return IT()?8:eI(ET())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.Yi(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.Zi(e,t,o,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new ES;return this.Xi(e,t,u).next((h=>{if(l.result=h,this.zi)return this.es(e,t,u,h.size)}))})).next((()=>l.result))}es(e,t,r,o){return r.documentReadCount<this.ji?(il()<=Le.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(il()<=Le.DEBUG&&pe("QueryEngine","Query:",qo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(il()<=Le.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):j.resolve())}Yi(e,t){if(Pm(t))return j.resolve(null);let r=er(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Dd(t,null,"F"),r=er(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=xe(...l);return this.Ji.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.ts(t,h);return this.ns(t,g,u,m.readTime)?this.Yi(e,Dd(t,null,"F")):this.rs(e,g,t,m)}))))})))))}Zi(e,t,r,o){return Pm(t)||o.isEqual(Ce.min())?j.resolve(null):this.Ji.getDocuments(e,r).next((l=>{const u=this.ts(t,l);return this.ns(t,u,r,o)?j.resolve(null):(il()<=Le.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qo(t)),this.rs(e,u,t,Q0(o,-1)).next((h=>h)))}))}ts(e,t){let r=new Lt(i_(e));return t.forEach(((o,l)=>{Su(e,l)&&(r=r.add(l))})),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,r){return il()<=Le.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",qo(t)),this.Ji.getDocumentsMatchingQuery(e,t,ii.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}class IS{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ot(qe),this._s=new is((l=>uf(l)),cf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function SS(n,e,t,r){return new IS(n,e,t,r)}async function w_(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],h=[];let m=xe();for(const g of o){u.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){h.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next((g=>({hs:g,removedBatchIds:u,addedBatchIds:h})))}))}))}function CS(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(h,m,g,y){const T=g.batch,I=T.keys();let A=j.resolve();return I.forEach((B=>{A=A.next((()=>y.getEntry(m,B))).next((U=>{const q=g.docVersions.get(B);$e(q!==null),U.version.compareTo(q)<0&&(T.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),y.addEntry(U)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(m,T)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=xe();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function A_(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function wS(n,e){const t=we(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const h=[];e.targetChanges.forEach(((y,T)=>{const I=o.get(T);if(!I)return;h.push(t.Ur.removeMatchingKeys(l,y.removedDocuments,T).next((()=>t.Ur.addMatchingKeys(l,y.addedDocuments,T))));let A=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(Ft.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),o=o.insert(T,A),(function(U,q,K){return U.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(I,A,y)&&h.push(t.Ur.updateTargetData(l,A))}));let m=Cr(),g=xe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(AS(l,u,e.documentUpdates).next((y=>{m=y.Ps,g=y.Is}))),!r.isEqual(Ce.min())){const y=t.Ur.getLastRemoteSnapshotVersion(l).next((T=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(y)}return j.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.os=o,l)))}function AS(n,e,t){let r=xe(),o=xe();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let u=Cr();return t.forEach(((h,m)=>{const g=l.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(h)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)})),{Ps:u,Is:o}}))}function RS(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function PS(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Ur.getTargetData(r,e).next((l=>l?(o=l,j.resolve(o)):t.Ur.allocateTargetId(r).next((u=>(o=new jr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function Bd(n,e,t){const r=we(n),o=r.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Cl(u))throw u;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function qm(n,e,t){const r=we(n);let o=Ce.min(),l=xe();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,g,y){const T=we(m),I=T._s.get(y);return I!==void 0?j.resolve(T.os.get(I)):T.Ur.getTargetData(g,y)})(r,u,er(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next((m=>{l=m}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,t?o:Ce.min(),t?l:xe()))).next((h=>(xS(r,vI(e),h),{documents:h,Ts:l})))))}function xS(n,e,t){let r=n.us.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.us.set(e,r)}class Om{constructor(){this.activeTargetIds=wI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NS{constructor(){this.so=new Om,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Om,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kS{_o(e){}shutdown(){}}class bm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qa=null;function vd(){return Qa===null?Qa=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qa++,"0x"+Qa.toString(16)}const MS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const bt="WebChannelConnection";class VS extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,r,o,l,u){const h=vd(),m=this.xo(t,r.toUriEncodedString());pe("RestConnection",`Sending RPC '${t}' ${h}:`,m,o);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,l,u),this.No(t,m,g,o).then((y=>(pe("RestConnection",`Received RPC '${t}' ${h}: `,y),y)),(y=>{throw Jo("RestConnection",`RPC '${t}' ${h} failed with error: `,y,"url: ",m,"request:",o),y}))}Lo(t,r,o,l,u,h){return this.Mo(t,r,o,l,u)}Oo(t,r,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ns})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,u)=>t[u]=l)),o&&o.headers.forEach(((l,u)=>t[u]=l))}xo(t,r){const o=MS[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const l=vd();return new Promise(((u,h)=>{const m=new Oy;m.setWithCredentials(!0),m.listenOnce(by.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Xa.NO_ERROR:const y=m.getResponseJson();pe(bt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case Xa.TIMEOUT:pe(bt,`RPC '${e}' ${l} timed out`),h(new ye(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:const T=m.getStatus();if(pe(bt,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I?.error;if(A&&A.status&&A.message){const B=(function(q){const K=q.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(K)>=0?K:ee.UNKNOWN})(A.status);h(new ye(B,A.message))}else h(new ye(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ye(ee.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{pe(bt,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(o);pe(bt,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",g,r,15)}))}Bo(e,t,r){const o=vd(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zy(),h=Hy(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");pe(bt,`Creating RPC '${e}' stream ${o}: ${y}`,m);const T=u.createWebChannel(y,m);let I=!1,A=!1;const B=new DS({Io:q=>{A?pe(bt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(I||(pe(bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),pe(bt,`RPC '${e}' stream ${o} sending:`,q),T.send(q))},To:()=>T.close()}),U=(q,K,X)=>{q.listen(K,(Q=>{try{X(Q)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return U(T,sl.EventType.OPEN,(()=>{A||(pe(bt,`RPC '${e}' stream ${o} transport opened.`),B.yo())})),U(T,sl.EventType.CLOSE,(()=>{A||(A=!0,pe(bt,`RPC '${e}' stream ${o} transport closed`),B.So())})),U(T,sl.EventType.ERROR,(q=>{A||(A=!0,Jo(bt,`RPC '${e}' stream ${o} transport errored:`,q),B.So(new ye(ee.UNAVAILABLE,"The operation could not be completed")))})),U(T,sl.EventType.MESSAGE,(q=>{var K;if(!A){const X=q.data[0];$e(!!X);const Q=X,ie=Q.error||((K=Q[0])===null||K===void 0?void 0:K.error);if(ie){pe(bt,`RPC '${e}' stream ${o} received error:`,ie);const se=ie.status;let le=(function(R){const k=ft[R];if(k!==void 0)return m_(k)})(se),M=ie.message;le===void 0&&(le=ee.INTERNAL,M="Unknown error status: "+se+" with message "+ie.message),A=!0,B.So(new ye(le,M)),T.close()}else pe(bt,`RPC '${e}' stream ${o} received:`,X),B.bo(X)}})),U(h,Gy.STAT_EVENT,(q=>{q.stat===Pd.PROXY?pe(bt,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===Pd.NOPROXY&&pe(bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.wo()}),0),B}}function Ed(){return typeof document<"u"?document:null}function Ru(n){return new zI(n,!0)}class R_{constructor(e,t,r=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class P_{constructor(e,t,r,o,l,u,h,m){this.ui=e,this.Ho=r,this.Jo=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new R_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.Yo===t&&this.P_(r,o)}),(r=>{e((()=>{const o=new ye(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{r((()=>this.I_(o)))})),this.stream.onMessage((o=>{r((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LS extends P_{constructor(e,t,r,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=KI(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?tr(u.readTime):Ce.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Ud(this.serializer),t.addTarget=(function(l,u){let h;const m=u.target;if(h=Md(m)?{documents:YI(l,m)}:{query:XI(l,m)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=__(l,u.resumeToken);const g=Vd(l,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ce.min())>0){h.readTime=fu(l,u.snapshotVersion.toTimestamp());const g=Vd(l,u.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const r=jI(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Ud(this.serializer),t.removeTarget=e,this.a_(t)}}class FS extends P_{constructor(e,t,r,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=QI(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Ud(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>JI(this.serializer,r)))};this.a_(t)}}class US extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Mo(e,Ld(t,r),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ee.UNKNOWN,l.toString())}))}Lo(e,t,r,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Lo(e,Ld(t,r),o,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(ee.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class BS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sr(t),this.D_=!1):pe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class qS{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((u=>{r.enqueueAndForget((async()=>{zi(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(m){const g=we(m);g.L_.add(4),await Rl(g),g.q_.set("Unknown"),g.L_.delete(4),await Pu(g)})(this))}))})),this.q_=new BS(r,o)}}async function Pu(n){if(zi(n))for(const e of n.B_)await e(!0)}async function Rl(n){for(const e of n.B_)await e(!1)}function x_(n,e){const t=we(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),If(t)?Tf(t):os(t).r_()&&Ef(t,e))}function vf(n,e){const t=we(n),r=os(t);t.N_.delete(e),r.r_()&&N_(t,e),t.N_.size===0&&(r.r_()?r.o_():zi(t)&&t.q_.set("Unknown"))}function Ef(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}os(n).A_(e)}function N_(n,e){n.Q_.xe(e),os(n).R_(e)}function Tf(n){n.Q_=new OI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),os(n).start(),n.q_.v_()}function If(n){return zi(n)&&!os(n).n_()&&n.N_.size>0}function zi(n){return we(n).L_.size===0}function k_(n){n.Q_=void 0}async function OS(n){n.q_.set("Online")}async function bS(n){n.N_.forEach(((e,t)=>{Ef(n,e)}))}async function GS(n,e){k_(n),If(n)?(n.q_.M_(e),Tf(n)):n.q_.set("Unknown")}async function HS(n,e,t){if(n.q_.set("Online"),e instanceof y_&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const h of l.targetIds)o.N_.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.N_.delete(h),o.Q_.removeTarget(h))})(n,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hu(n,r)}else if(e instanceof eu?n.Q_.Ke(e):e instanceof g_?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ce.min()))try{const r=await A_(n.localStore);t.compareTo(r)>=0&&await(function(l,u){const h=l.Q_.rt(u);return h.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.N_.get(g);y&&l.N_.set(g,y.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,g)=>{const y=l.N_.get(m);if(!y)return;l.N_.set(m,y.withResumeToken(Ft.EMPTY_BYTE_STRING,y.snapshotVersion)),N_(l,m);const T=new jr(y.target,m,g,y.sequenceNumber);Ef(l,T)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),await hu(n,r)}}async function hu(n,e,t){if(!Cl(e))throw e;n.L_.add(1),await Rl(n),n.q_.set("Offline"),t||(t=()=>A_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Pu(n)}))}function M_(n,e){return e().catch((t=>hu(n,t,e)))}async function xu(n){const e=we(n),t=si(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zS(e);)try{const o=await RS(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,$S(e,o)}catch(o){await hu(e,o)}D_(e)&&V_(e)}function zS(n){return zi(n)&&n.O_.length<10}function $S(n,e){n.O_.push(e);const t=si(n);t.r_()&&t.V_&&t.m_(e.mutations)}function D_(n){return zi(n)&&!si(n).n_()&&n.O_.length>0}function V_(n){si(n).start()}async function WS(n){si(n).p_()}async function KS(n){const e=si(n);for(const t of n.O_)e.m_(t.mutations)}async function JS(n,e,t){const r=n.O_.shift(),o=hf.from(r,e,t);await M_(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await xu(n)}async function QS(n,e){e&&si(n).V_&&await(async function(r,o){if((function(u){return UI(u)&&u!==ee.ABORTED})(o.code)){const l=r.O_.shift();si(r).s_(),await M_(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await xu(r)}})(n,e),D_(n)&&V_(n)}async function Gm(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=zi(t);t.L_.add(3),await Rl(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Pu(t)}async function YS(n,e){const t=we(n);e?(t.L_.delete(2),await Pu(t)):e||(t.L_.add(2),await Rl(t),t.q_.set("Unknown"))}function os(n){return n.K_||(n.K_=(function(t,r,o){const l=we(t);return l.w_(),new LS(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:OS.bind(null,n),Ro:bS.bind(null,n),mo:GS.bind(null,n),d_:HS.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),If(n)?Tf(n):n.q_.set("Unknown")):(await n.K_.stop(),k_(n))}))),n.K_}function si(n){return n.U_||(n.U_=(function(t,r,o){const l=we(t);return l.w_(),new FS(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WS.bind(null,n),mo:QS.bind(null,n),f_:KS.bind(null,n),g_:JS.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await xu(n)):(await n.U_.stop(),n.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}class Sf{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const u=Date.now()+r,h=new Sf(e,t,u,o,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(n,e){if(Sr("AsyncQueue",`${e}: ${n}`),Cl(n))return new ye(ee.UNAVAILABLE,`${e}: ${n}`);throw n}class zo{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=ll(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new zo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Hm{constructor(){this.W_=new ot(Te.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class jo{constructor(e,t,r,o,l,u,h,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,o,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new jo(e,t,zo.emptySet(t),u,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class XS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class ZS{constructor(){this.queries=zm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=we(t),l=o.queries;o.queries=zm(),l.forEach(((u,h)=>{for(const m of h.j_)m.onError(r)}))})(this,new ye(ee.ABORTED,"Firestore shutting down"))}}function zm(){return new is((n=>r_(n)),Iu)}async function jS(n,e){const t=we(n);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(r=2):(l=new XS,r=e.J_()?0:1);try{switch(r){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const h=Cf(u,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&wf(t)}async function eC(n,e){const t=we(n),r=e.query;let o=3;const l=t.queries.get(r);if(l){const u=l.j_.indexOf(e);u>=0&&(l.j_.splice(u,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tC(n,e){const t=we(n);let r=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const h of u.j_)h.X_(o)&&(r=!0);u.z_=o}}r&&wf(t)}function nC(n,e,t){const r=we(n),o=r.queries.get(e);if(o)for(const l of o.j_)l.onError(t);r.queries.delete(e)}function wf(n){n.Y_.forEach((e=>{e.next()}))}var qd,$m;($m=qd||(qd={})).ea="default",$m.Cache="cache";class rC{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qd.Cache}}class L_{constructor(e){this.key=e}}class F_{constructor(e){this.key=e}}class iC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=i_(e),this.Ra=new zo(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Hm,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,h=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,T)=>{const I=o.get(y),A=Su(this.query,T)?T:null,B=!!I&&this.mutatedKeys.has(I.key),U=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let q=!1;I&&A?I.data.isEqual(A.data)?B!==U&&(r.track({type:3,doc:A}),q=!0):this.ga(I,A)||(r.track({type:2,doc:A}),q=!0,(m&&this.Aa(A,m)>0||g&&this.Aa(A,g)<0)&&(h=!0)):!I&&A?(r.track({type:0,doc:A}),q=!0):I&&!A&&(r.track({type:1,doc:I}),q=!0,(m||g)&&(h=!0)),q&&(A?(u=u.add(A),l=U?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Ra:u,fa:r,ns:h,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((y,T)=>(function(A,B){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return U(A)-U(B)})(y.type,T.type)||this.Aa(y.doc,T.doc))),this.pa(r),o=o!=null&&o;const h=t&&!o?this.ya():[],m=this.da.size===0&&this.current&&!o?1:0,g=m!==this.Ea;return this.Ea=m,u.length!==0||g?{snapshot:new jo(this.query,e.Ra,l,u,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new F_(r))})),this.da.forEach((r=>{e.has(r)||t.push(new L_(r))})),t}ba(e){this.Ta=e.Ts,this.da=xe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sC{constructor(e){this.key=e,this.va=!1}}class lC{constructor(e,t,r,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new is((h=>r_(h)),Iu),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(Te.comparator),this.Na=new Map,this.La=new gf,this.Ba={},this.ka=new Map,this.qa=Zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aC(n,e,t=!0){const r=G_(n);let o;const l=r.Fa.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await U_(r,e,t,!0),o}async function uC(n,e){const t=G_(n);await U_(t,e,!0,!1)}async function U_(n,e,t,r){const o=await PS(n.localStore,er(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await cC(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&x_(n.remoteStore,o),h}async function cC(n,e,t,r,o){n.Ka=(T,I,A)=>(async function(U,q,K,X){let Q=q.view.ma(K);Q.ns&&(Q=await qm(U.localStore,q.query,!1).then((({documents:M})=>q.view.ma(M,Q))));const ie=X&&X.targetChanges.get(q.targetId),se=X&&X.targetMismatches.get(q.targetId)!=null,le=q.view.applyChanges(Q,U.isPrimaryClient,ie,se);return Km(U,q.targetId,le.wa),le.snapshot})(n,T,I,A);const l=await qm(n.localStore,e,!0),u=new iC(e,l.Ts),h=u.ma(l.documents),m=Al.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),g=u.applyChanges(h,n.isPrimaryClient,m);Km(n,t,g.wa);const y=new oC(e,t,u);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),g.snapshot}async function dC(n,e,t){const r=we(n),o=r.Fa.get(e),l=r.Ma.get(o.targetId);if(l.length>1)return r.Ma.set(o.targetId,l.filter((u=>!Iu(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Bd(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&vf(r.remoteStore,o.targetId),Od(r,o.targetId)})).catch(Sl)):(Od(r,o.targetId),await Bd(r.localStore,o.targetId,!0))}async function fC(n,e){const t=we(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vf(t.remoteStore,r.targetId))}async function hC(n,e,t){const r=EC(n);try{const o=await(function(u,h){const m=we(u),g=Tt.now(),y=h.reduce(((A,B)=>A.add(B.key)),xe());let T,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let B=Cr(),U=xe();return m.cs.getEntries(A,y).next((q=>{B=q,B.forEach(((K,X)=>{X.isValidDocument()||(U=U.add(K))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,B))).next((q=>{T=q;const K=[];for(const X of h){const Q=MI(X,T.get(X.key).overlayedDocument);Q!=null&&K.push(new Hi(X.key,Q,Qy(Q.value.mapValue),On.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,K,h)})).next((q=>{I=q;const K=q.applyToLocalDocumentSet(T,U);return m.documentOverlayCache.saveOverlays(A,q.batchId,K)}))})).then((()=>({batchId:I.batchId,changes:s_(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,h,m){let g=u.Ba[u.currentUser.toKey()];g||(g=new ot(qe)),g=g.insert(h,m),u.Ba[u.currentUser.toKey()]=g})(r,o.batchId,t),await Pl(r,o.changes),await xu(r.remoteStore)}catch(o){const l=Cf(o,"Failed to persist write");t.reject(l)}}async function B_(n,e){const t=we(n);try{const r=await wS(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Na.get(l);u&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?$e(u.va):o.removedDocuments.size>0&&($e(u.va),u.va=!1))})),await Pl(t,r,e)}catch(r){await Sl(r)}}function Wm(n,e,t){const r=we(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach(((l,u)=>{const h=u.view.Z_(e);h.snapshot&&o.push(h.snapshot)})),(function(u,h){const m=we(u);m.onlineState=h;let g=!1;m.queries.forEach(((y,T)=>{for(const I of T.j_)I.Z_(h)&&(g=!0)})),g&&wf(m)})(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pC(n,e,t){const r=we(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),l=o&&o.key;if(l){let u=new ot(Te.comparator);u=u.insert(l,Ht.newNoDocument(l,Ce.min()));const h=xe().add(l),m=new Au(Ce.min(),new Map,new ot(qe),u,h);await B_(r,m),r.Oa=r.Oa.remove(l),r.Na.delete(e),Af(r)}else await Bd(r.localStore,e,!1).then((()=>Od(r,e,t))).catch(Sl)}async function mC(n,e){const t=we(n),r=e.batch.batchId;try{const o=await CS(t.localStore,e);O_(t,r,null),q_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Pl(t,o)}catch(o){await Sl(o)}}async function gC(n,e,t){const r=we(n);try{const o=await(function(u,h){const m=we(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,h).next((T=>($e(T!==null),y=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(r.localStore,e);O_(r,e,t),q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Pl(r,o)}catch(o){await Sl(o)}}function q_(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function O_(n,e,t){const r=we(n);let o=r.Ba[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Od(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||b_(n,r)}))}function b_(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(vf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Af(n))}function Km(n,e,t){for(const r of t)r instanceof L_?(n.La.addReference(r.key,e),yC(n,r)):r instanceof F_?(pe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||b_(n,r.key)):Se()}function yC(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(pe("SyncEngine","New document in limbo: "+t),n.xa.add(r),Af(n))}function Af(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Te(nt.fromString(e)),r=n.qa.next();n.Na.set(r,new sC(t)),n.Oa=n.Oa.insert(t,r),x_(n.remoteStore,new jr(er(n_(t.path)),r,"TargetPurposeLimboResolution",of.oe))}}async function Pl(n,e,t){const r=we(n),o=[],l=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,m)=>{u.push(r.Ka(m,e,t).then((g=>{var y;if((g||t)&&r.isPrimaryClient){const T=g?!g.fromCache:(y=t?.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){o.push(g);const T=_f.Wi(m.targetId,g);l.push(T)}})))})),await Promise.all(u),r.Ca.d_(o),await(async function(m,g){const y=we(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>j.forEach(g,(I=>j.forEach(I.$i,(A=>y.persistence.referenceDelegate.addReference(T,I.targetId,A))).next((()=>j.forEach(I.Ui,(A=>y.persistence.referenceDelegate.removeReference(T,I.targetId,A)))))))))}catch(T){if(!Cl(T))throw T;pe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of g){const I=T.targetId;if(!T.fromCache){const A=y.os.get(I),B=A.snapshotVersion,U=A.withLastLimboFreeSnapshotVersion(B);y.os=y.os.insert(I,U)}}})(r.localStore,l))}async function _C(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=await w_(t.localStore,e);t.currentUser=e,(function(l,u){l.ka.forEach((h=>{h.forEach((m=>{m.reject(new ye(ee.CANCELLED,u))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pl(t,r.hs)}}function vC(n,e){const t=we(n),r=t.Na.get(e);if(r&&r.va)return xe().add(r.key);{let o=xe();const l=t.Ma.get(e);if(!l)return o;for(const u of l){const h=t.Fa.get(u);o=o.unionWith(h.view.Va)}return o}}function G_(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pC.bind(null,e),e.Ca.d_=tC.bind(null,e.eventManager),e.Ca.$a=nC.bind(null,e.eventManager),e}function EC(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,e),e}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ru(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return SS(this.persistence,new TS,e.initialUser,this.serializer)}Ga(e){return new _S(yf.Zr,this.serializer)}Wa(e){return new NS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class bd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_C.bind(null,this.syncEngine),await YS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZS})()}createDatastore(e){const t=Ru(e.databaseInfo.databaseId),r=(function(l){return new VS(l)})(e.databaseInfo);return(function(l,u,h,m){return new US(l,u,h,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,u,h){return new qS(r,o,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Wm(this.syncEngine,t,0)),(function(){return bm.D()?new bm:new kS})())}createSyncEngine(e,t){return(function(o,l,u,h,m,g,y){const T=new lC(o,l,u,h,m,g);return y&&(T.Qa=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=we(o);pe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Rl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bd.provider={build:()=>new bd};class TC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class IC{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=Wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{pe("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Cf(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Td(n,e){n.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await w_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Jm(n,e){n.asyncQueue.verifyOperationInProgress();const t=await SC(n);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Gm(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>Gm(e.remoteStore,o))),n._onlineComponents=e}async function SC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Td(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await Td(n,new pu)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await Td(n,new pu);return n._offlineComponents}async function H_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await Jm(n,n._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await Jm(n,new bd))),n._onlineComponents}function CC(n){return H_(n).then((e=>e.syncEngine))}async function wC(n){const e=await H_(n),t=e.eventManager;return t.onListen=aC.bind(null,e.syncEngine),t.onUnlisten=dC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fC.bind(null,e.syncEngine),t}function AC(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,g){const y=new TC({next:I=>{y.Za(),u.enqueueAndForget((()=>eC(l,T))),I.fromCache&&m.source==="server"?g.reject(new ye(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),T=new rC(h,y,{includeMetadataChanges:!0,_a:!0});return jS(l,T)})(await wC(n),n.asyncQueue,e,t,r))),r.promise}function z_(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Qm=new Map;function $_(n,e,t){if(!t)throw new ye(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RC(n,e,t,r){if(e===!0&&r===!0)throw new ye(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ym(n){if(!Te.isDocumentKey(n))throw new ye(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Xm(n){if(Te.isDocumentKey(n))throw new ye(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function Gi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rf(n);throw new ye(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class Zm{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nu{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zm(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new O0;switch(r.type){case"firstParty":return new z0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Qm.get(t);r&&(pe("ComponentProvider","Removing Datastore"),Qm.delete(t),r.terminate())})(this),Promise.resolve()}}function PC(n,e,t,r={}){var o;const l=(n=Gi(n,Nu))._getSettings(),u=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==u&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),r.mockUserToken){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Gt.MOCK_USER;else{h=vT(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ye(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Gt(g)}n._authCredentials=new b0(new $y(h,m))}}class ku{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ku(this.firestore,e,this._query)}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class ri extends ku{constructor(e,t,r){super(e,t,n_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Te(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function Pf(n,e,...t){if(n=pl(n),$_("collection","path",e),n instanceof Nu){const r=nt.fromString(e,...t);return Xm(r),new ri(n,null,r)}{if(!(n instanceof In||n instanceof ri))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return Xm(r),new ri(n.firestore,null,r)}}function xf(n,e,...t){if(n=pl(n),arguments.length===1&&(e=Wy.newId()),$_("doc","path",e),n instanceof Nu){const r=nt.fromString(e,...t);return Ym(r),new In(n,null,new Te(r))}{if(!(n instanceof In||n instanceof ri))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return Ym(r),new In(n.firestore,n instanceof ri?n.converter:null,new Te(r))}}class jm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new R_(this,"async_queue_retry"),this.Vu=()=>{const r=Ed();r&&pe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Ed();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ed();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new ni;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cl(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const o=(function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h})(r);throw Sr("INTERNAL UNHANDLED ERROR: ",o),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Sf.createAndSchedule(this,e,t,r,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class xl extends Nu{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new jm,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,await e}}}function xC(n,e){const t=typeof n=="object"?n:P0(),r=typeof n=="string"?n:"(default)",o=C0(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=yT("firestore");l&&PC(o,...l)}return o}function W_(n){if(n._terminated)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||NC(n),n._firestoreClient}function NC(n){var e,t,r;const o=n._freezeSettings(),l=(function(h,m,g,y){return new rI(h,m,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,z_(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new IC(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(n._componentsProvider))}class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(Ft.fromBase64String(e))}catch(t){throw new ye(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new es(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class K_{constructor(e){this._methodName=e}}class kf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}class Mf{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}}const kC=/^__.*__$/;class MC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new wl(e,this.data,t,this.fieldTransforms)}}function J_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Df{constructor(e,t,r,o,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Df(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J_(this.Cu)&&kC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ru(e)}Qu(e,t,r,o=!1){return new Df({Cu:e,methodName:t,qu:r,path:Vt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q_(n){const e=n._freezeSettings(),t=Ru(n._databaseId);return new DC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Y_(n,e,t,r,o,l={}){const u=n.Qu(l.merge||l.mergeFields?2:0,e,t,o);ev("Data must be an object, but it was:",u,r);const h=Z_(r,u);let m,g;if(l.merge)m=new qn(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const I=VC(e,T,t);if(!u.contains(I))throw new ye(ee.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);FC(y,I)||y.push(I)}m=new qn(y),g=u.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=u.fieldTransforms;return new MC(new Tn(h),m,g)}function X_(n,e){if(j_(n=pl(n)))return ev("Unsupported field value:",e,n),Z_(n,e);if(n instanceof K_)return(function(r,o){if(!J_(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,o){const l=[];let u=0;for(const h of r){let m=X_(h,o.Lu(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(r,o){if((r=pl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Tt.fromDate(r);return{timestampValue:fu(o.serializer,l)}}if(r instanceof Tt){const l=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fu(o.serializer,l)}}if(r instanceof kf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:__(o.serializer,r._byteString)};if(r instanceof In){const l=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:mf(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Mf)return(function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Bu("VectorValues must only contain numeric values.");return df(h.serializer,m)}))}}}}}})(r,o);throw o.Bu(`Unsupported field value: ${Rf(r)}`)})(n,e)}function Z_(n,e){const t={};return Ky(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rs(n,((r,o)=>{const l=X_(o,e.Mu(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function j_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof kf||n instanceof es||n instanceof In||n instanceof K_||n instanceof Mf)}function ev(n,e,t){if(!j_(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const r=Rf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function VC(n,e,t){if((e=pl(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return tv(n,e);throw mu("Field path arguments must be of type string or ",n,!1,void 0,t)}const LC=new RegExp("[~\\*/\\[\\]]");function tv(n,e,t){if(e.search(LC)>=0)throw mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nf(...e.split("."))._internalPath}catch{throw mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mu(n,e,t,r,o){const l=r&&!r.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${o}`),m+=")"),new ye(ee.INVALID_ARGUMENT,h+n+m)}function FC(n,e){return n.some((t=>t.isEqual(e)))}class nv{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UC extends nv{data(){return super.data()}}function rv(n,e){return typeof e=="string"?tv(n,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}function BC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qC{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return rs(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((u=>ut(u.doubleValue)));return new Mf(l)}convertGeoPoint(e){return new kf(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_l(e));default:return null}}convertTimestamp(e){const t=oi(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);$e(C_(r));const o=new vl(r.get(1),r.get(3)),l=new Te(r.popFirst(5));return o.isEqual(t)||Sr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function iv(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OC extends nv{constructor(e,t,r,o,l,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tu extends OC{data(e={}){return super.data(e)}}class bC{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new tu(this._firestore,this._userDataWriter,r.key,r,new Ya(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((h=>{const m=new tu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ya(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new tu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ya(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,y=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:GC(h.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}class HC extends qC{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function ov(n){n=Gi(n,ku);const e=Gi(n.firestore,xl),t=W_(e),r=new HC(e);return BC(n._query),AC(t,n._query).then((o=>new bC(e,r,n,o)))}function zC(n,e,t){n=Gi(n,In);const r=Gi(n.firestore,xl),o=iv(n.converter,e);return Vf(r,[Y_(Q_(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,On.none())])}function $C(n){return Vf(Gi(n.firestore,xl),[new ff(n._key,On.none())])}function WC(n,e){const t=Gi(n.firestore,xl),r=xf(n),o=iv(n.converter,e);return Vf(t,[Y_(Q_(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then((()=>r))}function Vf(n,e){return(function(r,o){const l=new ni;return r.asyncQueue.enqueueAndForget((async()=>hC(await CC(r),o,l))),l.promise})(W_(n),e)}(function(e,t=!0){(function(o){ns=o})(R0),su(new ml("firestore",((r,{instanceIdentifier:o,options:l})=>{const u=r.getProvider("app").getImmediate(),h=new xl(new G0(r.getProvider("auth-internal")),new W0(r.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ye(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(g.options.projectId,y)})(u,o),u);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ho(_m,"4.7.3",e),Ho(_m,"4.7.3","esm2017")})();const eg={apiKey:"AIzaSyDJabXrn5a6dgOYtNyBE0fqzwpxj5ZWcb8",authDomain:"e-assessment-app.firebaseapp.com",projectId:"e-assessment-app",storageBucket:"e-assessment-app.firebasestorage.app",messagingSenderId:"694766041620",appId:"1:694766041620:web:7ad50caffb746e3c1b4501"};let bn;try{if(eg.apiKey){const n=Fy(eg);bn=xC(n)}else console.warn("Firebase config is missing in db.ts. App will not save data correctly.")}catch(n){console.error("Error initializing Firebase:",n)}const Gd=async()=>{if(!bn)return[];try{return(await ov(Pf(bn,"assessments"))).docs.map(e=>e.data())}catch(n){return console.error("Error fetching assessments:",n),[]}},KC=async n=>{if(bn)try{await zC(xf(bn,"assessments",n.id),n)}catch(e){console.error("Error saving assessment:",e),alert("Failed to save to database. Check console.")}},JC=async n=>{if(bn)try{await $C(xf(bn,"assessments",n))}catch(e){console.error("Error deleting assessment:",e)}},QC=async n=>{if(bn)try{await WC(Pf(bn,"results"),n)}catch(e){console.error("Error saving result:",e),alert("Error: Result could not be saved to server. Please contact admin.")}},YC=async()=>{if(!bn)return[];try{return(await ov(Pf(bn,"results"))).docs.map(e=>e.data())}catch(n){return console.error("Error fetching results:",n),[]}},Lf="assess_app_active_session",XC=n=>{localStorage.setItem(Lf,JSON.stringify(n))},ZC=()=>{const n=localStorage.getItem(Lf);return n?JSON.parse(n):null},sv=()=>{localStorage.removeItem(Lf)};let jC,ew;function tw(){return{geminiUrl:jC,vertexUrl:ew}}function nw(n,e,t,r){var o,l;if(!n?.baseUrl){const u=tw();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:r}return n.baseUrl}class Ar{}function ae(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const m=n[h];if(Array.isArray(t))for(let g=0;g<m.length;g++){const y=m[g];f(y,e.slice(l+1),t[g])}else for(const g of m)f(g,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const m=n[h];f(m[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const r=e[e.length-1],o=n[r];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function c(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const o=e[r];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>c(h,e.slice(r+1),t)):t}else return t}else n=n[o]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function rw(n,e){for(const[t,r]of Object.entries(e)){const o=t.split("."),l=r.split("."),u=new Set;let h=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){h=m;break}if(h!==-1&&l.length>h)for(let m=h;m<l.length;m++){const g=l[m];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&u.add(g)}Hd(n,o,l,0,u)}}function Hd(n,e,t,r,o){if(r>=e.length||typeof n!="object"||n===null)return;const l=e[r];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const m of h[u])Hd(m,e,t,r+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(g=>!g.startsWith("_")&&!o.has(g)),m={};for(const g of h)m[g]=u[g];for(const[g,y]of Object.entries(m)){const T=[];for(const I of t.slice(r))I==="*"?T.push(g):T.push(I);f(u,T,y)}for(const g of h)delete u[g]}}else{const u=n;l in u&&Hd(u[l],e,t,r+1,o)}}function Ff(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function iw(n){const e={},t=c(n,["operationName"]);t!=null&&f(e,["operationName"],t);const r=c(n,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function ow(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response","generateVideoResponse"]);return u!=null&&f(e,["response"],lw(u)),e}function sw(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response"]);return u!=null&&f(e,["response"],aw(u)),e}function lw(n){const e={},t=c(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>uw(u))),f(e,["generatedVideos"],l)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const o=c(n,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function aw(n){const e={},t=c(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>cw(u))),f(e,["generatedVideos"],l)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const o=c(n,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function uw(n){const e={},t=c(n,["video"]);return t!=null&&f(e,["video"],gw(t)),e}function cw(n){const e={},t=c(n,["_self"]);return t!=null&&f(e,["video"],yw(t)),e}function dw(n){const e={},t=c(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function fw(n){const e={},t=c(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function hw(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response"]);return u!=null&&f(e,["response"],pw(u)),e}function pw(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&f(e,["parent"],r);const o=c(n,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function lv(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response"]);return u!=null&&f(e,["response"],mw(u)),e}function mw(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&f(e,["parent"],r);const o=c(n,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function gw(n){const e={},t=c(n,["uri"]);t!=null&&f(e,["uri"],t);const r=c(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],Ff(r));const o=c(n,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function yw(n){const e={},t=c(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],Ff(r));const o=c(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}var tg;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tg||(tg={}));var ng;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(ng||(ng={}));var rg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(rg||(rg={}));var Mt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Mt||(Mt={}));var ig;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ig||(ig={}));var og;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(og||(og={}));var sg;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(sg||(sg={}));var lg;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(lg||(lg={}));var ag;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ag||(ag={}));var ug;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(ug||(ug={}));var cg;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(cg||(cg={}));var dg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(dg||(dg={}));var fg;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(fg||(fg={}));var hg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(hg||(hg={}));var pg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(pg||(pg={}));var mg;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mg||(mg={}));var gg;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gg||(gg={}));var yg;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(yg||(yg={}));var _g;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_g||(_g={}));var gu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(gu||(gu={}));var vg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vg||(vg={}));var Eg;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Eg||(Eg={}));var Tg;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Tg||(Tg={}));var zd;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zd||(zd={}));var Ig;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ig||(Ig={}));var Sg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Sg||(Sg={}));var Cg;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Cg||(Cg={}));var wg;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(wg||(wg={}));var Ag;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ag||(Ag={}));var Rg;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Rg||(Rg={}));var Pg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Pg||(Pg={}));var xg;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xg||(xg={}));var Ng;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Ng||(Ng={}));var kg;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(kg||(kg={}));var Mg;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Mg||(Mg={}));var Dg;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Dg||(Dg={}));var Vg;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Vg||(Vg={}));var Lg;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Lg||(Lg={}));var Fg;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Fg||(Fg={}));var Ug;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Ug||(Ug={}));var Bg;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Bg||(Bg={}));var qg;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(qg||(qg={}));var Og;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Og||(Og={}));var bg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bg||(bg={}));var Gg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Gg||(Gg={}));var Hg;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Hg||(Hg={}));var zg;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zg||(zg={}));var $g;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})($g||($g={}));var Wg;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Wg||(Wg={}));var Kg;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Kg||(Kg={}));var Jg;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Jg||(Jg={}));var Qg;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qg||(Qg={}));var Yg;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yg||(Yg={}));var Xg;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Xg||(Xg={}));var Go;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Go||(Go={}));class $d{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ol{get text(){var e,t,r,o,l,u,h,m;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",y=!1;const T=[];for(const I of(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[A,B]of Object.entries(I))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(B!==null||B!==void 0)&&T.push(A);if(typeof I.text=="string"){if(typeof I.thought=="boolean"&&I.thought)continue;y=!0,g+=I.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?g:void 0}get data(){var e,t,r,o,l,u,h,m;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const y=[];for(const T of(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[I,A]of Object.entries(T))I!=="inlineData"&&(A!==null||A!==void 0)&&y.push(I);T.inlineData&&typeof T.inlineData.data=="string"&&(g+=atob(T.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,r,o,l,u,h,m;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(g?.length!==0)return g}get executableCode(){var e,t,r,o,l,u,h,m,g;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if(y?.length!==0)return(g=y?.[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,r,o,l,u,h,m,g;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if(y?.length!==0)return(g=y?.[0])===null||g===void 0?void 0:g.output}}class Zg{}class jg{}class _w{}class vw{}class Ew{}class Tw{}class ey{}class ty{}class ny{}class Iw{}class yu{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new yu;let o;const l=e;return t?o=sw(l):o=ow(l),Object.assign(r,o),r}}class ry{}class iy{}class oy{}class sy{}class Sw{}class Cw{}class ww{}class Uf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Uf,l=hw(e);return Object.assign(r,l),r}}class Aw{}class Rw{}class Pw{}class ly{}class xw{get text(){var e,t,r;let o="",l=!1;const u=[];for(const h of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&g!==null&&u.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,o+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,r;let o="";const l=[];for(const u of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[h,m]of Object.entries(u))h!=="inlineData"&&m!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Nw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Bf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Bf,l=lv(e);return Object.assign(r,l),r}}function Oe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function av(n,e){const t=Oe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function uv(n){return Array.isArray(n)?n.map(e=>_u(e)):[_u(n)]}function _u(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function cv(n){const e=_u(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dv(n){const e=_u(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ay(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function fv(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ay(e)):[ay(n)]}function Wd(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function uy(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function cy(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function zt(n){if(n==null)throw new Error("ContentUnion is required");return Wd(n)?n:{role:"user",parts:fv(n)}}function qf(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=zt(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=zt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>zt(t)):[zt(e)]}function Sn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(uy(n)||cy(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zt(n)]}const e=[],t=[],r=Wd(n[0]);for(const o of n){const l=Wd(o);if(l!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(uy(o)||cy(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return r||e.push({role:"user",parts:fv(t)}),e}function kw(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(Mt).includes(t[0].toUpperCase())?t[0].toUpperCase():Mt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(Mt).includes(r.toUpperCase())?r.toUpperCase():Mt.TYPE_UNSPECIFIED})}}function $o(n){const e={},t=["items"],r=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&kw(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Mt).includes(h.toUpperCase())?h.toUpperCase():Mt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=$o(h);else if(r.includes(u)){const m=[];for(const g of h){if(g.type=="null"){e.nullable=!0;continue}m.push($o(g))}e[u]=m}else if(o.includes(u)){const m={};for(const[g,y]of Object.entries(h))m[g]=$o(y);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=h}return e}function Of(n){return $o(n)}function bf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Gf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ss(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$o(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$o(e.response));return n}function ls(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Mw(n,e,t,r=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Rr(n,e){if(typeof e!="string")throw new Error("name must be a string");return Mw(n,e,"cachedContents")}function hv(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function li(n){return Ff(n)}function Dw(n){return n!=null&&typeof n=="object"&&"name"in n}function Vw(n){return n!=null&&typeof n=="object"&&"video"in n}function Lw(n){return n!=null&&typeof n=="object"&&"uri"in n}function pv(n){var e;let t;if(Dw(n)&&(t=n.name),!(Lw(n)&&(t=n.uri,t===void 0))&&!(Vw(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function mv(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function gv(n){for(const e of["models","tunedModels","publisherModels"])if(Fw(n,e))return n[e];return[]}function Fw(n,e){return n!==null&&typeof n=="object"&&e in n}function Uw(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Bw(n,e={}){const t=[],r=new Set;for(const o of n){const l=o.name;if(r.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);r.add(l);const u=Uw(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function yv(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function qw(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _v(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function as(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function vv(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Ow(n){const e={},t=c(n,["responsesFile"]);t!=null&&f(e,["fileName"],t);const r=c(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>EA(u))),f(e,["inlinedResponses"],l)}const o=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["inlinedEmbedContentResponses"],l)}return e}function bw(n){const e={},t=c(n,["predictionsFormat"]);t!=null&&f(e,["format"],t);const r=c(n,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const o=c(n,["bigqueryDestination","outputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function Gw(n){const e={},t=c(n,["format"]);t!=null&&f(e,["predictionsFormat"],t);const r=c(n,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const o=c(n,["bigqueryUri"]);if(o!=null&&f(e,["bigqueryDestination","outputUri"],o),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function nu(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const o=c(n,["metadata","state"]);o!=null&&f(e,["state"],vv(o));const l=c(n,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const u=c(n,["metadata","endTime"]);u!=null&&f(e,["endTime"],u);const h=c(n,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const m=c(n,["metadata","model"]);m!=null&&f(e,["model"],m);const g=c(n,["metadata","output"]);return g!=null&&f(e,["dest"],Ow(_v(g))),e}function Kd(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["displayName"]);r!=null&&f(e,["displayName"],r);const o=c(n,["state"]);o!=null&&f(e,["state"],vv(o));const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["createTime"]);u!=null&&f(e,["createTime"],u);const h=c(n,["startTime"]);h!=null&&f(e,["startTime"],h);const m=c(n,["endTime"]);m!=null&&f(e,["endTime"],m);const g=c(n,["updateTime"]);g!=null&&f(e,["updateTime"],g);const y=c(n,["model"]);y!=null&&f(e,["model"],y);const T=c(n,["inputConfig"]);T!=null&&f(e,["src"],Hw(T));const I=c(n,["outputConfig"]);I!=null&&f(e,["dest"],bw(_v(I)));const A=c(n,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function Hw(n){const e={},t=c(n,["instancesFormat"]);t!=null&&f(e,["format"],t);const r=c(n,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const o=c(n,["bigquerySource","inputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function zw(n,e){const t={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&f(t,["fileName"],r);const o=c(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>vA(n,u))),f(t,["requests","requests"],l)}return t}function $w(n){const e={},t=c(n,["format"]);t!=null&&f(e,["instancesFormat"],t);const r=c(n,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const o=c(n,["bigqueryUri"]);if(o!=null&&f(e,["bigquerySource","inputUri"],o),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ww(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Kw(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],as(n,r)),t}function Jw(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],as(n,r)),t}function Qw(n){const e={},t=c(n,["content"]);t!=null&&f(e,["content"],t);const r=c(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],Yw(r));const o=c(n,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const l=c(n,["finishReason"]);l!=null&&f(e,["finishReason"],l);const u=c(n,["avgLogprobs"]);u!=null&&f(e,["avgLogprobs"],u);const h=c(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const m=c(n,["index"]);m!=null&&f(e,["index"],m);const g=c(n,["logprobsResult"]);g!=null&&f(e,["logprobsResult"],g);const y=c(n,["safetyRatings"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(A=>A)),f(e,["safetyRatings"],I)}const T=c(n,["urlContextMetadata"]);return T!=null&&f(e,["urlContextMetadata"],T),e}function Yw(n){const e={},t=c(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["citations"],r)}return e}function Ev(n){const e={},t=c(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>RA(l))),f(e,["parts"],o)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function Xw(n,e){const t={},r=c(n,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Zw(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(n,["dest"]);return e!==void 0&&o!=null&&f(e,["outputConfig"],Gw(qw(o))),t}function dy(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["src"]);o!=null&&f(t,["batch","inputConfig"],zw(n,yv(n,o)));const l=c(e,["config"]);return l!=null&&Xw(l,t),t}function jw(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["model"],Oe(n,r));const o=c(e,["src"]);o!=null&&f(t,["inputConfig"],$w(yv(n,o)));const l=c(e,["config"]);return l!=null&&Zw(l,t),t}function eA(n,e){const t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),t}function tA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["src"]);o!=null&&f(t,["batch","inputConfig"],aA(n,o));const l=c(e,["config"]);return l!=null&&eA(l,t),t}function nA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],as(n,r)),t}function rA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],as(n,r)),t}function iA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);return l!=null&&f(e,["error"],l),e}function oA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);return l!=null&&f(e,["error"],l),e}function sA(n,e){const t={},r=c(e,["contents"]);if(r!=null){let l=qf(n,r);Array.isArray(l)&&(l=l.map(u=>u)),f(t,["requests[]","request","content"],l)}const o=c(e,["config"]);return o!=null&&(f(t,["_self"],lA(o,t)),rw(t,{"requests[].*":"requests[].request.*"})),t}function lA(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const o=c(n,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const l=c(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function aA(n,e){const t={},r=c(e,["fileName"]);r!=null&&f(t,["file_name"],r);const o=c(e,["inlinedRequests"]);return o!=null&&f(t,["requests"],sA(n,o)),t}function uA(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function cA(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const o=c(n,["name"]);if(o!=null&&f(e,["name"],o),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dA(n){const e={},t=c(n,["mode"]);t!=null&&f(e,["mode"],t);const r=c(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fA(n,e,t){const r={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&f(t,["systemInstruction"],Ev(zt(o)));const l=c(e,["temperature"]);l!=null&&f(r,["temperature"],l);const u=c(e,["topP"]);u!=null&&f(r,["topP"],u);const h=c(e,["topK"]);h!=null&&f(r,["topK"],h);const m=c(e,["candidateCount"]);m!=null&&f(r,["candidateCount"],m);const g=c(e,["maxOutputTokens"]);g!=null&&f(r,["maxOutputTokens"],g);const y=c(e,["stopSequences"]);y!=null&&f(r,["stopSequences"],y);const T=c(e,["responseLogprobs"]);T!=null&&f(r,["responseLogprobs"],T);const I=c(e,["logprobs"]);I!=null&&f(r,["logprobs"],I);const A=c(e,["presencePenalty"]);A!=null&&f(r,["presencePenalty"],A);const B=c(e,["frequencyPenalty"]);B!=null&&f(r,["frequencyPenalty"],B);const U=c(e,["seed"]);U!=null&&f(r,["seed"],U);const q=c(e,["responseMimeType"]);q!=null&&f(r,["responseMimeType"],q);const K=c(e,["responseSchema"]);K!=null&&f(r,["responseSchema"],Of(K));const X=c(e,["responseJsonSchema"]);if(X!=null&&f(r,["responseJsonSchema"],X),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=c(e,["safetySettings"]);if(t!==void 0&&Q!=null){let x=Q;Array.isArray(x)&&(x=x.map(Fe=>PA(Fe))),f(t,["safetySettings"],x)}const ie=c(e,["tools"]);if(t!==void 0&&ie!=null){let x=ls(ie);Array.isArray(x)&&(x=x.map(Fe=>NA(ss(Fe)))),f(t,["tools"],x)}const se=c(e,["toolConfig"]);if(t!==void 0&&se!=null&&f(t,["toolConfig"],xA(se)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=c(e,["cachedContent"]);t!==void 0&&le!=null&&f(t,["cachedContent"],Rr(n,le));const M=c(e,["responseModalities"]);M!=null&&f(r,["responseModalities"],M);const P=c(e,["mediaResolution"]);P!=null&&f(r,["mediaResolution"],P);const R=c(e,["speechConfig"]);if(R!=null&&f(r,["speechConfig"],bf(R)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=c(e,["thinkingConfig"]);k!=null&&f(r,["thinkingConfig"],k);const L=c(e,["imageConfig"]);L!=null&&f(r,["imageConfig"],_A(L));const O=c(e,["enableEnhancedCivicAnswers"]);return O!=null&&f(r,["enableEnhancedCivicAnswers"],O),r}function hA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(g=>Qw(g))),f(e,["candidates"],m)}const o=c(n,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const l=c(n,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const u=c(n,["responseId"]);u!=null&&f(e,["responseId"],u);const h=c(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function pA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],as(n,r)),t}function mA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],as(n,r)),t}function gA(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function yA(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function _A(n){const e={},t=c(n,["aspectRatio"]);t!=null&&f(e,["aspectRatio"],t);const r=c(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["request","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let h=Sn(o);Array.isArray(h)&&(h=h.map(m=>Ev(m))),f(t,["request","contents"],h)}const l=c(e,["metadata"]);l!=null&&f(t,["metadata"],l);const u=c(e,["config"]);return u!=null&&f(t,["request","generationConfig"],fA(n,u,c(t,["request"],{}))),t}function EA(n){const e={},t=c(n,["response"]);t!=null&&f(e,["response"],hA(t));const r=c(n,["error"]);return r!=null&&f(e,["error"],r),e}function TA(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);if(e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function IA(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const l=c(n,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),t}function SA(n){const e={},t=c(n,["config"]);return t!=null&&TA(t,e),e}function CA(n){const e={},t=c(n,["config"]);return t!=null&&IA(t,e),e}function wA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>nu(u))),f(e,["batchJobs"],l)}return e}function AA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Kd(u))),f(e,["batchJobs"],l)}return e}function RA(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const o=c(n,["executableCode"]);o!=null&&f(e,["executableCode"],o);const l=c(n,["fileData"]);l!=null&&f(e,["fileData"],uA(l));const u=c(n,["functionCall"]);u!=null&&f(e,["functionCall"],cA(u));const h=c(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],Ww(m));const g=c(n,["text"]);g!=null&&f(e,["text"],g);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&f(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function PA(n){const e={},t=c(n,["category"]);if(t!=null&&f(e,["category"],t),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function xA(n){const e={},t=c(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],dA(t));const r=c(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function NA(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),f(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(n,["computerUse"]);o!=null&&f(e,["computerUse"],o);const l=c(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const u=c(n,["codeExecution"]);if(u!=null&&f(e,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],gA(h));const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],yA(m));const g=c(n,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}var wr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(wr||(wr={}));class $i{constructor(e,t,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,o)}init(e,t,r){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class kA extends Ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $i(wr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=dy(this.apiClient,e),r=t._url,o=ae("{model}:batchGenerateContent",r),h=t.batch.inputConfig.requests,m=h.requests,g=[];for(const y of m){const T=Object.assign({},y);if(T.systemInstruction){const I=T.systemInstruction;delete T.systemInstruction;const A=T.request;A.systemInstruction=I,T.request=A}g.push(T)}return h.requests=g,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?r.dest=`${l.slice(0,-6)}/dest`:r.dest=`${l}_dest_${o}`;else if(u)r.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=jw(this.apiClient,e);return h=ae("batchPredictionJobs",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Kd(y))}else{const g=dy(this.apiClient,e);return h=ae("{model}:batchGenerateContent",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>nu(y))}}async createEmbeddingsInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tA(this.apiClient,e);return l=ae("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>nu(m))}}async get(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=mA(this.apiClient,e);return h=ae("batchPredictionJobs/{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Kd(y))}else{const g=pA(this.apiClient,e);return h=ae("batches/{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>nu(y))}}async cancel(e){var t,r,o,l;let u="",h={};if(this.apiClient.isVertexAI()){const m=Jw(this.apiClient,e);u=ae("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const m=Kw(this.apiClient,e);u=ae("batches/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=CA(e);return h=ae("batchPredictionJobs",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=AA(y),I=new ly;return Object.assign(I,T),I})}else{const g=SA(e);return h=ae("batches",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=wA(y),I=new ly;return Object.assign(I,T),I})}}async delete(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=rA(this.apiClient,e);return h=ae("batchPredictionJobs/{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>oA(y))}else{const g=nA(this.apiClient,e);return h=ae("batches/{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>iA(y))}}}function MA(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function fy(n){const e={},t=c(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>tR(l))),f(e,["parts"],o)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function DA(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const o=c(n,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const l=c(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const u=c(n,["contents"]);if(e!==void 0&&u!=null){let y=Sn(u);Array.isArray(y)&&(y=y.map(T=>fy(T))),f(e,["contents"],y)}const h=c(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],fy(zt(h)));const m=c(n,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(T=>rR(T))),f(e,["tools"],y)}const g=c(n,["toolConfig"]);if(e!==void 0&&g!=null&&f(e,["toolConfig"],nR(g)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function VA(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const o=c(n,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const l=c(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const u=c(n,["contents"]);if(e!==void 0&&u!=null){let T=Sn(u);Array.isArray(T)&&(T=T.map(I=>I)),f(e,["contents"],T)}const h=c(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],zt(h));const m=c(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(I=>iR(I))),f(e,["tools"],T)}const g=c(n,["toolConfig"]);e!==void 0&&g!=null&&f(e,["toolConfig"],g);const y=c(n,["kmsKeyName"]);return e!==void 0&&y!=null&&f(e,["encryption_spec","kmsKeyName"],y),t}function LA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["model"],av(n,r));const o=c(e,["config"]);return o!=null&&DA(o,t),t}function FA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["model"],av(n,r));const o=c(e,["config"]);return o!=null&&VA(o,t),t}function UA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Rr(n,r)),t}function BA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Rr(n,r)),t}function qA(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function OA(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function bA(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function GA(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const o=c(n,["name"]);if(o!=null&&f(e,["name"],o),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HA(n){const e={},t=c(n,["mode"]);t!=null&&f(e,["mode"],t);const r=c(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zA(n){const e={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=c(n,["description"]);t!=null&&f(e,["description"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const o=c(n,["parameters"]);o!=null&&f(e,["parameters"],o);const l=c(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const u=c(n,["response"]);u!=null&&f(e,["response"],u);const h=c(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function $A(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Rr(n,r)),t}function WA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Rr(n,r)),t}function KA(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function JA(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function QA(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),t}function YA(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),t}function XA(n){const e={},t=c(n,["config"]);return t!=null&&QA(t,e),e}function ZA(n){const e={},t=c(n,["config"]);return t!=null&&YA(t,e),e}function jA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["cachedContents"],l)}return e}function eR(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["cachedContents"],l)}return e}function tR(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const o=c(n,["executableCode"]);o!=null&&f(e,["executableCode"],o);const l=c(n,["fileData"]);l!=null&&f(e,["fileData"],bA(l));const u=c(n,["functionCall"]);u!=null&&f(e,["functionCall"],GA(u));const h=c(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],MA(m));const g=c(n,["text"]);g!=null&&f(e,["text"],g);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&f(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function nR(n){const e={},t=c(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],HA(t));const r=c(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function rR(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),f(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(n,["computerUse"]);o!=null&&f(e,["computerUse"],o);const l=c(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const u=c(n,["codeExecution"]);if(u!=null&&f(e,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],KA(h));const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],JA(m));const g=c(n,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function iR(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(I=>zA(I))),f(e,["functionDeclarations"],T)}const r=c(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const o=c(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=c(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(n,["codeExecution"]);u!=null&&f(e,["codeExecution"],u);const h=c(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const m=c(n,["googleMaps"]);m!=null&&f(e,["googleMaps"],m);const g=c(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const y=c(n,["urlContext"]);return y!=null&&f(e,["urlContext"],y),e}function oR(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const o=c(n,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),t}function sR(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const o=c(n,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),t}function lR(n,e){const t={},r=c(e,["name"]);r!=null&&f(t,["_url","name"],Rr(n,r));const o=c(e,["config"]);return o!=null&&oR(o,t),t}function aR(n,e){const t={},r=c(e,["name"]);r!=null&&f(t,["_url","name"],Rr(n,r));const o=c(e,["config"]);return o!=null&&sR(o,t),t}class uR extends Ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $i(wr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=FA(this.apiClient,e);return h=ae("cachedContents",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const g=LA(this.apiClient,e);return h=ae("cachedContents",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=WA(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const g=$A(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=BA(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=OA(y),I=new oy;return Object.assign(I,T),I})}else{const g=UA(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=qA(y),I=new oy;return Object.assign(I,T),I})}}async update(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=aR(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const g=lR(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=ZA(e);return h=ae("cachedContents",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=eR(y),I=new sy;return Object.assign(I,T),I})}else{const g=XA(e);return h=ae("cachedContents",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=jA(y),I=new sy;return Object.assign(I,T),I})}}}function hy(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function je(n){return this instanceof je?(this.v=n,this):new je(n)}function Wo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(A){return function(B){return Promise.resolve(B).then(A,T)}}function h(A,B){r[A]&&(o[A]=function(U){return new Promise(function(q,K){l.push([A,U,q,K])>1||m(A,U)})},B&&(o[A]=B(o[A])))}function m(A,B){try{g(r[A](B))}catch(U){I(l[0][3],U)}}function g(A){A.value instanceof je?Promise.resolve(A.value.v).then(y,T):I(l[0][2],A)}function y(A){m("next",A)}function T(A){m("throw",A)}function I(A,B){A(B),l.shift(),l.length&&m(l[0][0],l[0][1])}}function hl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hy=="function"?hy(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=n[l]&&function(u){return new Promise(function(h,m){u=n[l](u),o(h,m,u.done,u.value)})}}function o(l,u,h,m){Promise.resolve(m).then(function(g){l({value:g,done:h})},u)}}function cR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Tv(t)}function Tv(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function dR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function py(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const o=[];let l=!0;for(;r<t&&n[r].role==="model";)o.push(n[r]),l&&!Tv(n[r])&&(l=!1),r++;l?e.push(...o):e.pop()}return e}class fR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new hR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class hR{constructor(e,t,r,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),dR(l)}async sendMessage(e){var t;await this.sendPromise;const r=zt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const m=await o,g=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=m.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let I=[];y!=null&&(I=(h=y.slice(T))!==null&&h!==void 0?h:[]);const A=g?[g]:[];this.recordHistory(r,A,I)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const r=zt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,r)}getHistory(e=!1){const t=e?py(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Wo(this,arguments,function*(){var o,l,u,h,m,g;const y=[];try{for(var T=!0,I=hl(e),A;A=yield je(I.next()),o=A.done,!o;T=!0){h=A.value,T=!1;const B=h;if(cR(B)){const U=(g=(m=B.candidates)===null||m===void 0?void 0:m[0])===null||g===void 0?void 0:g.content;U!==void 0&&y.push(U)}yield yield je(B)}}catch(B){l={error:B}}finally{try{!T&&!o&&(u=I.return)&&(yield je(u.call(I)))}finally{if(l)throw l.error}}this.recordHistory(t,y)})}recordHistory(e,t,r){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...py(r)):this.history.push(e),this.history.push(...o)}}class Mu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Mu.prototype)}}function pR(n){const e={},t=c(n,["file"]);return t!=null&&f(e,["file"],t),e}function mR(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function gR(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","file"],pv(t)),e}function yR(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function _R(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","file"],pv(t)),e}function vR(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),t}function ER(n){const e={},t=c(n,["config"]);return t!=null&&vR(t,e),e}function TR(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["files"],l)}return e}class IR extends Ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $i(wr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ER(e);return l=ae("files",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const g=TR(m),y=new Aw;return Object.assign(y,g),y})}}async createInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pR(e);return l=ae("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=mR(m),y=new Rw;return Object.assign(y,g),y})}}async get(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_R(e);return l=ae("files/{file}",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gR(e);return l=ae("files/{file}",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const g=yR(m),y=new Pw;return Object.assign(y,g),y})}}}function ru(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function SR(n){const e={},t=c(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>qR(l))),f(e,["parts"],o)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function CR(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function wR(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const o=c(n,["name"]);if(o!=null&&f(e,["name"],o),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AR(n){const e={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=c(n,["description"]);t!=null&&f(e,["description"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const o=c(n,["parameters"]);o!=null&&f(e,["parameters"],o);const l=c(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const u=c(n,["response"]);u!=null&&f(e,["response"],u);const h=c(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function RR(n){const e={},t=c(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);const r=c(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const o=c(n,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const l=c(n,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const u=c(n,["enableAffectiveDialog"]);u!=null&&f(e,["enableAffectiveDialog"],u);const h=c(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const m=c(n,["logprobs"]);m!=null&&f(e,["logprobs"],m);const g=c(n,["maxOutputTokens"]);g!=null&&f(e,["maxOutputTokens"],g);const y=c(n,["mediaResolution"]);y!=null&&f(e,["mediaResolution"],y);const T=c(n,["presencePenalty"]);T!=null&&f(e,["presencePenalty"],T);const I=c(n,["responseLogprobs"]);I!=null&&f(e,["responseLogprobs"],I);const A=c(n,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const B=c(n,["responseModalities"]);B!=null&&f(e,["responseModalities"],B);const U=c(n,["responseSchema"]);U!=null&&f(e,["responseSchema"],U);const q=c(n,["routingConfig"]);q!=null&&f(e,["routingConfig"],q);const K=c(n,["seed"]);K!=null&&f(e,["seed"],K);const X=c(n,["speechConfig"]);X!=null&&f(e,["speechConfig"],Iv(X));const Q=c(n,["stopSequences"]);Q!=null&&f(e,["stopSequences"],Q);const ie=c(n,["temperature"]);ie!=null&&f(e,["temperature"],ie);const se=c(n,["thinkingConfig"]);se!=null&&f(e,["thinkingConfig"],se);const le=c(n,["topK"]);le!=null&&f(e,["topK"],le);const M=c(n,["topP"]);if(M!=null&&f(e,["topP"],M),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function PR(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function xR(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function NR(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const o=c(n,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const l=c(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const u=c(n,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const h=c(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=c(n,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const g=c(n,["mediaResolution"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","mediaResolution"],g);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","seed"],y);const T=c(n,["speechConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","speechConfig"],Gf(T));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&f(e,["setup","generationConfig","thinkingConfig"],I);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const B=c(n,["systemInstruction"]);e!==void 0&&B!=null&&f(e,["setup","systemInstruction"],SR(zt(B)));const U=c(n,["tools"]);if(e!==void 0&&U!=null){let le=ls(U);Array.isArray(le)&&(le=le.map(M=>bR(ss(M)))),f(e,["setup","tools"],le)}const q=c(n,["sessionResumption"]);e!==void 0&&q!=null&&f(e,["setup","sessionResumption"],OR(q));const K=c(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","inputAudioTranscription"],K);const X=c(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&f(e,["setup","outputAudioTranscription"],X);const Q=c(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&f(e,["setup","realtimeInputConfig"],Q);const ie=c(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&f(e,["setup","contextWindowCompression"],ie);const se=c(n,["proactivity"]);return e!==void 0&&se!=null&&f(e,["setup","proactivity"],se),t}function kR(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],RR(r));const o=c(n,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const l=c(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const u=c(n,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const h=c(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=c(n,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const g=c(n,["mediaResolution"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","mediaResolution"],g);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","seed"],y);const T=c(n,["speechConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","speechConfig"],Iv(Gf(T)));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&f(e,["setup","generationConfig","thinkingConfig"],I);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const B=c(n,["systemInstruction"]);e!==void 0&&B!=null&&f(e,["setup","systemInstruction"],zt(B));const U=c(n,["tools"]);if(e!==void 0&&U!=null){let le=ls(U);Array.isArray(le)&&(le=le.map(M=>GR(ss(M)))),f(e,["setup","tools"],le)}const q=c(n,["sessionResumption"]);e!==void 0&&q!=null&&f(e,["setup","sessionResumption"],q);const K=c(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","inputAudioTranscription"],K);const X=c(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&f(e,["setup","outputAudioTranscription"],X);const Q=c(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&f(e,["setup","realtimeInputConfig"],Q);const ie=c(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&f(e,["setup","contextWindowCompression"],ie);const se=c(n,["proactivity"]);return e!==void 0&&se!=null&&f(e,["setup","proactivity"],se),t}function MR(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["setup","model"],Oe(n,r));const o=c(e,["config"]);return o!=null&&f(t,["config"],NR(o,t)),t}function DR(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["setup","model"],Oe(n,r));const o=c(e,["config"]);return o!=null&&f(t,["config"],kR(o,t)),t}function VR(n){const e={},t=c(n,["musicGenerationConfig"]);return t!=null&&f(e,["musicGenerationConfig"],t),e}function LR(n){const e={},t=c(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["weightedPrompts"],r)}return e}function FR(n){const e={},t=c(n,["media"]);if(t!=null){let g=uv(t);Array.isArray(g)&&(g=g.map(y=>ru(y))),f(e,["mediaChunks"],g)}const r=c(n,["audio"]);r!=null&&f(e,["audio"],ru(dv(r)));const o=c(n,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const l=c(n,["video"]);l!=null&&f(e,["video"],ru(cv(l)));const u=c(n,["text"]);u!=null&&f(e,["text"],u);const h=c(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const m=c(n,["activityEnd"]);return m!=null&&f(e,["activityEnd"],m),e}function UR(n){const e={},t=c(n,["media"]);if(t!=null){let g=uv(t);Array.isArray(g)&&(g=g.map(y=>y)),f(e,["mediaChunks"],g)}const r=c(n,["audio"]);r!=null&&f(e,["audio"],dv(r));const o=c(n,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const l=c(n,["video"]);l!=null&&f(e,["video"],cv(l));const u=c(n,["text"]);u!=null&&f(e,["text"],u);const h=c(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const m=c(n,["activityEnd"]);return m!=null&&f(e,["activityEnd"],m),e}function BR(n){const e={},t=c(n,["setupComplete"]);t!=null&&f(e,["setupComplete"],t);const r=c(n,["serverContent"]);r!=null&&f(e,["serverContent"],r);const o=c(n,["toolCall"]);o!=null&&f(e,["toolCall"],o);const l=c(n,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const u=c(n,["usageMetadata"]);u!=null&&f(e,["usageMetadata"],HR(u));const h=c(n,["goAway"]);h!=null&&f(e,["goAway"],h);const m=c(n,["sessionResumptionUpdate"]);return m!=null&&f(e,["sessionResumptionUpdate"],m),e}function qR(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const o=c(n,["executableCode"]);o!=null&&f(e,["executableCode"],o);const l=c(n,["fileData"]);l!=null&&f(e,["fileData"],CR(l));const u=c(n,["functionCall"]);u!=null&&f(e,["functionCall"],wR(u));const h=c(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],ru(m));const g=c(n,["text"]);g!=null&&f(e,["text"],g);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&f(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function OR(n){const e={},t=c(n,["handle"]);if(t!=null&&f(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Iv(n){const e={},t=c(n,["voiceConfig"]);t!=null&&f(e,["voiceConfig"],t);const r=c(n,["languageCode"]);if(r!=null&&f(e,["languageCode"],r),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function bR(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),f(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(n,["computerUse"]);o!=null&&f(e,["computerUse"],o);const l=c(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const u=c(n,["codeExecution"]);if(u!=null&&f(e,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],PR(h));const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],xR(m));const g=c(n,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function GR(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(I=>AR(I))),f(e,["functionDeclarations"],T)}const r=c(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const o=c(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=c(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(n,["codeExecution"]);u!=null&&f(e,["codeExecution"],u);const h=c(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const m=c(n,["googleMaps"]);m!=null&&f(e,["googleMaps"],m);const g=c(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const y=c(n,["urlContext"]);return y!=null&&f(e,["urlContext"],y),e}function HR(n){const e={},t=c(n,["promptTokenCount"]);t!=null&&f(e,["promptTokenCount"],t);const r=c(n,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const o=c(n,["candidatesTokenCount"]);o!=null&&f(e,["responseTokenCount"],o);const l=c(n,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const u=c(n,["thoughtsTokenCount"]);u!=null&&f(e,["thoughtsTokenCount"],u);const h=c(n,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const m=c(n,["promptTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(B=>B)),f(e,["promptTokensDetails"],A)}const g=c(n,["cacheTokensDetails"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(B=>B)),f(e,["cacheTokensDetails"],A)}const y=c(n,["candidatesTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(B=>B)),f(e,["responseTokensDetails"],A)}const T=c(n,["toolUsePromptTokensDetails"]);if(T!=null){let A=T;Array.isArray(A)&&(A=A.map(B=>B)),f(e,["toolUsePromptTokensDetails"],A)}const I=c(n,["trafficType"]);return I!=null&&f(e,["trafficType"],I),e}function zR(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function $R(n){const e={},t=c(n,["content"]);t!=null&&f(e,["content"],t);const r=c(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],WR(r));const o=c(n,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const l=c(n,["finishReason"]);l!=null&&f(e,["finishReason"],l);const u=c(n,["avgLogprobs"]);u!=null&&f(e,["avgLogprobs"],u);const h=c(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const m=c(n,["index"]);m!=null&&f(e,["index"],m);const g=c(n,["logprobsResult"]);g!=null&&f(e,["logprobsResult"],g);const y=c(n,["safetyRatings"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(A=>A)),f(e,["safetyRatings"],I)}const T=c(n,["urlContextMetadata"]);return T!=null&&f(e,["urlContextMetadata"],T),e}function WR(n){const e={},t=c(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["citations"],r)}return e}function KR(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let l=Sn(o);Array.isArray(l)&&(l=l.map(u=>u)),f(t,["contents"],l)}return t}function JR(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["tokensInfo"],o)}return e}function QR(n){const e={},t=c(n,["values"]);t!=null&&f(e,["values"],t);const r=c(n,["statistics"]);return r!=null&&f(e,["statistics"],YR(r)),e}function YR(n){const e={},t=c(n,["truncated"]);t!=null&&f(e,["truncated"],t);const r=c(n,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function Du(n){const e={},t=c(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ox(l))),f(e,["parts"],o)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function XR(n){const e={},t=c(n,["controlType"]);t!=null&&f(e,["controlType"],t);const r=c(n,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function ZR(n){const e={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function jR(n,e){const t={},r=c(n,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],zt(r));const o=c(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Rv(h))),f(e,["tools"],u)}const l=c(n,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],zP(l)),t}function eP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let u=Sn(o);Array.isArray(u)&&(u=u.map(h=>Du(h))),f(t,["contents"],u)}const l=c(e,["config"]);return l!=null&&ZR(l),t}function tP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let u=Sn(o);Array.isArray(u)&&(u=u.map(h=>h)),f(t,["contents"],u)}const l=c(e,["config"]);return l!=null&&jR(l,t),t}function nP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const o=c(n,["cachedContentTokenCount"]);return o!=null&&f(e,["cachedContentTokenCount"],o),e}function rP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function iP(n,e){const t={},r=c(e,["model"]);return r!=null&&f(t,["_url","name"],Oe(n,r)),t}function oP(n,e){const t={},r=c(e,["model"]);return r!=null&&f(t,["_url","name"],Oe(n,r)),t}function sP(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function lP(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function aP(n,e){const t={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(n,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const l=c(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const u=c(n,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const h=c(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const g=c(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&f(e,["parameters","includeSafetyAttributes"],T);const I=c(n,["includeRaiReason"]);e!==void 0&&I!=null&&f(e,["parameters","includeRaiReason"],I);const A=c(n,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const B=c(n,["outputMimeType"]);e!==void 0&&B!=null&&f(e,["parameters","outputOptions","mimeType"],B);const U=c(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&f(e,["parameters","outputOptions","compressionQuality"],U);const q=c(n,["addWatermark"]);e!==void 0&&q!=null&&f(e,["parameters","addWatermark"],q);const K=c(n,["labels"]);e!==void 0&&K!=null&&f(e,["labels"],K);const X=c(n,["editMode"]);e!==void 0&&X!=null&&f(e,["parameters","editMode"],X);const Q=c(n,["baseSteps"]);return e!==void 0&&Q!=null&&f(e,["parameters","editConfig","baseSteps"],Q),t}function uP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["prompt"]);o!=null&&f(t,["instances[0]","prompt"],o);const l=c(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>dx(m))),f(t,["instances[0]","referenceImages"],h)}const u=c(e,["config"]);return u!=null&&aP(u,t),t}function cP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Vu(l))),f(e,["generatedImages"],o)}return e}function dP(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const o=c(n,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const l=c(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function fP(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const o=c(n,["title"]);e!==void 0&&o!=null&&f(e,["instances[]","title"],o);const l=c(n,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const u=c(n,["mimeType"]);e!==void 0&&u!=null&&f(e,["instances[]","mimeType"],u);const h=c(n,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),t}function hP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let h=qf(n,o);Array.isArray(h)&&(h=h.map(m=>m)),f(t,["requests[]","content"],h)}const l=c(e,["config"]);l!=null&&dP(l,t);const u=c(e,["model"]);return u!==void 0&&f(t,["requests[]","model"],Oe(n,u)),t}function pP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let u=qf(n,o);Array.isArray(u)&&(u=u.map(h=>h)),f(t,["instances[]","content"],u)}const l=c(e,["config"]);return l!=null&&fP(l,t),t}function mP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["embeddings"],l)}const o=c(n,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function gP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>QR(u))),f(e,["embeddings"],l)}const o=c(n,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function yP(n){const e={},t=c(n,["endpoint"]);t!=null&&f(e,["name"],t);const r=c(n,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function _P(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function vP(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const o=c(n,["name"]);if(o!=null&&f(e,["name"],o),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EP(n){const e={},t=c(n,["mode"]);t!=null&&f(e,["mode"],t);const r=c(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function TP(n){const e={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=c(n,["description"]);t!=null&&f(e,["description"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const o=c(n,["parameters"]);o!=null&&f(e,["parameters"],o);const l=c(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const u=c(n,["response"]);u!=null&&f(e,["response"],u);const h=c(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function IP(n,e,t){const r={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&f(t,["systemInstruction"],Du(zt(o)));const l=c(e,["temperature"]);l!=null&&f(r,["temperature"],l);const u=c(e,["topP"]);u!=null&&f(r,["topP"],u);const h=c(e,["topK"]);h!=null&&f(r,["topK"],h);const m=c(e,["candidateCount"]);m!=null&&f(r,["candidateCount"],m);const g=c(e,["maxOutputTokens"]);g!=null&&f(r,["maxOutputTokens"],g);const y=c(e,["stopSequences"]);y!=null&&f(r,["stopSequences"],y);const T=c(e,["responseLogprobs"]);T!=null&&f(r,["responseLogprobs"],T);const I=c(e,["logprobs"]);I!=null&&f(r,["logprobs"],I);const A=c(e,["presencePenalty"]);A!=null&&f(r,["presencePenalty"],A);const B=c(e,["frequencyPenalty"]);B!=null&&f(r,["frequencyPenalty"],B);const U=c(e,["seed"]);U!=null&&f(r,["seed"],U);const q=c(e,["responseMimeType"]);q!=null&&f(r,["responseMimeType"],q);const K=c(e,["responseSchema"]);K!=null&&f(r,["responseSchema"],Of(K));const X=c(e,["responseJsonSchema"]);if(X!=null&&f(r,["responseJsonSchema"],X),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=c(e,["safetySettings"]);if(t!==void 0&&Q!=null){let x=Q;Array.isArray(x)&&(x=x.map(Fe=>fx(Fe))),f(t,["safetySettings"],x)}const ie=c(e,["tools"]);if(t!==void 0&&ie!=null){let x=ls(ie);Array.isArray(x)&&(x=x.map(Fe=>vx(ss(Fe)))),f(t,["tools"],x)}const se=c(e,["toolConfig"]);if(t!==void 0&&se!=null&&f(t,["toolConfig"],_x(se)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=c(e,["cachedContent"]);t!==void 0&&le!=null&&f(t,["cachedContent"],Rr(n,le));const M=c(e,["responseModalities"]);M!=null&&f(r,["responseModalities"],M);const P=c(e,["mediaResolution"]);P!=null&&f(r,["mediaResolution"],P);const R=c(e,["speechConfig"]);if(R!=null&&f(r,["speechConfig"],bf(R)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=c(e,["thinkingConfig"]);k!=null&&f(r,["thinkingConfig"],k);const L=c(e,["imageConfig"]);L!=null&&f(r,["imageConfig"],QP(L));const O=c(e,["enableEnhancedCivicAnswers"]);return O!=null&&f(r,["enableEnhancedCivicAnswers"],O),r}function SP(n,e,t){const r={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&f(t,["systemInstruction"],zt(o));const l=c(e,["temperature"]);l!=null&&f(r,["temperature"],l);const u=c(e,["topP"]);u!=null&&f(r,["topP"],u);const h=c(e,["topK"]);h!=null&&f(r,["topK"],h);const m=c(e,["candidateCount"]);m!=null&&f(r,["candidateCount"],m);const g=c(e,["maxOutputTokens"]);g!=null&&f(r,["maxOutputTokens"],g);const y=c(e,["stopSequences"]);y!=null&&f(r,["stopSequences"],y);const T=c(e,["responseLogprobs"]);T!=null&&f(r,["responseLogprobs"],T);const I=c(e,["logprobs"]);I!=null&&f(r,["logprobs"],I);const A=c(e,["presencePenalty"]);A!=null&&f(r,["presencePenalty"],A);const B=c(e,["frequencyPenalty"]);B!=null&&f(r,["frequencyPenalty"],B);const U=c(e,["seed"]);U!=null&&f(r,["seed"],U);const q=c(e,["responseMimeType"]);q!=null&&f(r,["responseMimeType"],q);const K=c(e,["responseSchema"]);K!=null&&f(r,["responseSchema"],Of(K));const X=c(e,["responseJsonSchema"]);X!=null&&f(r,["responseJsonSchema"],X);const Q=c(e,["routingConfig"]);Q!=null&&f(r,["routingConfig"],Q);const ie=c(e,["modelSelectionConfig"]);ie!=null&&f(r,["modelConfig"],ie);const se=c(e,["safetySettings"]);if(t!==void 0&&se!=null){let Ke=se;Array.isArray(Ke)&&(Ke=Ke.map(Ue=>Ue)),f(t,["safetySettings"],Ke)}const le=c(e,["tools"]);if(t!==void 0&&le!=null){let Ke=ls(le);Array.isArray(Ke)&&(Ke=Ke.map(Ue=>Rv(ss(Ue)))),f(t,["tools"],Ke)}const M=c(e,["toolConfig"]);t!==void 0&&M!=null&&f(t,["toolConfig"],M);const P=c(e,["labels"]);t!==void 0&&P!=null&&f(t,["labels"],P);const R=c(e,["cachedContent"]);t!==void 0&&R!=null&&f(t,["cachedContent"],Rr(n,R));const k=c(e,["responseModalities"]);k!=null&&f(r,["responseModalities"],k);const L=c(e,["mediaResolution"]);L!=null&&f(r,["mediaResolution"],L);const O=c(e,["speechConfig"]);O!=null&&f(r,["speechConfig"],Av(bf(O)));const x=c(e,["audioTimestamp"]);x!=null&&f(r,["audioTimestamp"],x);const Fe=c(e,["thinkingConfig"]);Fe!=null&&f(r,["thinkingConfig"],Fe);const pt=c(e,["imageConfig"]);if(pt!=null&&f(r,["imageConfig"],YP(pt)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function my(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let u=Sn(o);Array.isArray(u)&&(u=u.map(h=>Du(h))),f(t,["contents"],u)}const l=c(e,["config"]);return l!=null&&f(t,["generationConfig"],IP(n,l,t)),t}function gy(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["contents"]);if(o!=null){let u=Sn(o);Array.isArray(u)&&(u=u.map(h=>h)),f(t,["contents"],u)}const l=c(e,["config"]);return l!=null&&f(t,["generationConfig"],SP(n,l,t)),t}function yy(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(g=>$R(g))),f(e,["candidates"],m)}const o=c(n,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const l=c(n,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const u=c(n,["responseId"]);u!=null&&f(e,["responseId"],u);const h=c(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function _y(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(y=>y)),f(e,["candidates"],g)}const o=c(n,["createTime"]);o!=null&&f(e,["createTime"],o);const l=c(n,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const u=c(n,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&f(e,["responseId"],h);const m=c(n,["usageMetadata"]);return m!=null&&f(e,["usageMetadata"],m),e}function CP(n,e){const t={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=c(n,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const l=c(n,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(n,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=c(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const g=c(n,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const y=c(n,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);const T=c(n,["outputMimeType"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","mimeType"],T);const I=c(n,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&f(e,["parameters","outputOptions","compressionQuality"],I),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(n,["imageSize"]);if(e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function wP(n,e){const t={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(n,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const l=c(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const u=c(n,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const h=c(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const g=c(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&f(e,["parameters","includeSafetyAttributes"],T);const I=c(n,["includeRaiReason"]);e!==void 0&&I!=null&&f(e,["parameters","includeRaiReason"],I);const A=c(n,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const B=c(n,["outputMimeType"]);e!==void 0&&B!=null&&f(e,["parameters","outputOptions","mimeType"],B);const U=c(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&f(e,["parameters","outputOptions","compressionQuality"],U);const q=c(n,["addWatermark"]);e!==void 0&&q!=null&&f(e,["parameters","addWatermark"],q);const K=c(n,["labels"]);e!==void 0&&K!=null&&f(e,["labels"],K);const X=c(n,["imageSize"]);e!==void 0&&X!=null&&f(e,["parameters","sampleImageSize"],X);const Q=c(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&f(e,["parameters","enhancePrompt"],Q),t}function AP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["prompt"]);o!=null&&f(t,["instances[0]","prompt"],o);const l=c(e,["config"]);return l!=null&&CP(l,t),t}function RP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["prompt"]);o!=null&&f(t,["instances[0]","prompt"],o);const l=c(e,["config"]);return l!=null&&wP(l,t),t}function PP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>OP(u))),f(e,["generatedImages"],l)}const o=c(n,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],Cv(o)),e}function xP(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Vu(u))),f(e,["generatedImages"],l)}const o=c(n,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],wv(o)),e}function NP(n,e){const t={},r=c(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=c(n,["durationSeconds"]);if(e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=c(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const u=c(n,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const h=c(n,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=c(n,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const g=c(n,["enhancePrompt"]);if(e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=c(n,["lastFrame"]);e!==void 0&&y!=null&&f(e,["instances[0]","lastFrame"],Lu(y));const T=c(n,["referenceImages"]);if(e!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(A=>Mx(A))),f(e,["instances[0]","referenceImages"],I)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function kP(n,e){const t={},r=c(n,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=c(n,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=c(n,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const u=c(n,["durationSeconds"]);e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u);const h=c(n,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const m=c(n,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const g=c(n,["resolution"]);e!==void 0&&g!=null&&f(e,["parameters","resolution"],g);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const T=c(n,["pubsubTopic"]);e!==void 0&&T!=null&&f(e,["parameters","pubsubTopic"],T);const I=c(n,["negativePrompt"]);e!==void 0&&I!=null&&f(e,["parameters","negativePrompt"],I);const A=c(n,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const B=c(n,["generateAudio"]);e!==void 0&&B!=null&&f(e,["parameters","generateAudio"],B);const U=c(n,["lastFrame"]);e!==void 0&&U!=null&&f(e,["instances[0]","lastFrame"],Gn(U));const q=c(n,["referenceImages"]);if(e!==void 0&&q!=null){let Q=q;Array.isArray(Q)&&(Q=Q.map(ie=>Dx(ie))),f(e,["instances[0]","referenceImages"],Q)}const K=c(n,["mask"]);e!==void 0&&K!=null&&f(e,["instances[0]","mask"],kx(K));const X=c(n,["compressionQuality"]);return e!==void 0&&X!=null&&f(e,["parameters","compressionQuality"],X),t}function MP(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response","generateVideoResponse"]);return u!=null&&f(e,["response"],FP(u)),e}function DP(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response"]);return u!=null&&f(e,["response"],UP(u)),e}function VP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["prompt"]);o!=null&&f(t,["instances[0]","prompt"],o);const l=c(e,["image"]);l!=null&&f(t,["instances[0]","image"],Lu(l));const u=c(e,["video"]);u!=null&&f(t,["instances[0]","video"],Pv(u));const h=c(e,["source"]);h!=null&&BP(h,t);const m=c(e,["config"]);return m!=null&&NP(m,t),t}function LP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["prompt"]);o!=null&&f(t,["instances[0]","prompt"],o);const l=c(e,["image"]);l!=null&&f(t,["instances[0]","image"],Gn(l));const u=c(e,["video"]);u!=null&&f(t,["instances[0]","video"],xv(u));const h=c(e,["source"]);h!=null&&qP(h,t);const m=c(e,["config"]);return m!=null&&kP(m,t),t}function FP(n){const e={},t=c(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>GP(u))),f(e,["generatedVideos"],l)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const o=c(n,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function UP(n){const e={},t=c(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>HP(u))),f(e,["generatedVideos"],l)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const o=c(n,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function BP(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const o=c(n,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Lu(o));const l=c(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],Pv(l)),t}function qP(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const o=c(n,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Gn(o));const l=c(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],xv(l)),t}function OP(n){const e={},t=c(n,["_self"]);t!=null&&f(e,["image"],XP(t));const r=c(n,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const o=c(n,["_self"]);return o!=null&&f(e,["safetyAttributes"],Cv(o)),e}function Vu(n){const e={},t=c(n,["_self"]);t!=null&&f(e,["image"],Sv(t));const r=c(n,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const o=c(n,["_self"]);o!=null&&f(e,["safetyAttributes"],wv(o));const l=c(n,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function bP(n){const e={},t=c(n,["_self"]);t!=null&&f(e,["mask"],Sv(t));const r=c(n,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["labels"],o)}return e}function GP(n){const e={},t=c(n,["video"]);return t!=null&&f(e,["video"],xx(t)),e}function HP(n){const e={},t=c(n,["_self"]);return t!=null&&f(e,["video"],Nx(t)),e}function zP(n){const e={},t=c(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);const r=c(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const o=c(n,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const l=c(n,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const u=c(n,["enableAffectiveDialog"]);u!=null&&f(e,["enableAffectiveDialog"],u);const h=c(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const m=c(n,["logprobs"]);m!=null&&f(e,["logprobs"],m);const g=c(n,["maxOutputTokens"]);g!=null&&f(e,["maxOutputTokens"],g);const y=c(n,["mediaResolution"]);y!=null&&f(e,["mediaResolution"],y);const T=c(n,["presencePenalty"]);T!=null&&f(e,["presencePenalty"],T);const I=c(n,["responseLogprobs"]);I!=null&&f(e,["responseLogprobs"],I);const A=c(n,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const B=c(n,["responseModalities"]);B!=null&&f(e,["responseModalities"],B);const U=c(n,["responseSchema"]);U!=null&&f(e,["responseSchema"],U);const q=c(n,["routingConfig"]);q!=null&&f(e,["routingConfig"],q);const K=c(n,["seed"]);K!=null&&f(e,["seed"],K);const X=c(n,["speechConfig"]);X!=null&&f(e,["speechConfig"],Av(X));const Q=c(n,["stopSequences"]);Q!=null&&f(e,["stopSequences"],Q);const ie=c(n,["temperature"]);ie!=null&&f(e,["temperature"],ie);const se=c(n,["thinkingConfig"]);se!=null&&f(e,["thinkingConfig"],se);const le=c(n,["topK"]);le!=null&&f(e,["topK"],le);const M=c(n,["topP"]);if(M!=null&&f(e,["topP"],M),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $P(n,e){const t={},r=c(e,["model"]);return r!=null&&f(t,["_url","name"],Oe(n,r)),t}function WP(n,e){const t={},r=c(e,["model"]);return r!=null&&f(t,["_url","name"],Oe(n,r)),t}function KP(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function JP(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function QP(n){const e={},t=c(n,["aspectRatio"]);t!=null&&f(e,["aspectRatio"],t);const r=c(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YP(n){const e={},t=c(n,["aspectRatio"]);t!=null&&f(e,["aspectRatio"],t);const r=c(n,["imageSize"]);r!=null&&f(e,["imageSize"],r);const o=c(n,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const l=c(n,["outputCompressionQuality"]);return l!=null&&f(e,["imageOutputOptions","compressionQuality"],l),e}function XP(n){const e={},t=c(n,["bytesBase64Encoded"]);t!=null&&f(e,["imageBytes"],li(t));const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Sv(n){const e={},t=c(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],li(r));const o=c(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Lu(n){const e={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=c(n,["imageBytes"]);t!=null&&f(e,["bytesBase64Encoded"],li(t));const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Gn(n){const e={},t=c(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);const r=c(n,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],li(r));const o=c(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function ZP(n,e,t){const r={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&f(t,["_query","pageToken"],l);const u=c(e,["filter"]);t!==void 0&&u!=null&&f(t,["_query","filter"],u);const h=c(e,["queryBase"]);return t!==void 0&&h!=null&&f(t,["_url","models_url"],mv(n,h)),r}function jP(n,e,t){const r={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&f(t,["_query","pageToken"],l);const u=c(e,["filter"]);t!==void 0&&u!=null&&f(t,["_query","filter"],u);const h=c(e,["queryBase"]);return t!==void 0&&h!=null&&f(t,["_url","models_url"],mv(n,h)),r}function ex(n,e){const t={},r=c(e,["config"]);return r!=null&&ZP(n,r,t),t}function tx(n,e){const t={},r=c(e,["config"]);return r!=null&&jP(n,r,t),t}function nx(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["_self"]);if(o!=null){let l=gv(o);Array.isArray(l)&&(l=l.map(u=>Jd(u))),f(e,["models"],l)}return e}function rx(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["_self"]);if(o!=null){let l=gv(o);Array.isArray(l)&&(l=l.map(u=>Qd(u))),f(e,["models"],l)}return e}function ix(n){const e={},t=c(n,["maskMode"]);t!=null&&f(e,["maskMode"],t);const r=c(n,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const o=c(n,["maskDilation"]);return o!=null&&f(e,["dilation"],o),e}function Jd(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["displayName"]);r!=null&&f(e,["displayName"],r);const o=c(n,["description"]);o!=null&&f(e,["description"],o);const l=c(n,["version"]);l!=null&&f(e,["version"],l);const u=c(n,["_self"]);u!=null&&f(e,["tunedModelInfo"],Ex(u));const h=c(n,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const m=c(n,["outputTokenLimit"]);m!=null&&f(e,["outputTokenLimit"],m);const g=c(n,["supportedGenerationMethods"]);g!=null&&f(e,["supportedActions"],g);const y=c(n,["temperature"]);y!=null&&f(e,["temperature"],y);const T=c(n,["maxTemperature"]);T!=null&&f(e,["maxTemperature"],T);const I=c(n,["topP"]);I!=null&&f(e,["topP"],I);const A=c(n,["topK"]);A!=null&&f(e,["topK"],A);const B=c(n,["thinking"]);return B!=null&&f(e,["thinking"],B),e}function Qd(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["displayName"]);r!=null&&f(e,["displayName"],r);const o=c(n,["description"]);o!=null&&f(e,["description"],o);const l=c(n,["versionId"]);l!=null&&f(e,["version"],l);const u=c(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(I=>yP(I))),f(e,["endpoints"],T)}const h=c(n,["labels"]);h!=null&&f(e,["labels"],h);const m=c(n,["_self"]);m!=null&&f(e,["tunedModelInfo"],Tx(m));const g=c(n,["defaultCheckpointId"]);g!=null&&f(e,["defaultCheckpointId"],g);const y=c(n,["checkpoints"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(I=>I)),f(e,["checkpoints"],T)}return e}function ox(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const o=c(n,["executableCode"]);o!=null&&f(e,["executableCode"],o);const l=c(n,["fileData"]);l!=null&&f(e,["fileData"],_P(l));const u=c(n,["functionCall"]);u!=null&&f(e,["functionCall"],vP(u));const h=c(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],zR(m));const g=c(n,["text"]);g!=null&&f(e,["text"],g);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&f(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function sx(n){const e={},t=c(n,["productImage"]);return t!=null&&f(e,["image"],Gn(t)),e}function lx(n,e){const t={},r=c(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=c(n,["baseSteps"]);e!==void 0&&o!=null&&f(e,["parameters","baseSteps"],o);const l=c(n,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const u=c(n,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const h=c(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const m=c(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const g=c(n,["addWatermark"]);e!==void 0&&g!=null&&f(e,["parameters","addWatermark"],g);const y=c(n,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const T=c(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","compressionQuality"],T);const I=c(n,["enhancePrompt"]);e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I);const A=c(n,["labels"]);return e!==void 0&&A!=null&&f(e,["labels"],A),t}function ax(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["source"]);o!=null&&cx(o,t);const l=c(e,["config"]);return l!=null&&lx(l,t),t}function ux(n){const e={},t=c(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>Vu(o))),f(e,["generatedImages"],r)}return e}function cx(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const o=c(n,["personImage"]);e!==void 0&&o!=null&&f(e,["instances[0]","personImage","image"],Gn(o));const l=c(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>sx(h))),f(e,["instances[0]","productImages"],u)}return t}function dx(n){const e={},t=c(n,["referenceImage"]);t!=null&&f(e,["referenceImage"],Gn(t));const r=c(n,["referenceId"]);r!=null&&f(e,["referenceId"],r);const o=c(n,["referenceType"]);o!=null&&f(e,["referenceType"],o);const l=c(n,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],ix(l));const u=c(n,["controlImageConfig"]);u!=null&&f(e,["controlImageConfig"],XR(u));const h=c(n,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const m=c(n,["subjectImageConfig"]);return m!=null&&f(e,["subjectImageConfig"],m),e}function Cv(n){const e={},t=c(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);const r=c(n,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const o=c(n,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function wv(n){const e={},t=c(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);const r=c(n,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const o=c(n,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function fx(n){const e={},t=c(n,["category"]);if(t!=null&&f(e,["category"],t),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function hx(n){const e={},t=c(n,["image"]);return t!=null&&f(e,["image"],Gn(t)),e}function px(n,e){const t={},r=c(n,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const o=c(n,["maxPredictions"]);e!==void 0&&o!=null&&f(e,["parameters","maxPredictions"],o);const l=c(n,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const u=c(n,["maskDilation"]);e!==void 0&&u!=null&&f(e,["parameters","maskDilation"],u);const h=c(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const m=c(n,["labels"]);return e!==void 0&&m!=null&&f(e,["labels"],m),t}function mx(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["source"]);o!=null&&yx(o,t);const l=c(e,["config"]);return l!=null&&px(l,t),t}function gx(n){const e={},t=c(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>bP(o))),f(e,["generatedMasks"],r)}return e}function yx(n,e){const t={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const o=c(n,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Gn(o));const l=c(n,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],hx(l)),t}function Av(n){const e={},t=c(n,["voiceConfig"]);t!=null&&f(e,["voiceConfig"],t);const r=c(n,["languageCode"]);if(r!=null&&f(e,["languageCode"],r),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function _x(n){const e={},t=c(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],EP(t));const r=c(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function vx(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),f(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(n,["computerUse"]);o!=null&&f(e,["computerUse"],o);const l=c(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const u=c(n,["codeExecution"]);if(u!=null&&f(e,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],KP(h));const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],JP(m));const g=c(n,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function Rv(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(I=>TP(I))),f(e,["functionDeclarations"],T)}const r=c(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const o=c(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=c(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(n,["codeExecution"]);u!=null&&f(e,["codeExecution"],u);const h=c(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const m=c(n,["googleMaps"]);m!=null&&f(e,["googleMaps"],m);const g=c(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const y=c(n,["urlContext"]);return y!=null&&f(e,["urlContext"],y),e}function Ex(n){const e={},t=c(n,["baseModel"]);t!=null&&f(e,["baseModel"],t);const r=c(n,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(n,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function Tx(n){const e={},t=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&f(e,["baseModel"],t);const r=c(n,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(n,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function Ix(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(n,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const l=c(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),t}function Sx(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(n,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const l=c(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),t}function Cx(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","name"],Oe(n,r));const o=c(e,["config"]);return o!=null&&Ix(o,t),t}function wx(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["config"]);return o!=null&&Sx(o,t),t}function Ax(n,e){const t={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const l=c(n,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const u=c(n,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const h=c(n,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const m=c(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const g=c(n,["enhanceInputImage"]);e!==void 0&&g!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],g);const y=c(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const T=c(n,["labels"]);e!==void 0&&T!=null&&f(e,["labels"],T);const I=c(n,["numberOfImages"]);e!==void 0&&I!=null&&f(e,["parameters","sampleCount"],I);const A=c(n,["mode"]);return e!==void 0&&A!=null&&f(e,["parameters","mode"],A),t}function Rx(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Oe(n,r));const o=c(e,["image"]);o!=null&&f(t,["instances[0]","image"],Gn(o));const l=c(e,["upscaleFactor"]);l!=null&&f(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=c(e,["config"]);return u!=null&&Ax(u,t),t}function Px(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Vu(l))),f(e,["generatedImages"],o)}return e}function xx(n){const e={},t=c(n,["uri"]);t!=null&&f(e,["uri"],t);const r=c(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],li(r));const o=c(n,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function Nx(n){const e={},t=c(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],li(r));const o=c(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function kx(n){const e={},t=c(n,["image"]);t!=null&&f(e,["_self"],Gn(t));const r=c(n,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function Mx(n){const e={},t=c(n,["image"]);t!=null&&f(e,["image"],Lu(t));const r=c(n,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function Dx(n){const e={},t=c(n,["image"]);t!=null&&f(e,["image"],Gn(t));const r=c(n,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function Pv(n){const e={},t=c(n,["uri"]);t!=null&&f(e,["uri"],t);const r=c(n,["videoBytes"]);r!=null&&f(e,["encodedVideo"],li(r));const o=c(n,["mimeType"]);return o!=null&&f(e,["encoding"],o),e}function xv(n){const e={},t=c(n,["uri"]);t!=null&&f(e,["gcsUri"],t);const r=c(n,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],li(r));const o=c(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Vx(n,e){const t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),t}function Lx(n){const e={},t=c(n,["config"]);return t!=null&&Vx(t,e),e}function Fx(n,e){const t={},r=c(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),t}function Ux(n){const e={},t=c(n,["name"]);t!=null&&f(e,["_url","name"],t);const r=c(n,["config"]);return r!=null&&Fx(r,e),e}function Bx(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","name"],t),e}function qx(n,e){const t={},r=c(n,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["customMetadata"],l)}const o=c(n,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),t}function Ox(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const o=c(n,["done"]);o!=null&&f(e,["done"],o);const l=c(n,["error"]);l!=null&&f(e,["error"],l);const u=c(n,["response"]);return u!=null&&f(e,["response"],Gx(u)),e}function bx(n){const e={},t=c(n,["fileSearchStoreName"]);t!=null&&f(e,["_url","file_search_store_name"],t);const r=c(n,["fileName"]);r!=null&&f(e,["fileName"],r);const o=c(n,["config"]);return o!=null&&qx(o,e),e}function Gx(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&f(e,["parent"],r);const o=c(n,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function Hx(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),t}function zx(n){const e={},t=c(n,["config"]);return t!=null&&Hx(t,e),e}function $x(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["fileSearchStores"],l)}return e}function Nv(n,e){const t={},r=c(n,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const o=c(n,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=c(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>m)),f(e,["customMetadata"],h)}const u=c(n,["chunkingConfig"]);return e!==void 0&&u!=null&&f(e,["chunkingConfig"],u),t}function Wx(n){const e={},t=c(n,["fileSearchStoreName"]);t!=null&&f(e,["_url","file_search_store_name"],t);const r=c(n,["config"]);return r!=null&&Nv(r,e),e}function Kx(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}const Jx="Content-Type",Qx="X-Server-Timeout",Yx="User-Agent",Yd="x-goog-api-client",Xx="1.32.0",Zx=`google-genai-sdk/${Xx}`,jx="v1beta1",eN="v1beta";class tN{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:jx,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:eN,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const o=[this.getRequestUrlInternal(t)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))o.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?r[o]=Object.assign(Object.assign({},r[o]),l):l!==void 0&&(r[o]=l);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&t?.timeout>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&nN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await vy(o),new $d(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await vy(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Wo(this,arguments,function*(){var r;const o=(r=e?.body)===null||r===void 0?void 0:r.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const h="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:g,value:y}=yield je(o.read());if(g){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(y,{stream:!0});try{const B=JSON.parse(T);if("error"in B){const U=JSON.parse(JSON.stringify(B.error)),q=U.status,K=U.code,X=`got status: ${q}. ${JSON.stringify(B)}`;if(K>=400&&K<600)throw new Mu({message:X,status:K})}}catch(B){if(B.name==="ApiError")throw B}u+=T;let I=-1,A=0;for(;;){I=-1,A=0;for(const q of m){const K=u.indexOf(q);K!==-1&&(I===-1||K<I)&&(I=K,A=q.length)}if(I===-1)break;const B=u.substring(0,I);u=u.substring(I+A);const U=B.trim();if(U.startsWith(h)){const q=U.substring(h.length).trim();try{const K=new Response(q,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield je(new $d(K))}catch(K){throw new Error(`exception parsing stream chunk ${q}. ${K}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=Zx+" "+this.clientOptions.userAgentExtra;return e[Yx]=t,e[Yd]=t,e[Jx]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))r.append(o,l);e.timeout&&e.timeout>0&&r.append(Qx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const h=(r=t?.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=h;const m={file:o},g=this.getFileName(e),y=ae("upload/v1beta/files",m._url),T=await this.fetchUploadUrl(y,o.sizeBytes,o.mimeType,g,m,t?.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,r){var o;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),m=(o=r?.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),T={};r!=null&&Nv(r,T);const I=await this.fetchUploadUrl(g,h,m,y,T,r?.httpOptions);return l.uploadToFileSearchStore(t,I,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,o,l,u){var h;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const g=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!g||!g?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(h=g?.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function vy(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(r);throw t>=400&&t<600?new Mu({message:o,status:t}):new Error(o)}}function nN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(l,u){const h=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const g=u[m],y=h[m];g&&typeof g=="object"&&!Array.isArray(g)&&y&&typeof y=="object"&&!Array.isArray(y)?h[m]=r(y,g):(y&&g&&typeof y!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof g}. Overwriting.`),h[m]=g)}return h}const o=r(t,e);n.body=JSON.stringify(o)}const rN="mcp_used/unknown";let iN=!1;function kv(n){for(const e of n)if(oN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return iN}function Mv(n){var e;const t=(e=n[Yd])!==null&&e!==void 0?e:"";n[Yd]=(t+` ${rN}`).trimStart()}function oN(n){return n!==null&&typeof n=="object"&&n instanceof Hf}function sN(n){return Wo(this,arguments,function*(t,r=100){let o,l=0;for(;l<r;){const u=yield je(t.listTools({cursor:o}));for(const h of u.tools)yield yield je(h),l++;if(!u.nextCursor)break;o=u.nextCursor}})}class Hf{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Hf(e,t)}async initialize(){var e,t,r,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var h=!0,m=(t=void 0,hl(sN(y))),g;g=await m.next(),e=g.done,!e;h=!0){o=g.value,h=!1;const T=o;u.push(T);const I=T.name;if(l[I])throw new Error(`Duplicate function name ${I} found in MCP tools. Please ensure function names are unique.`);l[I]=y}}catch(T){t={error:T}}finally{try{!h&&!e&&(r=m.return)&&await r.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Bw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:r.name,arguments:r.args},void 0,l);t.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return t}}async function lN(n,e,t){const r=new Nw;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(r,o),e(r)}class aN{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=dN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let g=()=>{};const y=new Promise(Q=>{g=Q}),T=e.callbacks,I=function(){g({})},A=this.apiClient,B={onopen:I,onmessage:Q=>{lN(A,T.onmessage,Q)},onerror:(t=T?.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(r=T?.onclose)!==null&&r!==void 0?r:function(Q){}},U=this.webSocketFactory.create(m,cN(u),B);U.connect(),await y;const X={setup:{model:Oe(this.apiClient,e.model)}};return U.send(JSON.stringify(X)),new uN(U,this.apiClient)}}class uN{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=LR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=VR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Go.PLAY)}pause(){this.sendPlaybackControl(Go.PAUSE)}stop(){this.sendPlaybackControl(Go.STOP)}resetContext(){this.sendPlaybackControl(Go.RESET_CONTEXT)}close(){this.conn.close()}}function cN(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function dN(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}const fN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hN(n,e,t){const r=new xw;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=BR(l);Object.assign(r,u)}else Object.assign(r,l);e(r)}class pN{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new aN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,o,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let y;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&kv(e.config.tools)&&Mv(T);const I=_N(T);if(this.apiClient.isVertexAI())y=`${m}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(I,y);else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",L="key";R?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",L="access_token"),y=`${m}/ws/google.ai.generativelanguage.${g}.GenerativeService.${k}?${L}=${R}`}let A=()=>{};const B=new Promise(R=>{A=R}),U=e.callbacks,q=function(){var R;(R=U?.onopen)===null||R===void 0||R.call(U),A({})},K=this.apiClient,X={onopen:q,onmessage:R=>{hN(K,U.onmessage,R)},onerror:(t=U?.onerror)!==null&&t!==void 0?t:function(R){},onclose:(r=U?.onclose)!==null&&r!==void 0?r:function(R){}},Q=this.webSocketFactory.create(y,yN(I),X);Q.connect(),await B;let ie=Oe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();ie=`projects/${R}/locations/${k}/`+ie}let se={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gu.AUDIO]}:e.config.responseModalities=[gu.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],M=[];for(const R of le)if(this.isCallableTool(R)){const k=R;M.push(await k.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const P={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=DR(this.apiClient,P):se=MR(this.apiClient,P),delete se.config,Q.send(JSON.stringify(se)),new gN(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mN={turnComplete:!0};class gN{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Sn(t.turns),e.isVertexAI()||(r=r.map(o=>Du(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(fN)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},mN),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:UR(e)}:t={realtimeInput:FR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function yN(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function _N(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}const Ey=10;function Ty(n){var e,t,r;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n?.tools)!==null&&t!==void 0?t:[])if(Ko(u)){o=!0;break}if(!o)return!0;const l=(r=n?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ko(n){return"callTool"in n&&typeof n.callTool=="function"}function vN(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ko(o)))!==null&&r!==void 0?r:!1}function Iy(n){var e;const t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,o)=>{if(Ko(r))return;const l=r;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function Sy(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class EN extends Ar{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,o,l,u,h;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!vN(t)||Ty(t.config))return await this.generateContentInternal(m);const g=Iy(t);if(g.length>0){const U=g.map(q=>`tools[${q}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let y,T;const I=Sn(m.contents),A=(l=(o=(r=m.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Ey;let B=0;for(;B<A&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const U=y.candidates[0].content,q=[];for(const K of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Ko(K)){const Q=await K.callTool(y.functionCalls);q.push(...Q)}B++,T={role:"user",parts:q},m.contents=Sn(m.contents),m.contents.push(U),m.contents.push(T),Sy(m.config)&&(I.push(U),I.push(T))}return Sy(m.config)&&(y.automaticFunctionCallingHistory=I),y},this.generateContentStream=async t=>{var r,o,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),Ty(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const m=Iy(t);if(m.length>0){const T=m.map(I=>`tools[${I}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const g=(l=(o=(r=t?.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(h=(u=t?.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(g&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var o;let l;const u=[];if(r?.generatedImages)for(const m of r.generatedImages)m&&m?.safetyAttributes&&((o=m?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m?.safetyAttributes:u.push(m);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:r.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},h}),this.list=async t=>{var r;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((r=u.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new $i(wr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var r,o,l,u,h,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(h=t.source)===null||h===void 0?void 0:h.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Ko(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&kv(e.config.tools)){const m=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let g=Object.assign({},m);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),Mv(g),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return h}async initAfcToolsMap(e){var t,r,o;const l=new Map;for(const u of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Ko(u)){const h=u,m=await h.tool();for(const g of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!g.name)throw new Error("Function declaration name is required.");if(l.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);l.set(g.name,h)}}return l}async processAfcStream(e){var t,r,o;const l=(o=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Ey;let u=!1,h=0;const m=await this.initAfcToolsMap(e);return(function(g,y,T){return Wo(this,arguments,function*(){for(var I,A,B,U,q,K;h<l;){u&&(h++,u=!1);const se=yield je(g.processParamsMaybeAddMcpUsage(T)),le=yield je(g.generateContentStreamInternal(se)),M=[],P=[];try{for(var X=!0,Q=(A=void 0,hl(le)),ie;ie=yield je(Q.next()),I=ie.done,!I;X=!0){U=ie.value,X=!1;const R=U;if(yield yield je(R),R.candidates&&(!((q=R.candidates[0])===null||q===void 0)&&q.content)){P.push(R.candidates[0].content);for(const k of(K=R.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(h<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(k.functionCall.name)){const L=yield je(y.get(k.functionCall.name).callTool([k.functionCall]));M.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){A={error:R}}finally{try{!X&&!I&&(B=Q.return)&&(yield je(B.call(Q)))}finally{if(A)throw A.error}}if(M.length>0){u=!0;const R=new ol;R.candidates=[{content:{role:"user",parts:M}}],yield yield je(R);const k=[];k.push(...P),k.push({role:"user",parts:M});const L=Sn(T.contents).concat(k);T.contents=L}else break}})})(this,m,e)}async generateContentInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=gy(this.apiClient,e);return h=ae("{model}:generateContent",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=_y(y),I=new ol;return Object.assign(I,T),I})}else{const g=my(this.apiClient,e);return h=ae("{model}:generateContent",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=yy(y),I=new ol;return Object.assign(I,T),I})}}async generateContentStreamInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=gy(this.apiClient,e);return h=ae("{model}:streamGenerateContent?alt=sse",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(T){return Wo(this,arguments,function*(){var I,A,B,U;try{for(var q=!0,K=hl(T),X;X=yield je(K.next()),I=X.done,!I;q=!0){U=X.value,q=!1;const Q=U,ie=_y(yield je(Q.json()));ie.sdkHttpResponse={headers:Q.headers};const se=new ol;Object.assign(se,ie),yield yield je(se)}}catch(Q){A={error:Q}}finally{try{!q&&!I&&(B=K.return)&&(yield je(B.call(K)))}finally{if(A)throw A.error}}})})}else{const g=my(this.apiClient,e);return h=ae("{model}:streamGenerateContent?alt=sse",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return Wo(this,arguments,function*(){var I,A,B,U;try{for(var q=!0,K=hl(T),X;X=yield je(K.next()),I=X.done,!I;q=!0){U=X.value,q=!1;const Q=U,ie=yy(yield je(Q.json()));ie.sdkHttpResponse={headers:Q.headers};const se=new ol;Object.assign(se,ie),yield yield je(se)}}catch(Q){A={error:Q}}finally{try{!q&&!I&&(B=K.return)&&(yield je(B.call(K)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=pP(this.apiClient,e);return h=ae("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=gP(y),I=new Zg;return Object.assign(I,T),I})}else{const g=hP(this.apiClient,e);return h=ae("{model}:batchEmbedContents",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=mP(y),I=new Zg;return Object.assign(I,T),I})}}async generateImagesInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=RP(this.apiClient,e);return h=ae("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=xP(y),I=new jg;return Object.assign(I,T),I})}else{const g=AP(this.apiClient,e);return h=ae("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=PP(y),I=new jg;return Object.assign(I,T),I})}}async editImageInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=uP(this.apiClient,e);return l=ae("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const g=cP(m),y=new _w;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=Rx(this.apiClient,e);return l=ae("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const g=Px(m),y=new vw;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=ax(this.apiClient,e);return l=ae("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=ux(m),y=new Ew;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=mx(this.apiClient,e);return l=ae("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=gx(m),y=new Tw;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=WP(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Qd(y))}else{const g=$P(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Jd(y))}}async listInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=tx(this.apiClient,e);return h=ae("{models_url}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=rx(y),I=new ey;return Object.assign(I,T),I})}else{const g=ex(this.apiClient,e);return h=ae("{models_url}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=nx(y),I=new ey;return Object.assign(I,T),I})}}async update(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=wx(this.apiClient,e);return h=ae("{model}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Qd(y))}else{const g=Cx(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Jd(y))}}async delete(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=oP(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=lP(y),I=new ty;return Object.assign(I,T),I})}else{const g=iP(this.apiClient,e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=sP(y),I=new ty;return Object.assign(I,T),I})}}async countTokens(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=tP(this.apiClient,e);return h=ae("{model}:countTokens",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=rP(y),I=new ny;return Object.assign(I,T),I})}else{const g=eP(this.apiClient,e);return h=ae("{model}:countTokens",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=nP(y),I=new ny;return Object.assign(I,T),I})}}async computeTokens(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=KR(this.apiClient,e);return l=ae("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const g=JR(m),y=new Iw;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=LP(this.apiClient,e);return h=ae("{model}:predictLongRunning",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>{const T=DP(y),I=new yu;return Object.assign(I,T),I})}else{const g=VP(this.apiClient,e);return h=ae("{model}:predictLongRunning",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const T=MP(y),I=new yu;return Object.assign(I,T),I})}}}class TN extends Ar{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=fw(e);return h=ae("{operationName}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u}else{const g=dw(e);return h=ae("{operationName}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=iw(e);return l=ae("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}function IN(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function SN(n){const e={},t=c(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>MN(l))),f(e,["parts"],o)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function CN(n,e,t){const r={},o=c(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const l=c(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&f(t,["newSessionExpireTime"],l);const u=c(e,["uses"]);t!==void 0&&u!=null&&f(t,["uses"],u);const h=c(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&f(t,["bidiGenerateContentSetup"],kN(n,h));const m=c(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&f(t,["fieldMask"],m),r}function wN(n,e){const t={},r=c(e,["config"]);return r!=null&&f(t,["config"],CN(n,r,t)),t}function AN(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function RN(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const o=c(n,["name"]);if(o!=null&&f(e,["name"],o),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PN(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function xN(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function NN(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const o=c(n,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const l=c(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const u=c(n,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const h=c(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const m=c(n,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const g=c(n,["mediaResolution"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","mediaResolution"],g);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","seed"],y);const T=c(n,["speechConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","speechConfig"],Gf(T));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&f(e,["setup","generationConfig","thinkingConfig"],I);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const B=c(n,["systemInstruction"]);e!==void 0&&B!=null&&f(e,["setup","systemInstruction"],SN(zt(B)));const U=c(n,["tools"]);if(e!==void 0&&U!=null){let le=ls(U);Array.isArray(le)&&(le=le.map(M=>VN(ss(M)))),f(e,["setup","tools"],le)}const q=c(n,["sessionResumption"]);e!==void 0&&q!=null&&f(e,["setup","sessionResumption"],DN(q));const K=c(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","inputAudioTranscription"],K);const X=c(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&f(e,["setup","outputAudioTranscription"],X);const Q=c(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&f(e,["setup","realtimeInputConfig"],Q);const ie=c(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&f(e,["setup","contextWindowCompression"],ie);const se=c(n,["proactivity"]);return e!==void 0&&se!=null&&f(e,["setup","proactivity"],se),t}function kN(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["setup","model"],Oe(n,r));const o=c(e,["config"]);return o!=null&&f(t,["config"],NN(o,t)),t}function MN(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const o=c(n,["executableCode"]);o!=null&&f(e,["executableCode"],o);const l=c(n,["fileData"]);l!=null&&f(e,["fileData"],AN(l));const u=c(n,["functionCall"]);u!=null&&f(e,["functionCall"],RN(u));const h=c(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],IN(m));const g=c(n,["text"]);g!=null&&f(e,["text"],g);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const T=c(n,["thoughtSignature"]);T!=null&&f(e,["thoughtSignature"],T);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function DN(n){const e={},t=c(n,["handle"]);if(t!=null&&f(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VN(n){const e={},t=c(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),f(e,["functionDeclarations"],y)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(n,["computerUse"]);o!=null&&f(e,["computerUse"],o);const l=c(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const u=c(n,["codeExecution"]);if(u!=null&&f(e,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],PN(h));const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],xN(m));const g=c(n,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function LN(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function FN(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const l=r.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=LN(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];o.length>0&&(h=o.map(g=>u.includes(g)?`generationConfig.${g}`:g));const m=[];l&&m.push(l),h.length>0&&m.push(...h),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class UN extends Ar{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=wN(this.apiClient,e);l=ae("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const m=FN(h,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),o.then(g=>g)}}}function BN(n,e){const t={},r=c(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),t}function qN(n){const e={},t=c(n,["name"]);t!=null&&f(e,["_url","name"],t);const r=c(n,["config"]);return r!=null&&BN(r,e),e}function ON(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","name"],t),e}function bN(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const o=c(n,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),t}function GN(n){const e={},t=c(n,["parent"]);t!=null&&f(e,["_url","parent"],t);const r=c(n,["config"]);return r!=null&&bN(r,e),e}function HN(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const o=c(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),f(e,["documents"],l)}return e}class zN extends Ar{constructor(e){super(),this.apiClient=e,this.list=async t=>new $i(wr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ON(e);return l=ae("{name}",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,r;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qN(e);o=ae("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=GN(e);return l=ae("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=HN(m),y=new Sw;return Object.assign(y,g),y})}}}class $N extends Ar{constructor(e,t=new zN(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new $i(wr.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Lx(e);return l=ae("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Bx(e);return l=ae("{name}",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,r;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ux(e);o=ae("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zx(e);return l=ae("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=$x(m),y=new Cw;return Object.assign(y,g),y})}}async uploadToFileSearchStoreInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Wx(e);return l=ae("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=Kx(m),y=new ww;return Object.assign(y,g),y})}}async importFile(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bx(e);return l=ae("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const g=Ox(m),y=new Uf;return Object.assign(y,g),y})}}}function WN(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function KN(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function JN(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&f(t,["sdkHttpResponse"],r),t}function QN(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&f(t,["sdkHttpResponse"],r),t}function YN(n,e,t){const r={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=c(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&f(e,["displayName"],o),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=c(n,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const u=c(n,["learningRateMultiplier"]);if(u!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],u),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=c(n,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const m=c(n,["learningRate"]);if(e!==void 0&&m!=null&&f(e,["tuningTask","hyperparameters","learningRate"],m),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function XN(n,e,t){const r={};let o=c(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const A=c(n,["validationDataset"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec"],Cy(A))}else if(o==="PREFERENCE_TUNING"){const A=c(n,["validationDataset"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec"],Cy(A))}const l=c(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const u=c(n,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);let h=c(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=c(n,["epochCount"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=c(n,["epochCount"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let m=c(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=c(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(m==="PREFERENCE_TUNING"){const A=c(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let g=c(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(g==="PREFERENCE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let y=c(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(n,["adapterSize"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(n,["adapterSize"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=c(n,["labels"]);e!==void 0&&T!=null&&f(e,["labels"],T);const I=c(n,["beta"]);return e!==void 0&&I!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],I),r}function ZN(n,e){const t={},r=c(n,["baseModel"]);r!=null&&f(t,["baseModel"],r);const o=c(n,["preTunedModel"]);o!=null&&f(t,["preTunedModel"],o);const l=c(n,["trainingDataset"]);l!=null&&uk(l);const u=c(n,["config"]);return u!=null&&YN(u,t),t}function jN(n,e){const t={},r=c(n,["baseModel"]);r!=null&&f(t,["baseModel"],r);const o=c(n,["preTunedModel"]);o!=null&&f(t,["preTunedModel"],o);const l=c(n,["trainingDataset"]);l!=null&&ck(l,t,e);const u=c(n,["config"]);return u!=null&&XN(u,t,e),t}function ek(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function tk(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function nk(n,e,t){const r={},o=c(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=c(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const u=c(n,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),r}function rk(n,e,t){const r={},o=c(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=c(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const u=c(n,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),r}function ik(n,e){const t={},r=c(n,["config"]);return r!=null&&nk(r,t),t}function ok(n,e){const t={},r=c(n,["config"]);return r!=null&&rk(r,t),t}function sk(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const o=c(n,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const l=c(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>Dv(h))),f(t,["tuningJobs"],u)}return t}function lk(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const o=c(n,["nextPageToken"]);o!=null&&f(t,["nextPageToken"],o);const l=c(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>Xd(h))),f(t,["tuningJobs"],u)}return t}function ak(n,e){const t={},r=c(n,["name"]);r!=null&&f(t,["model"],r);const o=c(n,["name"]);return o!=null&&f(t,["endpoint"],o),t}function uk(n,e){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(n,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),f(t,["examples","examples"],o)}return t}function ck(n,e,t){const r={};let o=c(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=c(n,["gcsUri"]);e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=c(n,["gcsUri"]);e!==void 0&&u!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=c(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=c(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=c(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Dv(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const o=c(n,["name"]);o!=null&&f(t,["name"],o);const l=c(n,["state"]);l!=null&&f(t,["state"],hv(l));const u=c(n,["createTime"]);u!=null&&f(t,["createTime"],u);const h=c(n,["tuningTask","startTime"]);h!=null&&f(t,["startTime"],h);const m=c(n,["tuningTask","completeTime"]);m!=null&&f(t,["endTime"],m);const g=c(n,["updateTime"]);g!=null&&f(t,["updateTime"],g);const y=c(n,["description"]);y!=null&&f(t,["description"],y);const T=c(n,["baseModel"]);T!=null&&f(t,["baseModel"],T);const I=c(n,["_self"]);return I!=null&&f(t,["tunedModel"],ak(I)),t}function Xd(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const o=c(n,["name"]);o!=null&&f(t,["name"],o);const l=c(n,["state"]);l!=null&&f(t,["state"],hv(l));const u=c(n,["createTime"]);u!=null&&f(t,["createTime"],u);const h=c(n,["startTime"]);h!=null&&f(t,["startTime"],h);const m=c(n,["endTime"]);m!=null&&f(t,["endTime"],m);const g=c(n,["updateTime"]);g!=null&&f(t,["updateTime"],g);const y=c(n,["error"]);y!=null&&f(t,["error"],y);const T=c(n,["description"]);T!=null&&f(t,["description"],T);const I=c(n,["baseModel"]);I!=null&&f(t,["baseModel"],I);const A=c(n,["tunedModel"]);A!=null&&f(t,["tunedModel"],A);const B=c(n,["preTunedModel"]);B!=null&&f(t,["preTunedModel"],B);const U=c(n,["supervisedTuningSpec"]);U!=null&&f(t,["supervisedTuningSpec"],U);const q=c(n,["preferenceOptimizationSpec"]);q!=null&&f(t,["preferenceOptimizationSpec"],q);const K=c(n,["tuningDataStats"]);K!=null&&f(t,["tuningDataStats"],K);const X=c(n,["encryptionSpec"]);X!=null&&f(t,["encryptionSpec"],X);const Q=c(n,["partnerModelTuningSpec"]);Q!=null&&f(t,["partnerModelTuningSpec"],Q);const ie=c(n,["customBaseModel"]);ie!=null&&f(t,["customBaseModel"],ie);const se=c(n,["experiment"]);se!=null&&f(t,["experiment"],se);const le=c(n,["labels"]);le!=null&&f(t,["labels"],le);const M=c(n,["outputUri"]);M!=null&&f(t,["outputUri"],M);const P=c(n,["pipelineJob"]);P!=null&&f(t,["pipelineJob"],P);const R=c(n,["serviceAccount"]);R!=null&&f(t,["serviceAccount"],R);const k=c(n,["tunedModelDisplayName"]);k!=null&&f(t,["tunedModelDisplayName"],k);const L=c(n,["veoTuningSpec"]);return L!=null&&f(t,["veoTuningSpec"],L),t}function dk(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const o=c(n,["name"]);o!=null&&f(t,["name"],o);const l=c(n,["metadata"]);l!=null&&f(t,["metadata"],l);const u=c(n,["done"]);u!=null&&f(t,["done"],u);const h=c(n,["error"]);return h!=null&&f(t,["error"],h),t}function Cy(n,e){const t={},r=c(n,["gcsUri"]);r!=null&&f(t,["validationDatasetUri"],r);const o=c(n,["vertexDatasetResource"]);return o!=null&&f(t,["validationDatasetUri"],o),t}class fk extends Ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $i(wr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:zd.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=tk(e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>Xd(y))}else{const g=ek(e);return h=ae("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>Dv(y))}}async listInternal(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=ok(e);return h=ae("tuningJobs",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=lk(y),I=new ry;return Object.assign(I,T),I})}else{const g=ik(e);return h=ae("tunedModels",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=sk(y),I=new ry;return Object.assign(I,T),I})}}async cancel(e){var t,r,o,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=KN(e);return h=ae("{name}:cancel",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=QN(y),I=new iy;return Object.assign(I,T),I})}else{const g=WN(e);return h=ae("{name}:cancel",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(T=>{const I=T;return I.sdkHttpResponse={headers:y.headers},I})),u.then(y=>{const T=JN(y),I=new iy;return Object.assign(I,T),I})}}async tuneInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const h=jN(e,e);return l=ae("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>Xd(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZN(e);return l=ae("tunedModels",h._url),u=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>dk(m))}}}class hk{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pk=1024*1024*8,mk=3,gk=1e3,yk=2,vu="x-goog-upload-status";async function _k(n,e,t){var r;const o=await Vv(n,e,t),l=await o?.json();if(((r=o?.headers)===null||r===void 0?void 0:r[vu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function vk(n,e,t){var r;const o=await Vv(n,e,t),l=await o?.json();if(((r=o?.headers)===null||r===void 0?void 0:r[vu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=lv(l),h=new Bf;return Object.assign(h,u),h}async function Vv(n,e,t){var r,o;let l=0,u=0,h=new $d(new Response),m="upload";for(l=n.size;u<l;){const g=Math.min(pk,l-u),y=n.slice(u,u+g);u+g>=l&&(m+=", finalize");let T=0,I=gk;for(;T<mk&&(h=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((r=h?.headers)===null||r===void 0)&&r[vu]));)T++,await Tk(I),I=I*yk;if(u+=g,((o=h?.headers)===null||o===void 0?void 0:o[vu])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function Ek(n){return{size:n.size,type:n.type}}function Tk(n){return new Promise(e=>setTimeout(e,n))}class Ik{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _k(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vk(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ek(e)}}class Sk{create(e,t,r){return new Ck(e,t,r)}}class Ck{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const wy="x-goog-api-key";class wk{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(wy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(wy,this.apiKey)}}}const Ak="gl-node/";class Rk{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=nw(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new wk(this.apiKey);this.apiClient=new tN({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Ak+"web",uploader:new Ik,downloader:new hk}),this.models=new EN(this.apiClient),this.live=new pN(this.apiClient,o,new Sk),this.batches=new kA(this.apiClient),this.chats=new fR(this.models,this.apiClient),this.caches=new uR(this.apiClient),this.files=new IR(this.apiClient),this.operations=new TN(this.apiClient),this.authTokens=new UN(this.apiClient),this.tunings=new fk(this.apiClient),this.fileSearchStores=new $N(this.apiClient)}}var Pk={};async function xk(n){const e=Pk.VITE_GEMINI_API_KEY;if(!e)throw alert("System Error: Google API Key is missing. Please set the VITE_GEMINI_API_KEY environment variable."),new Error("API Key not configured");const t=new Rk({apiKey:e});try{const r=await t.models.generateContent({model:"gemini-2.5-flash",contents:`You are an expert assessment creator. 
      Extract exactly 20 multiple choice questions from the provided text.
      If the text is not sufficient for 20 questions, generate relevant questions based on the topic of the text to reach 20.
      Ensure the questions are challenging but fair.
      Return the output strictly as a JSON array.`,config:{systemInstruction:`Input text: "${n.substring(0,3e4)}..."`,responseMimeType:"application/json",responseSchema:{type:Mt.ARRAY,items:{type:Mt.OBJECT,properties:{id:{type:Mt.STRING,description:"Unique UUID for question"},text:{type:Mt.STRING,description:"The question text"},options:{type:Mt.ARRAY,items:{type:Mt.OBJECT,properties:{id:{type:Mt.STRING,description:"Option ID (e.g. 'a', 'b')"},text:{type:Mt.STRING,description:"The option text"}},required:["id","text"]}},correctOptionId:{type:Mt.STRING,description:"The ID of the correct option"}},required:["id","text","options","correctOptionId"]}}}});return JSON.parse(r.text||"[]").map((l,u)=>({...l,id:l.id||`q-${u}-${Date.now()}`,options:l.options.map((h,m)=>({...h,id:h.id||`opt-${u}-${m}`}))}))}catch(r){throw console.error("AI Generation Error:",r),new Error("Failed to generate questions. "+(r.message||"Unknown error"))}}const Fu=({title:n,subtitle:e,isAdmin:t,onLogout:r})=>D.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:D.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex justify-between items-center",children:[D.jsxs("div",{className:"flex items-center space-x-3",children:[D.jsx("div",{className:`p-2 rounded-lg ${t?"bg-blue-100 text-blue-700":"bg-blue-50 text-blue-600"}`,children:D.jsx(Py,{size:24})}),D.jsxs("div",{children:[D.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:n}),e&&D.jsx("p",{className:"text-sm text-gray-500",children:e})]})]}),r&&D.jsxs("button",{onClick:r,className:"text-gray-500 hover:text-blue-700 flex items-center gap-2 text-sm font-medium",children:[D.jsx(eT,{size:16})," Exit"]})]})}),Nk=({onSelectMode:n})=>D.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center p-6 bg-gray-50",children:D.jsxs("div",{className:"max-w-md w-full text-center space-y-8",children:[D.jsx("div",{className:"flex justify-center mb-6",children:D.jsx("div",{className:"bg-blue-600 p-4 rounded-2xl shadow-xl shadow-blue-200",children:D.jsx(Py,{size:64,className:"text-white"})})}),D.jsx("h1",{className:"text-4xl font-extrabold text-gray-900",children:"e-Assessment"}),D.jsx("p",{className:"text-lg text-gray-600",children:"Secure, reliable assessment platform with instant grading."}),D.jsxs("div",{className:"grid gap-4 pt-8",children:[D.jsxs("button",{onClick:()=>n("user"),className:"w-full bg-white border-2 border-gray-200 hover:border-blue-400 hover:text-blue-600 hover:shadow-lg transition-all p-6 rounded-xl flex items-center justify-between group",children:[D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsx("div",{className:"bg-blue-50 text-blue-600 p-3 rounded-lg",children:D.jsx(ef,{size:24})}),D.jsxs("div",{className:"text-left",children:[D.jsx("span",{className:"block font-bold text-lg",children:"Assessment"}),D.jsx("span",{className:"text-sm text-gray-500",children:"Take an assessment"})]})]}),D.jsx(om,{className:"text-gray-300 group-hover:text-blue-500"})]}),D.jsxs("button",{onClick:()=>n("admin"),className:"w-full bg-white border-2 border-gray-200 hover:border-blue-700 hover:text-blue-800 hover:shadow-lg transition-all p-6 rounded-xl flex items-center justify-between group",children:[D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsx("div",{className:"bg-blue-100 text-blue-800 p-3 rounded-lg",children:D.jsx(Ry,{size:24})}),D.jsxs("div",{className:"text-left",children:[D.jsx("span",{className:"block font-bold text-lg",children:"Admin Portal"}),D.jsx("span",{className:"text-sm text-gray-500",children:"Manage assessments & results"})]})]}),D.jsx(om,{className:"text-gray-300 group-hover:text-blue-700"})]})]})]})}),kk=({onLogin:n,onCancel:e})=>{const[t,r]=ze.useState(""),[o,l]=ze.useState(""),[u,h]=ze.useState(""),m=g=>{g.preventDefault(),t==="admin"&&o==="buss123"?n():h("Invalid username or password")};return D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:D.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[D.jsxs("div",{className:"p-6 bg-blue-700 text-white flex items-center gap-3",children:[D.jsx(jE,{size:24}),D.jsx("h2",{className:"text-xl font-bold",children:"Admin Access"})]}),D.jsxs("form",{onSubmit:m,className:"p-8 space-y-6",children:[u&&D.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm font-medium flex items-center gap-2",children:[D.jsx(Ay,{size:16})," ",u]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Username"}),D.jsx("input",{type:"text",value:t,onChange:g=>r(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white text-black",placeholder:"Enter username",autoFocus:!0})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Password"}),D.jsx("input",{type:"password",value:o,onChange:g=>l(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white text-black",placeholder:"Enter password"})]}),D.jsxs("div",{className:"flex gap-4 pt-2",children:[D.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 font-bold rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),D.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors",children:"Login"})]})]})]})})},Mk=({onNavigate:n})=>{const[e,t]=ze.useState([]),[r,o]=ze.useState([]),[l,u]=ze.useState("assessments");ze.useEffect(()=>{Gd().then(t),YC().then(o)},[]);const h=async y=>{confirm(`Are you sure you want to delete this assessment? 

WARNING: If you delete this, you will no longer be able to generate detailed question-by-question reports for past results.`)&&(await JC(y),t(await Gd()))},m=y=>{const T=e.find(se=>se.id===y);if(!T)return alert("Assessment definition not found. Cannot generate detailed report because the questions have been deleted.");const I=r.filter(se=>se.assessmentId===y);if(I.length===0)return alert("No results found for this topic.");const A=["Assessment Title","Date","Time","Student Name","Agent Code","Location","Score","Result"],B=T.questions.map((se,le)=>`Q${le+1}: ${se.text.substring(0,30).replace(/,/g,"")}...`),U=[...A,...B],q=I.map(se=>{const le=new Date(se.timestamp),M=T.questions.map(P=>{const R=se.answers?.[P.id];return`"${(P.options.find(L=>L.id===R)?.text||R||"-").replace(/"/g,'""')}"`});return[`"${se.assessmentTitle||T.title}"`,`"${le.toLocaleDateString()}"`,`"${le.toLocaleTimeString()}"`,`"${se.studentName}"`,`"${se.agentCode||"-"}"`,`"${se.location||"-"}"`,`="${se.score}/${se.totalQuestions}"`,`"${se.passed?"PASSED":"FAILED"}"`,...M].join(",")}),K="data:text/csv;charset=utf-8,"+[U.join(","),...q].join(`
`),X=encodeURI(K),Q=document.createElement("a"),ie=T.title.replace(/[^a-z0-9]/gi,"_");Q.setAttribute("href",X),Q.setAttribute("download",`Report_${ie}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)},g=Array.from(new Set(r.map(y=>y.assessmentId))).map(y=>{const T=r.find(B=>B.assessmentId===y),I=r.filter(B=>B.assessmentId===y).length,A=r.filter(B=>B.assessmentId===y&&B.passed).length;return{id:y,title:T?.assessmentTitle||"Unknown Assessment",count:I,passRate:I>0?Math.round(A/I*100):0}});return D.jsxs("div",{className:"min-h-screen bg-gray-50",children:[D.jsx(Fu,{title:"Admin Dashboard",subtitle:"Manage assessments & results",isAdmin:!0,onLogout:()=>n("HOME")}),D.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[D.jsxs("div",{className:"flex gap-4 mb-8",children:[D.jsxs("button",{onClick:()=>u("assessments"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${l==="assessments"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[D.jsx(Ry,{size:18})," Assessments"]}),D.jsxs("button",{onClick:()=>u("reports"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${l==="reports"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[D.jsx(sm,{size:18})," Student Reports"]})]}),l==="assessments"&&D.jsxs("div",{className:"space-y-6",children:[D.jsxs("button",{onClick:()=>n("ADMIN_CREATE"),className:"w-full border-2 border-dashed border-gray-300 hover:border-blue-500 hover:bg-blue-50 text-gray-500 hover:text-blue-600 p-8 rounded-xl flex flex-col items-center justify-center transition-colors",children:[D.jsx(nT,{size:40,className:"mb-2"}),D.jsx("span",{className:"font-semibold text-lg",children:"Create New Assessment"}),D.jsx("span",{className:"text-sm",children:"Import from text or create manually"})]}),D.jsxs("div",{className:"grid gap-4",children:[e.map(y=>D.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex justify-between items-center",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"font-bold text-lg text-gray-900",children:y.title}),D.jsxs("p",{className:"text-sm text-gray-500",children:[y.category,"  ",y.questions.length," Questions  Created ",new Date(y.createdAt).toLocaleDateString()]})]}),D.jsx("div",{className:"flex items-center gap-3",children:D.jsx("button",{onClick:()=>h(y.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:D.jsx(sT,{size:20})})})]},y.id)),e.length===0&&D.jsx("p",{className:"text-center text-gray-400",children:"No assessments found."})]})]}),l==="reports"&&D.jsxs("div",{className:"grid gap-6",children:[g.map(y=>D.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[D.jsxs("div",{className:"flex-1",children:[D.jsx("h3",{className:"font-bold text-lg text-gray-900",children:y.title}),D.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 mt-1",children:[D.jsxs("span",{className:"flex items-center gap-1",children:[D.jsx(ef,{size:14})," ",y.count," Attempts"]}),D.jsxs("span",{className:"flex items-center gap-1",children:[D.jsx(jd,{size:14})," ",y.passRate,"% Pass Rate"]})]})]}),D.jsxs("button",{onClick:()=>m(y.id),className:"w-full md:w-auto px-4 py-2 bg-blue-100 text-blue-700 font-bold rounded-lg hover:bg-blue-200 flex items-center justify-center gap-2",children:[D.jsx(YE,{size:18})," Download CSV"]})]},y.id)),g.length===0&&D.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-gray-200",children:[D.jsx(sm,{className:"mx-auto text-gray-300 mb-2",size:48}),D.jsx("p",{className:"text-gray-500",children:"No results recorded yet."})]})]})]})]})},Dk=({onNavigate:n})=>{const[e,t]=ze.useState(1),[r,o]=ze.useState(!1),[l,u]=ze.useState(""),[h,m]=ze.useState(""),[g,y]=ze.useState(""),[T,I]=ze.useState([]),A=()=>{u("FIRE SAFETY BASIC"),m("SAFETY COMPLIANCE"),y(`Fire safety is the set of practices intended to reduce the destruction caused by fire. Fire safety measures include those that are intended to prevent ignition of an uncontrolled fire, and those that are used to limit the development and effects of a fire after it starts.
    
    Key elements include:
    1. Fire Alarms: Devices that warn people of a fire.
    2. Extinguishers: Portable devices used to put out small fires. Types include Water, Foam, CO2, and Powder.
    3. Evacuation Routes: Planned paths to exit a building safely.
    4. Assembly Points: Safe areas outside the building where people gather.
    5. Smoke Detectors: Sensors that detect smoke and trigger alarms.
    
    PASS (Pull, Aim, Squeeze, Sweep) is the standard method for using an extinguisher.
    Class A fires involve ordinary combustibles like wood and paper.
    Class B fires involve flammable liquids.
    Class C fires involve electrical equipment.
    
    Never use water on an electrical fire.
    Stop, Drop, and Roll if your clothes catch fire.
    Keep fire doors closed to prevent spread.
    Do not use elevators during a fire.`)},B=async()=>{if(!g.trim())return alert("Please enter some text");o(!0);try{const q=await xk(g);I(q),t(2)}catch(q){alert(q.message)}finally{o(!1)}},U=async()=>{if(!l||!h)return alert("Please enter title and category");const q={id:crypto.randomUUID(),title:l,category:h,createdAt:new Date().toISOString(),isActive:!0,questions:T};await KC(q),n("ADMIN_DASHBOARD")};return D.jsxs("div",{className:"min-h-screen bg-gray-50",children:[D.jsx(Fu,{title:"New Assessment",subtitle:"Step-by-step wizard",isAdmin:!0,onLogout:()=>n("ADMIN_DASHBOARD")}),D.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[e===1&&D.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200",children:[D.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[D.jsx(XE,{className:"text-blue-600"}),"Step 1: Import Content"]}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assessment Title"}),D.jsx("input",{type:"text",value:l,onChange:q=>u(q.target.value.toUpperCase()),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none uppercase bg-white text-black",placeholder:"E.G. FIRE SAFETY 101"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),D.jsx("input",{type:"text",value:h,onChange:q=>m(q.target.value.toUpperCase()),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none uppercase bg-white text-black",placeholder:"E.G. SAFETY COMPLIANCE"})]}),D.jsxs("div",{children:[D.jsxs("div",{className:"flex justify-between items-end mb-1",children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Source Material"}),D.jsx("button",{onClick:A,className:"text-xs text-blue-600 hover:underline font-medium",children:"Insert Sample Text for Testing"})]}),D.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Paste content from your PDF/Word doc here. AI will extract 20 questions."}),D.jsx("textarea",{value:g,onChange:q=>y(q.target.value),className:"w-full p-3 border border-gray-300 rounded-lg h-64 focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm bg-white text-black",placeholder:"Paste assessment content here..."})]}),D.jsx("button",{onClick:B,disabled:r,className:"w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 flex justify-center items-center gap-3 disabled:opacity-70",children:r?D.jsx(rT,{className:"animate-spin"}):D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("div",{className:"text-yellow-300",children:""})," Generate 20 Questions"]})})]})]}),e===2&&D.jsxs("div",{className:"space-y-6",children:[D.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 flex items-center gap-3 text-green-800",children:[D.jsx(jd,{}),D.jsxs("span",{className:"font-medium",children:["Successfully generated ",T.length," questions!"]})]}),D.jsx("div",{className:"bg-white rounded-xl border border-gray-200 divide-y divide-gray-100",children:T.map((q,K)=>D.jsx("div",{className:"p-6",children:D.jsxs("div",{className:"flex gap-4",children:[D.jsxs("span",{className:"bg-gray-100 text-gray-600 font-bold px-3 py-1 rounded h-fit text-sm",children:["Q",K+1]}),D.jsxs("div",{className:"flex-1",children:[D.jsx("p",{className:"font-medium text-lg mb-4",children:q.text}),D.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:q.options.map(X=>D.jsxs("div",{className:`p-3 rounded-lg border ${X.id===q.correctOptionId?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[D.jsxs("span",{className:"font-semibold mr-2",children:[X.id.toUpperCase(),"."]}),X.text]},X.id))})]})]})},q.id))}),D.jsxs("div",{className:"flex gap-4",children:[D.jsx("button",{onClick:()=>t(1),className:"flex-1 py-4 bg-gray-200 hover:bg-gray-300 rounded-lg font-bold text-gray-700",children:"Back"}),D.jsxs("button",{onClick:U,className:"flex-1 py-4 bg-blue-700 hover:bg-blue-800 text-white rounded-lg font-bold shadow-lg flex items-center justify-center gap-2",children:[D.jsx(oT,{size:20})," Save Assessment"]})]})]})]})]})},Vk=({onNavigate:n,setSessionData:e})=>{const[t,r]=ze.useState(""),[o,l]=ze.useState(""),[u,h]=ze.useState("Buss Oasis"),[m,g]=ze.useState([]),[y,T]=ze.useState(null),I=["Buss Oasis","Buss Melaka","Buss BM"];ze.useEffect(()=>{Gd().then(g);const U=ZC();U&&T(U)},[]);const A=U=>{if(!t.trim())return alert("Please enter your name");if(!o.trim())return alert("Please enter your Agent Code");e({studentName:t,agentCode:o,location:u,assessment:U}),n("ASSESSMENT_RUNNER")},B=()=>{if(y){const U=m.find(q=>q.id===y.assessmentId);U?(e({studentName:y.studentName,agentCode:y.agentCode,location:y.location,assessment:U,existingSession:y}),n("ASSESSMENT_RUNNER")):(alert("Original assessment data not found."),sv(),T(null))}};return D.jsxs("div",{className:"min-h-screen bg-gray-50",children:[D.jsx(Fu,{title:"Assessment",subtitle:"Select an assessment",onLogout:()=>n("HOME")}),D.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[y&&D.jsxs("div",{className:"mb-8 bg-blue-50 border border-blue-200 p-6 rounded-xl flex items-center justify-between shadow-sm",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"text-blue-900 font-bold text-lg",children:"Unfinished Assessment Found"}),D.jsxs("p",{className:"text-blue-700 text-sm",children:["You were taking a quiz as ",D.jsx("strong",{children:y.studentName}),"."]})]}),D.jsx("button",{onClick:B,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700",children:"Resume Quiz"})]}),D.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200 mb-8 space-y-4",children:[D.jsx("h2",{className:"text-lg font-bold text-gray-900 border-b border-gray-100 pb-2 mb-4",children:"Candidate Details"}),D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[D.jsxs("div",{children:[D.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[D.jsx(ef,{size:16})," Full Name"]}),D.jsx("input",{type:"text",value:t,onChange:U=>r(U.target.value.toUpperCase()),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none uppercase bg-white text-black",placeholder:"ENTER YOUR FULL NAME"})]}),D.jsxs("div",{children:[D.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[D.jsx(ZE,{size:16})," Agent Code"]}),D.jsx("input",{type:"text",value:o,onChange:U=>l(U.target.value.toUpperCase()),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none uppercase bg-white text-black",placeholder:"E.G. A12345"})]}),D.jsxs("div",{children:[D.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[D.jsx(QE,{size:16})," Date"]}),D.jsx("input",{type:"text",value:new Date().toLocaleDateString(),readOnly:!0,className:"w-full p-3 border border-gray-300 bg-gray-100 text-gray-600 rounded-lg cursor-not-allowed outline-none"})]}),D.jsxs("div",{children:[D.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[D.jsx(tT,{size:16})," Location"]}),D.jsxs("div",{className:"relative",children:[D.jsx("select",{value:u,onChange:U=>h(U.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-white text-black",children:I.map(U=>D.jsx("option",{value:U,children:U},U))}),D.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:D.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:D.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]})]})]}),D.jsx("h3",{className:"text-gray-500 font-bold uppercase tracking-wider text-sm mb-4",children:"Available Assessments"}),D.jsxs("div",{className:"grid gap-4",children:[m.map(U=>D.jsxs("button",{onClick:()=>A(U),className:"bg-white p-6 rounded-xl border border-gray-200 hover:border-blue-500 hover:shadow-md transition-all text-left group",children:[D.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-blue-600",children:U.title}),D.jsxs("div",{className:"flex justify-between items-center mt-2",children:[D.jsx("p",{className:"text-gray-500",children:U.category}),D.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full text-xs font-bold text-gray-600",children:[U.questions.length," Questions"]})]})]},U.id)),m.length===0&&D.jsx("p",{className:"text-gray-400 text-center py-8",children:"No assessments available right now."})]})]})]})},Lk=({data:n,onNavigate:e,onComplete:t})=>{const[r,o]=ze.useState(0),[l,u]=ze.useState({}),h=n.assessment,m=h.questions[r];ze.useEffect(()=>{n.existingSession?(u(n.existingSession.answers),o(n.existingSession.currentQuestionIndex)):(u({}),o(0))},[n]),ze.useEffect(()=>{Object.keys(l).length>0&&XC({studentName:n.studentName,agentCode:n.agentCode,location:n.location,assessmentId:h.id,currentQuestionIndex:r,answers:l,startTime:new Date().toISOString()})},[l,r,n.studentName,n.agentCode,n.location,h.id]);const g=T=>{u(I=>({...I,[m.id]:T}))},y=async()=>{const T=h.questions.length;let I=0;const A=[];h.questions.forEach(U=>{l[U.id]===U.correctOptionId?I++:A.push(U.id)});const B={id:crypto.randomUUID(),assessmentId:h.id,assessmentTitle:h.title,studentName:n.studentName,agentCode:n.agentCode,location:n.location,score:I,totalQuestions:T,passed:I>=16,timestamp:new Date().toISOString(),missedQuestionIds:A,answers:l};await QC(B),sv(),t(B)};return D.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[D.jsx(Fu,{title:h.title,subtitle:`Question ${r+1} of ${h.questions.length}`}),D.jsxs("main",{className:"flex-1 max-w-3xl mx-auto w-full px-4 py-8 flex flex-col",children:[D.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-8",children:D.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/h.questions.length*100}%`}})}),D.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-200 flex-1",children:[D.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8 leading-snug",children:m.text}),D.jsx("div",{className:"space-y-4",children:m.options.map(T=>{const I=l[m.id]===T.id;return D.jsxs("button",{onClick:()=>g(T.id),className:`w-full p-5 rounded-xl border-2 text-left transition-all flex items-center gap-4 group
                    ${I?"border-blue-500 bg-blue-50 text-blue-800":"border-gray-100 hover:border-gray-300 text-gray-700"}`,children:[D.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border
                    ${I?"bg-blue-500 text-white border-blue-500":"bg-white border-gray-300 text-gray-500"}`,children:T.id.toUpperCase()}),D.jsx("span",{className:"text-lg font-medium",children:T.text})]},T.id)})})]}),D.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[D.jsx("button",{disabled:r===0,onClick:()=>o(T=>T-1),className:"text-gray-500 font-bold px-6 py-3 rounded-lg hover:bg-gray-200 disabled:opacity-30",children:"Previous"}),r<h.questions.length-1?D.jsx("button",{onClick:()=>o(T=>T+1),className:"bg-blue-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-blue-700 shadow-lg",children:"Next Question"}):D.jsx("button",{onClick:y,disabled:Object.keys(l).length<h.questions.length,className:"bg-blue-800 text-white font-bold px-8 py-3 rounded-lg hover:bg-blue-900 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Assessment"})]})]})]})},Fk=({result:n,assessment:e,onExit:t,onRetry:r})=>{const o=n.passed;return D.jsxs("div",{className:"min-h-screen bg-gray-50",children:[D.jsx("div",{className:`h-48 ${o?"bg-green-600":"bg-red-600"} flex items-center justify-center`,children:D.jsxs("div",{className:"text-center text-white",children:[o?D.jsx(jd,{size:64,className:"mx-auto mb-4"}):D.jsx(lT,{size:64,className:"mx-auto mb-4"}),D.jsx("h1",{className:"text-4xl font-extrabold",children:o?"Assessment Passed!":"Assessment Failed"}),D.jsxs("p",{className:"opacity-90 mt-2",children:["Score: ",n.score," / ",n.totalQuestions]})]})}),D.jsx("main",{className:"max-w-3xl mx-auto px-4 -mt-10 pb-12",children:D.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[D.jsx("div",{className:"p-8 text-center border-b border-gray-100",children:D.jsx("p",{className:"text-gray-600",children:o?"Congratulations! You have demonstrated sufficient knowledge in this area.":"You did not meet the minimum requirement of 16 correct answers. Please review the material and try again."})}),n.missedQuestionIds.length>0&&D.jsxs("div",{className:"bg-orange-50 p-6",children:[D.jsxs("h3",{className:"text-orange-900 font-bold flex items-center gap-2 mb-4",children:[D.jsx(Ay,{size:20}),"Topics to Review"]}),D.jsx("div",{className:"space-y-4",children:e.questions.map((l,u)=>({q:l,num:u+1})).filter(l=>n.missedQuestionIds.includes(l.q.id)).map(l=>D.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[D.jsxs("p",{className:"font-bold text-gray-800 mb-2",children:["Question ",l.num,": ",l.q.text]}),D.jsx("p",{className:"text-sm text-red-500 font-medium",children:"Your answer was incorrect."})]},l.q.id))})]}),D.jsxs("div",{className:"p-6 bg-gray-50 flex flex-col md:flex-row gap-4 justify-center",children:[D.jsx("button",{onClick:t,className:"flex-1 max-w-xs bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-bold hover:bg-gray-300",children:"Return to Home"}),!o&&D.jsxs("button",{onClick:r,className:"flex-1 max-w-xs bg-blue-800 text-white px-8 py-3 rounded-lg font-bold hover:bg-blue-900 flex items-center justify-center gap-2",children:[D.jsx(iT,{size:20})," Retry Assessment"]})]})]})})]})},Uk=()=>{const[n,e]=ze.useState("HOME"),[t,r]=ze.useState(null),[o,l]=ze.useState(null),u=(g,y)=>{window.scrollTo(0,0),e(g)},h=g=>{l(g),u("RESULT")},m=()=>{if(t){const g={...t,existingSession:null};r(g),u("ASSESSMENT_RUNNER")}};return D.jsxs(D.Fragment,{children:[n==="HOME"&&D.jsx(Nk,{onSelectMode:g=>u(g==="admin"?"ADMIN_LOGIN":"USER_PORTAL")}),n==="ADMIN_LOGIN"&&D.jsx(kk,{onLogin:()=>e("ADMIN_DASHBOARD"),onCancel:()=>e("HOME")}),n==="ADMIN_DASHBOARD"&&D.jsx(Mk,{onNavigate:u}),n==="ADMIN_CREATE"&&D.jsx(Dk,{onNavigate:u}),n==="USER_PORTAL"&&D.jsx(Vk,{onNavigate:u,setSessionData:r}),n==="ASSESSMENT_RUNNER"&&t&&D.jsx(Lk,{data:t,onNavigate:u,onComplete:h}),n==="RESULT"&&o&&t&&D.jsx(Fk,{result:o,assessment:t.assessment,onExit:()=>u("HOME"),onRetry:m})]})},Bk=WE.createRoot(document.getElementById("root"));Bk.render(D.jsx(Uk,{}));
